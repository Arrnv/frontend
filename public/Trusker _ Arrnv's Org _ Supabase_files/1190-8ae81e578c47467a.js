!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},a=(new e.Error).stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="fc31ca0f-1da9-44fe-9366-df10a28b99c0",e._sentryDebugIdIdentifier="sentry-dbid-fc31ca0f-1da9-44fe-9366-df10a28b99c0")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1190],{916:(e,a,t)=>{t.d(a,{n:()=>i});var s=t(56947),r=t(65172),n=t(70783);async function o(e,a){let{slug:t}=e;if(!t)throw Error("Organization slug is required");let{data:s,error:n}=await (0,r.Jt)("/platform/organizations/{slug}/oauth/apps",{params:{path:{slug:t},query:{type:"authorized"}}});return n&&(0,r.H4)(n),s}let i=function(e){let{slug:a}=e,{enabled:t=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)(n.R.authorizedApps(a),e=>{let{signal:t}=e;return o({slug:a},t)},{enabled:t&&void 0!==a,...r})}},13874:(e,a,t)=>{t.d(a,{d:()=>c});var s=t(80263),r=t(44893),n=t(79279),o=t(53239),i=t(51500);let l=(0,n.F)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),d=(0,n.F)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),c=o.forwardRef((e,a)=>{let{className:t,size:n,...o}=e;return(0,s.jsx)(r.bL,{className:(0,i.cn)(l({size:n}),t),...o,ref:a,children:(0,s.jsx)(r.zi,{className:(0,i.cn)(d({size:n}))})})});c.displayName=r.bL.displayName},15961:(e,a,t)=>{t.d(a,{KQ:()=>u,RO:()=>c});var s=t(10663),r=t(46312),n=t(67575),o=t(33233),i=t(23385),l=t(5483),d=t(63492);s.k5(["disabled","schema","schema_and_log","schema_and_log_and_data"]);let c=e=>{let a=null==e?void 0:e.includes(d.W2.AI_SQL),t=null==e?void 0:e.includes(d.W2.AI_DATA),s=null==e?void 0:e.includes(d.W2.AI_LOG);return t?"schema_and_log_and_data":s?"schema_and_log":a?"schema":"disabled"};function u(){let{data:e}=(0,l.YA)(),{data:a}=(0,i.s)(),t=c(null==a?void 0:a.opt_in_tags),s="disabled"!==t,{data:u}=(0,o.j5)({orgSlug:null==a?void 0:a.slug}),p=(0,r.BP)(u),{data:m}=(0,n.G)({projectRef:null==e?void 0:e.ref}),g=!!(null==m?void 0:m.is_sensitive),h=p&&g,f=d.pe?s&&!e||s&&!h?t:"disabled":"schema",x=!d.pe||"disabled"!==f;return{aiOptInLevel:f,includeSchemaMetadata:x,isHipaaProjectDisallowed:h}}},20168:(e,a,t)=>{t.d(a,{A:()=>h});var s=t(80263),r=t(32981),n=t(53239),o=t(87494),i=t(16838),l=t(51500),d=t(47452),c=t(93210),u=t(40022),p=t(10663),m=t(47142);let g=(0,n.forwardRef)((e,a)=>{let{title:t,size:g="small",onConfirm:h,visible:f,onCancel:x,loading:b,cancelLabel:y="Cancel",confirmLabel:v="Submit",confirmPlaceholder:_,confirmString:j,alert:w,input:I,label:A,description:N,formMessage:k,text:O,children:S,blockDeleteButton:L=!0,variant:T="default",errorMessage:z="Value entered does not match",...C}=e,D=p.Ik({confirmValue:p.vk(e=>"string"==typeof e?e.trim():e,p.eu(j.trim(),{errorMap:()=>({message:z})}))}),E=(0,o.mN)({resolver:(0,r.u)(D),reValidateMode:"onChange",defaultValues:{confirmValue:""}});return(0,n.useEffect)(()=>{j&&E.reset()},[j]),(0,s.jsx)(i.lG,{open:f,...C,onOpenChange:()=>{f&&x()},children:(0,s.jsxs)(i.Cf,{ref:a,className:"p-0 gap-0 pb-5 !block",size:g,children:[(0,s.jsx)(i.c7,{className:(0,l.cn)("border-b"),padding:"small",children:(0,s.jsx)(i.L3,{className:"",children:t})}),w&&(0,s.jsx)(m.Z,{type:T,label:w.title,description:w.description,className:"border-r-0 border-l-0 rounded-none -mt-px [&_svg]:ml-0.5 mb-0",...null==w?void 0:w.base}),S&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.OO,{padding:"small",children:S}),(0,s.jsx)(i.pf,{})]}),void 0!==O&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.OO,{className:"p-5",padding:"small",children:(0,s.jsx)("p",{className:"text-foreground-light text-sm",children:O})}),(0,s.jsx)(i.pf,{})]}),(0,s.jsx)(d.lV,{...E,children:(0,s.jsxs)("form",{autoComplete:"off",onSubmit:E.handleSubmit(function(e){h()}),className:"px-5 flex flex-col gap-y-3 pt-3",children:[(0,s.jsx)(d.zB,{control:E.control,name:"confirmValue",render:e=>{let{field:a}=e;return(0,s.jsxs)(d.eI,{className:"flex flex-col gap-y-2",children:[(0,s.jsxs)(d.lR,{...A,children:["Type"," ",(0,s.jsx)("span",{className:"text-foreground break-all whitespace-pre",children:j})," ","to confirm."]}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{autoComplete:"off",placeholder:_,...I,...a})}),!!N&&(0,s.jsx)(d.Rr,{...N}),(0,s.jsx)(d.C5,{...k})]})}}),(0,s.jsxs)("div",{className:"flex gap-2",children:[!L&&(0,s.jsx)(u.$,{size:"medium",block:!0,type:"default",disabled:b,onClick:x,children:y}),(0,s.jsx)(u.$,{block:!0,size:"medium",type:"destructive"===T?"danger":"warning"===T?"warning":"primary",htmlType:"submit",loading:b,disabled:b,className:"truncate",children:v})]})]})})]})})});g.displayName="TextConfirmModal";let h=g},26181:(e,a,t)=>{t.d(a,{t:()=>d});var s=t(32144),r=t(80251),n=t(73969),o=t(65172),i=t(76080);async function l(e){let{is_default:a,projectRef:t,branchName:s,gitBranch:r,region:n,withData:i}=e,{data:l,error:d}=await (0,o.bE)("/v1/projects/{ref}/branches",{params:{path:{ref:t}},body:{is_default:a,branch_name:s,git_branch:r,region:n,with_data:i}});return d&&(0,o.H4)(d),l}let d=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,s.jE)();return(0,r.n)(e=>l(e),{async onSuccess(a,t,s){let{projectRef:r}=t;await o.invalidateQueries(i.N.list(r)),await (null==e?void 0:e(a,t,s))},async onError(e,t,s){void 0===a?n.oR.error("Failed to create branch: ".concat(e.message)):a(e,t,s)},...t})}},27799:(e,a,t)=>{t.d(a,{A:()=>i,y:()=>o});var s=t(80263),r=t(51500);let n=e=>{let{className:a,delayIndex:t=0,animationDelay:n=150}=e;return(0,s.jsx)("div",{className:(0,r.cn)("shimmering-loader rounded py-3",a),style:{animationFillMode:"backwards",animationDelay:"".concat(t*n,"ms")},"data-sentry-component":"ShimmeringLoader","data-sentry-source-file":"index.tsx"})},o=e=>{let{className:a}=e;return(0,s.jsxs)("div",{className:(0,r.cn)(a,"space-y-2"),"data-sentry-component":"GenericSkeletonLoader","data-sentry-source-file":"index.tsx",children:[(0,s.jsx)(n,{"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(n,{className:"w-3/4","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(n,{className:"w-1/2","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"})]})},i=n},28625:(e,a,t)=>{t.d(a,{CU:()=>d,Dv:()=>c,z6:()=>l});var s=t(80263),r=t(72342),n=t(25757),o=t(53239),i=t(51500);let l=o.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(r.bL,{className:(0,i.cn)("grid gap-2",t),...n,ref:a})});l.displayName=r.bL.displayName;let d=o.forwardRef((e,a)=>{let{className:t,children:o,...l}=e;return(0,s.jsx)(r.q7,{ref:a,className:(0,i.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...l,children:(0,s.jsx)(r.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=r.q7.displayName;let c=o.forwardRef((e,a)=>{let{image:t,label:n,showIndicator:o=!0,...l}=e;return(0,s.jsxs)(r.q7,{ref:a,...l,className:(0,i.cn)("flex flex-col gap-2","w-48","bg-surface-200","rounded-md border border-strong","p-2","shadow-sm","hover:border-stronger hover:bg-surface-300","data-[state=checked]:border-primary","data-[state=checked]:ring-1 data-[state=checked]:ring-border","data-[state=checked]:bg-selection data-[state=checked]:border-foreground","transition-colors","group",l.className),children:[l.children,(0,s.jsxs)("div",{className:"flex gap-2 w-full",children:[o&&(0,s.jsxs)("div",{className:"relative w-3 h-3 min-w-3 mt-0.5",children:[(0,s.jsx)(r.C1,{className:(0,i.cn)("absolute","w-[10px] h-[10px]","left-[1px] top-[1px]","border border-background-surface-300","rounded-full","data-[state=checked]:border-background-surface-300","data-[state=checked]:ring-foreground","data-[state=checked]:bg-foreground")}),(0,s.jsx)("div",{className:(0,i.cn)("absolute","w-3 h-3","border border-stronger","rounded-full","group-hover:border-foreground-light","group-data-[state=checked]:border-foreground","transition-colors")})]}),(0,s.jsx)("label",{htmlFor:l.value,className:(0,i.cn)("text-xs transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground",l.disabled?"cursor-not-allowed":"cursor-pointer"),children:n})]})]})});c.displayName=r.q7.displayName},29444:(e,a,t)=>{t.d(a,{U:()=>r,x:()=>s});let s=.8,r=[{value:"I was just exploring, or it was a hobby/student project."},{value:"I was not satisfied with the customer support I received.",label:"Could you tell us more about your experience with our support team?"},{value:"Supabase is missing a specific feature I need.",label:"What specific feature(s) are we missing?"},{value:"I found it difficult to use or build with.",label:"What specific parts of Supabase did you find difficult or frustrating?"},{value:"Performance or reliability insufficient.",label:"Could you tell us more about the specific issues you encountered (e.g., UI bugs, API latency, downtime)?"},{value:"My project was cancelled or put on hold."},{value:"Too expensive",label:"We appreciate your perspective on our pricing, what aspects of the cost felt too high?"},{value:"The pricing is unpredictable and hard to budget for.",label:"Which aspects of our pricing model made it difficult for you to predict your monthly costs?"},{value:"My company went out of business or was acquired."},{value:"I lost trust in the company or its future direction.",label:"Building and maintaining your trust is our highest priority, could you please share the specific event or reason that led to this loss of trust?"}]},33233:(e,a,t)=>{t.d(a,{cC:()=>c,j5:()=>d});var s=t(60045),r=t(56947),n=t(65172),o=t(75019),i=t(7124);async function l(e,a){let{orgSlug:t}=e;if(!t)throw Error("orgSlug is required");let{error:s,data:r}=await (0,n.Jt)("/platform/organizations/{slug}/billing/subscription",{params:{path:{slug:t}},signal:a});return s&&(0,n.H4)(s),r}let d=function(e){let{orgSlug:a}=e,{enabled:t=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,o.SE)(s.aG.BILLING_READ,"stripe.subscriptions");return(0,r.I)(i.s.orgSubscription(a),e=>{let{signal:t}=e;return l({orgSlug:a},t)},{enabled:t&&d&&void 0!==a,staleTime:36e5,...n})},c=e=>{let{data:a}=d({orgSlug:e});return(null==a?void 0:a.plan.id)==="enterprise"||(null==a?void 0:a.plan.id)==="team"}},35892:(e,a,t)=>{t.d(a,{A:()=>r});var s=t(80263);let r=e=>{let{active:a}=e;return a?(0,s.jsx)("div",{className:"logs-shimmering-loader w-full h-0.5","data-sentry-component":"ShimmerLine","data-sentry-source-file":"ShimmerLine.tsx"}):null}},54697:(e,a,t)=>{t.d(a,{v:()=>i});var s=t(80251),r=t(73969),n=t(65172);async function o(e,a){let{repositoryId:t,branchName:s}=e,{data:r,error:o}=await (0,n.Jt)("/platform/integrations/github/repositories/{repositoryId}/branches/{branchName}",{params:{path:{repositoryId:t,branchName:s}},signal:a});return o&&(0,n.H4)(o),r}let i=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.n)(e=>o(e),{async onSuccess(a,t,s){await (null==e?void 0:e(a,t,s))},async onError(e,t,s){void 0===a?r.oR.error("Failed to check Github branch: ".concat(e.message)):a(e,t,s)},...t})}},58135:(e,a,t)=>{t.d(a,{O:()=>i});var s=t(56947),r=t(65172),n=t(10001);async function o(e,a){let{organizationId:t}=e;if(!t)throw Error("organizationId is required");let{data:s,error:n}=await (0,r.Jt)("/platform/integrations/github/connections",{params:{query:{organization_id:t}},signal:a});return n&&(0,r.H4)(n),s.connections}let i=function(e){let{organizationId:a}=e,{enabled:t=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)(n.Z.githubConnectionsList(a),e=>{let{signal:t}=e;return o({organizationId:a},t)},{enabled:t&&void 0!==a,staleTime:18e5,...r})}},61186:(e,a,t)=>{t.d(a,{c:()=>p});var s=t(80263),r=t(47452),n=t(28625),o=t(61395),i=t(12578),l=t(16838),d=t(40022);let c=()=>(0,s.jsxs)(l.lG,{"data-sentry-element":"Dialog","data-sentry-component":"OptInToOpenAIToggle","data-sentry-source-file":"OptInToOpenAIToggle.tsx",children:[(0,s.jsx)(l.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"OptInToOpenAIToggle.tsx",children:(0,s.jsx)(d.$,{type:"outline",className:"w-fit","data-sentry-element":"Button","data-sentry-source-file":"OptInToOpenAIToggle.tsx",children:"Learn more about data privacy"})}),(0,s.jsxs)(l.Cf,{className:"sm:max-w-2xl","data-sentry-element":"DialogContent","data-sentry-source-file":"OptInToOpenAIToggle.tsx",children:[(0,s.jsx)(l.c7,{padding:"small",className:"border-b","data-sentry-element":"DialogHeader","data-sentry-source-file":"OptInToOpenAIToggle.tsx",children:(0,s.jsx)(l.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"OptInToOpenAIToggle.tsx",children:"Data Privacy and Supabase AI"})}),(0,s.jsxs)(l.OO,{padding:"small",className:"flex flex-col gap-y-4 text-sm text-foreground-light","data-sentry-element":"DialogSection","data-sentry-source-file":"OptInToOpenAIToggle.tsx",children:[(0,s.jsx)("p",{children:'Supabase AI utilizes Amazon Bedrock ("Bedrock"), a service designed with a strong focus on data privacy and security.'}),(0,s.jsx)("p",{children:"Amazon Bedrock does not store or log your prompts and completions. This data is not used to train any AWS models and is not distributed to third parties or model providers. Model providers do not have access to Amazon Bedrock logs or customer prompts and completions."}),(0,s.jsx)("p",{children:"By default, no information is shared with Bedrock unless you explicitly provide consent. With your permission, Supabase may share customer-generated prompts, database schema, database data, and project logs with Bedrock. This information is used solely to generate responses to your queries and is not retained by Bedrock or used to train their foundation models."}),(0,s.jsx)("p",{children:"If you are a HIPAA Covered Entity, please note that Bedrock is HIPAA eligible, and Supabase has a Business Associate Agreement in place covering this use."}),(0,s.jsxs)("p",{children:["For more detailed information about how we collect and use your data, see our"," ",(0,s.jsx)(i.g,{href:"https://supabase.com/privacy","data-sentry-element":"InlineLink","data-sentry-source-file":"OptInToOpenAIToggle.tsx",children:"Privacy Policy"}),". You can choose which types of information you consent to share by selecting from the options in the AI settings."]})]})]})]}),u=[{value:"disabled",title:"Disabled",description:"You do not consent to sharing any database information with Amazon Bedrock and understand that responses will be generic and not tailored to your database"},{value:"schema",title:"Schema Only",description:"You consent to sharing your database’s schema metadata (such as table and column names, data types, and relationships—but not actual database data) with Amazon Bedrock"},{value:"schema_and_log",title:"Schema & Logs",description:"You consent to sharing your schema and logs (which may contain PII/database data) with Amazon Bedrock for better results"},{value:"schema_and_log_and_data",title:"Schema, Logs & Database Data",description:"You consent to give Amazon Bedrock  full access to run database read only queries and analyze results for optimal results"}],p=e=>{let{control:a,disabled:t,label:i,layout:l="vertical"}=e;return(0,s.jsx)(o.M,{label:i,layout:l,description:(0,s.jsxs)("div",{className:"flex flex-col gap-y-4 my-4 max-w-xl",children:[(0,s.jsx)("p",{children:"Supabase AI can provide more relevant answers if you choose to share different levels of data. This feature is powered by Amazon Bedrock which does not store or log your prompts and completions, nor does it use them to train AWS models or distribute them to third parties. This is an organization-wide setting, so please select the level of data you are comfortable sharing."}),(0,s.jsx)(c,{})]}),"data-sentry-element":"FormItemLayout","data-sentry-component":"AIOptInLevelSelector","data-sentry-source-file":"AIOptInLevelSelector.tsx",children:(0,s.jsx)("div",{className:"max-w-xl",children:(0,s.jsx)(r.zB,{control:a,name:"aiOptInLevel",render:e=>{let{field:a}=e;return(0,s.jsx)(n.z6,{value:a.value,onValueChange:a.onChange,disabled:t,className:"space-y-2 mb-6",children:u.map(e=>(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(n.CU,{value:e.value,id:"ai-opt-in-".concat(e.value),className:"mt-0.5"}),(0,s.jsxs)("label",{htmlFor:"ai-opt-in-".concat(e.value),className:"cursor-pointer flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.title}),(0,s.jsx)("span",{className:"text-sm text-foreground-light",children:e.description})]})]},e.value))})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"AIOptInLevelSelector.tsx"})})})}},61957:(e,a,t)=>{t.d(a,{A:()=>g});var s=t(80263),r=t(60045),n=t(15601),o=t.n(n),i=t(75019),l=t(23385),d=t(5483),c=t(54660),u=t(51500),p=t(40022),m=t(88602);let g=e=>{var a,t,n,g;let{icon:h,primaryText:f,secondaryText:x,addon:b,buttonText:y,source:v="upgrade",disabled:_=!1}=e,{data:j}=(0,d.YA)(),{data:w}=(0,l.s)(),I=null==w||null==(a=w.plan)?void 0:a.id,A=(0,i.SE)(r.aG.BILLING_WRITE,"stripe.subscriptions"),N=(0,c._P)("disableProjectCreationAndUpdate");return(0,s.jsx)("div",{className:(0,u.cn)("block w-full rounded border border-opacity-20 py-4 px-6","border-overlay bg-surface-200"),"data-sentry-component":"UpgradeToPro","data-sentry-source-file":"UpgradeToPro.tsx",children:(0,s.jsxs)("div",{className:"flex gap-x-3",children:[h&&(0,s.jsx)("div",{className:"mt-1",children:h}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row w-full md:items-center justify-between gap-4 md:gap-x-8",children:[(0,s.jsxs)("div",{className:"space-y-1 flex-1 max-w-2xl",children:[(0,s.jsx)("p",{className:"text-sm",children:f}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:x})})]}),!A||N?(0,s.jsx)(m.G,{disabled:!0,type:"primary",tooltip:{content:{side:"bottom",text:N?"Subscription changes are currently disabled, our engineers are working on a fix":A?void 0:"You need additional permissions to amend subscriptions"}},children:y||("free"===I?"Upgrade to Pro":"Enable add on")}):(0,s.jsx)(p.$,{asChild:!0,type:"primary",disabled:!A||N||_,children:(0,s.jsx)(o(),{href:"free"===I?"/org/".concat(null!=(t=null==w?void 0:w.slug)?t:"_","/billing?panel=subscriptionPlan&source=").concat(v):null==b?"/org/".concat(null!=(n=null==w?void 0:w.slug)?n:"_","/billing?panel=costControl&source=").concat(v):"/project/".concat(null!=(g=null==j?void 0:j.ref)?g:"_","/settings/addons?panel=").concat(b,"&source=").concat(v),children:y||("free"===I?"Upgrade to Pro":"Enable add on")})})]})]})})}},70783:(e,a,t)=>{t.d(a,{R:()=>s});let s={oauthApps:e=>[e,"oauth-apps"],authorizedApps:e=>[e,"authorized-apps"]}},74567:(e,a,t)=>{t.d(a,{N:()=>d});var s=t(32144),r=t(80251),n=t(73969),o=t(65172),i=t(36366);async function l(e){let{slug:a,name:t,billing_email:s,opt_in_tags:r,additional_billing_emails:n}=e,i={};t&&(i.name=t),s&&(i.billing_email=s),r&&(i.opt_in_tags=r),n&&(i.additional_billing_emails=n);let{data:l,error:d}=await (0,o.F6)("/platform/organizations/{slug}",{params:{path:{slug:a}},body:i});return d&&(0,o.H4)(d),l}let d=function(){let{onSuccess:e,onError:a,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,s.jE)();return(0,r.n)(e=>l(e),{async onSuccess(a,t,s){o.setQueriesData({queryKey:i.O.list(),exact:!0},e=>e?e.map(e=>e.slug!==t.slug?e:{...e,name:t.name||e.name,billing_email:t.billing_email||e.billing_email,opt_in_tags:t.opt_in_tags||e.opt_in_tags}):e),o.setQueriesData({queryKey:i.O.customerProfile(a.slug),exact:!0},e=>e?{...e,additional_emails:t.additional_billing_emails||e.additional_emails}:e),o.setQueriesData({queryKey:i.O.detail(a.slug),exact:!0},e=>e?{...e,name:t.name||e.name,billing_email:t.billing_email||e.billing_email,opt_in_tags:t.opt_in_tags||e.opt_in_tags}:e),await (null==e?void 0:e(a,t,s))},async onError(e,t,s){void 0===a?n.oR.error("Failed to update organization: ".concat(e.message)):a(e,t,s)},...t})}},87172:(e,a,t)=>{t.d(a,{G:()=>b});var s=t(32981),r=t(60045),n=t(32144),o=t(87494),i=t(73969),l=t(10663),d=t(80535),c=t(74567),u=t(84831),p=t(75019),m=t(65303),g=t(15961),h=t(23385),f=t(63492);let x=l.Ik({aiOptInLevel:l.k5(["disabled","schema","schema_and_log","schema_and_log_and_data"],{required_error:"AI Opt-in level selection is required"})}),b=e=>{let a=(0,n.jE)(),{data:t}=(0,h.s)(),l=(0,p.SE)(r.aG.UPDATE,"organizations"),[b,y]=(0,m.U)(d.rS.AI_ASSISTANT_MCP_OPT_IN,!1),{mutate:v,isLoading:_}=(0,c.N)();return{form:(0,o.mN)({resolver:(0,s.u)(x),defaultValues:{aiOptInLevel:(0,g.RO)(null==t?void 0:t.opt_in_tags)}}),onSubmit:async s=>{var r;if(!l)return i.oR.error("You do not have the required permissions to update this organization");if(!(null==t?void 0:t.slug))return console.error("Organization slug is required"),i.oR.error("Failed to update settings: Organization not found.");let n=(null!=(r=null==t?void 0:t.opt_in_tags)?r:[]).filter(e=>{var a,t;return e!==f.W2.AI_SQL&&e!==(null!=(a=f.W2.AI_DATA)?a:"AI_DATA")&&e!==(null!=(t=f.W2.AI_LOG)?t:"AI_LOG")});("schema"===s.aiOptInLevel||"schema_and_log"===s.aiOptInLevel||"schema_and_log_and_data"===s.aiOptInLevel)&&n.push(f.W2.AI_SQL),("schema_and_log"===s.aiOptInLevel||"schema_and_log_and_data"===s.aiOptInLevel)&&n.push(f.W2.AI_LOG),"schema_and_log_and_data"===s.aiOptInLevel&&n.push(f.W2.AI_DATA),n=[...new Set(n)],v({slug:t.slug,opt_in_tags:n},{onSuccess:()=>{(0,u.Ul)(a),i.oR.success("Successfully updated AI opt-in settings"),y(!0),null==e||e()},onError:e=>{i.oR.error("Failed to update settings: ".concat(e.message))}})},isUpdating:_,currentOptInLevel:(0,g.RO)(null==t?void 0:t.opt_in_tags)}}}}]);