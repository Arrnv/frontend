!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="acbd6d6c-b974-4af7-8f46-3b8f20f8c8fe",e._sentryDebugIdIdentifier="sentry-dbid-acbd6d6c-b974-4af7-8f46-3b8f20f8c8fe")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5216],{757:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(56947),s=n(65172),r=n(63492),o=n(92403);async function l(e,t){let{projectRef:n}=e;if(!n)throw Error("Project ref is required");let{data:a,error:r}=await (0,s.Jt)("/platform/projects/{ref}/config/supavisor",{params:{path:{ref:n}},signal:t});return r&&(0,s.H4)(r),a}let i=function(e){let{projectRef:t}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(o.c.poolingConfiguration(t),e=>{let{signal:n}=e;return l({projectRef:t},n)},{enabled:n&&void 0!==t&&r.pe,...s})}},1266:(e,t,n)=>{"use strict";n.d(t,{ol:()=>Z,Ev:()=>$,mV:()=>Y,Bx:()=>Q,Yv:()=>X});var a=n(80263),s=n(37055),r=n(88712),o=n(11021),l=n.n(o),i=n(75225),c=n(53346),d=n(15427),u=n(68095),p=n(99443),m=n(76679),f=n(61195),x=n(15601),h=n.n(x),g=n(24400),y=n(53239),b=n(80535),v=n(97420),j=n(96637),w=n(32137),N=n(32267),k=n(97175),S=n(60018),C=n(26367),_=n(90777),A=n(63492);let R=(e,t,n)=>{let s=(null==t?void 0:t.status)===A.BU.COMING_UP,r="/project/".concat(e);return[{key:"editor",label:"Table Editor",icon:(0,a.jsx)(_.Ue,{size:$,strokeWidth:Y}),link:e&&(s?r:"/project/".concat(e,"/editor")),linkElement:(0,a.jsx)(C.h,{projectRef:e})},{key:"sql",label:"SQL Editor",icon:(0,a.jsx)(_.mx,{size:$,strokeWidth:Y}),link:A.pe?e&&(s?r:"/project/".concat(e,"/sql")):"/project/".concat(e,"/sql/1")}]},I=(e,t,n)=>{var s,r,o,l;let i=(null==t?void 0:t.status)===A.BU.ACTIVE_HEALTHY,c=(null==t?void 0:t.status)===A.BU.COMING_UP,d="/project/".concat(e),u=null==(s=null==n?void 0:n.auth)||s,p=null==(r=null==n?void 0:n.edgeFunctions)||r,m=null==(o=null==n?void 0:n.storage)||o,f=null==(l=null==n?void 0:n.realtime)||l,x=(0,k.k)(t),h=(0,N.B)(e);return[{key:"database",label:"Database",icon:(0,a.jsx)(_.Wm,{size:$,strokeWidth:Y}),link:e&&(c?d:i?"/project/".concat(e,"/database/schemas"):"/project/".concat(e,"/database/backups/scheduled")),items:x},...u?[{key:"auth",label:"Authentication",icon:(0,a.jsx)(_.Nj,{size:$,strokeWidth:Y}),link:e&&(c?d:"/project/".concat(e,"/auth/users")),items:h}]:[],...m?[{key:"storage",label:"Storage",icon:(0,a.jsx)(_.wc,{size:$,strokeWidth:Y}),link:e&&(c?d:"/project/".concat(e,"/storage/buckets"))}]:[],...p?[{key:"functions",label:"Edge Functions",icon:(0,a.jsx)(_.n7,{size:$,strokeWidth:Y}),link:e&&(c?d:"/project/".concat(e,"/functions"))}]:[],...f?[{key:"realtime",label:"Realtime",icon:(0,a.jsx)(_.Se,{size:$,strokeWidth:Y}),link:e&&(c?d:"/project/".concat(e,"/realtime/inspector"))}]:[]]},P=(e,t,n)=>{let s=(null==t?void 0:t.status)===A.BU.COMING_UP,r="/project/".concat(e);return[{key:"advisors",label:"Advisors",icon:(0,a.jsx)(v.A,{size:$,strokeWidth:Y}),link:e&&(s?r:"/project/".concat(e,"/advisors/security"))},...A.pe?[{key:"reports",label:"Reports",icon:(0,a.jsx)(_.eM,{size:$,strokeWidth:Y}),link:e&&(s?r:"/project/".concat(e,"/reports"))}]:[],{key:"logs",label:"Logs",icon:(0,a.jsx)(j.A,{size:$,strokeWidth:Y}),link:e&&(s?r:"/project/".concat(e,"/logs"))},{key:"api",label:"API Docs",icon:(0,a.jsx)(w.A,{size:$,strokeWidth:Y}),link:e&&(s?r:"/project/".concat(e,"/api"))},{key:"integrations",label:"Integrations",icon:(0,a.jsx)(u.A,{size:$,strokeWidth:Y}),link:e&&(s?r:"/project/".concat(e,"/integrations"))}]},E=(e,t)=>{let n=(0,S.M)(e);return[...A.pe?[{key:"settings",label:"Project Settings",icon:(0,a.jsx)(f.A,{size:$,strokeWidth:Y}),link:e&&"/project/".concat(e,"/settings/general"),items:n}]:[]]};var L=n(95566),T=n(96383),D=n(97600),F=n(99127);let z=()=>{let{ref:e}=(0,b.g)(),{data:t}=(0,F.b)({projectRef:e}),n=(null!=t?t:[]).filter(e=>e.categories.includes("SECURITY")),a=n.filter(e=>"ERROR"===e.level);return{securityLints:n,errorLints:a}};var B=n(65303),M=n(23385),O=n(5483),U=n(37411),W=n(86177),q=n(71139),H=n(40022),G=n(51500),V=n(77635),K=n(72035);let $=32,Y=1.5,Z="expandable",J=(0,s.P)(W.Bx),Q=e=>{let{className:t,...n}=e,{setOpen:s}=(0,W.cL)(),o=function(){var e;let t=null!=(e=(0,T.usePathname)())?e:"";return t.startsWith("/account")||t.startsWith("/new")||"/support/new"===t||"/organizations"===t||"/sign-in"===t}(),[l,c]=(0,B.U)(b.rS.SIDEBAR_BEHAVIOR,Z);return(0,y.useEffect)(()=>{"open"===l&&s(!0),"closed"===l&&s(!1)},[l,s]),(0,a.jsx)(r.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"Sidebar","data-sentry-source-file":"Sidebar.tsx",children:!o&&(0,a.jsx)(J,{...n,transition:{delay:.4,duration:.4},overflowing:"expandable"===l,collapsible:"icon",variant:"sidebar",onMouseEnter:()=>{"expandable"===l&&s(!0)},onMouseLeave:()=>{"expandable"===l&&s(!1)},children:(0,a.jsx)(X,{footer:(0,a.jsxs)(q.rI,{children:[(0,a.jsx)(q.ty,{asChild:!0,children:(0,a.jsx)(H.$,{type:"text",className:"w-min px-1.5 mx-0.5 ".concat("open"===l?"!px-2":""),icon:(0,a.jsx)(i.A,{size:$,strokeWidth:Y})})}),(0,a.jsx)(q.SQ,{side:"top",align:"start",className:"w-40",children:(0,a.jsxs)(q.Hr,{value:l,onValueChange:e=>c(e),children:[(0,a.jsx)(q.lp,{children:"Sidebar control"}),(0,a.jsx)(q.mB,{}),(0,a.jsx)(q.Ht,{value:"open",children:"Expanded"}),(0,a.jsx)(q.Ht,{value:"closed",children:"Collapsed"}),(0,a.jsx)(q.Ht,{value:"expandable",children:"Expand on hover"})]})})]})})})})},X=e=>{let{footer:t}=e,{ref:n}=(0,b.g)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.N,{mode:"wait","data-sentry-element":"AnimatePresence","data-sentry-source-file":"Sidebar.tsx",children:(0,a.jsx)(W.Yv,{"data-sentry-element":"SidebarContentPrimitive","data-sentry-source-file":"Sidebar.tsx",children:n?(0,a.jsx)(s.P.div,{children:(0,a.jsx)(en,{})},"project-links"):(0,a.jsx)(s.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,ease:"easeOut"},children:(0,a.jsx)(ea,{})},"org-links")})}),(0,a.jsx)(W.CG,{"data-sentry-element":"SidebarFooter","data-sentry-source-file":"Sidebar.tsx",children:(0,a.jsx)(W.Cn,{className:"p-0","data-sentry-element":"SidebarGroup","data-sentry-source-file":"Sidebar.tsx",children:t})})]})};function ee(e){let{route:t,active:n,onClick:s,disabled:r,...o}=e,[l]=(0,B.U)(b.rS.SIDEBAR_BEHAVIOR,Z),i={disabled:r,tooltip:"closed"===l?t.label:"",isActive:n,className:(0,G.cn)("text-sm","open"===l?"!px-2":""),size:"default",onClick:s},c=o.children?o.children:(0,a.jsxs)(a.Fragment,{children:[t.icon,(0,a.jsx)("span",{children:t.label})]});return(0,a.jsx)(W.FX,{"data-sentry-element":"SidebarMenuItem","data-sentry-component":"SideBarNavLink","data-sentry-source-file":"Sidebar.tsx",children:t.link&&!r?(0,a.jsx)(W.Uj,{...i,asChild:!0,children:(0,a.jsx)(h(),{href:t.link,children:c})}):(0,a.jsx)(W.Uj,{...i,children:c})})}let et=(e,t)=>(0,a.jsx)("div",{className:(0,G.cn)("absolute pointer-events-none flex h-2 w-2 left-[18px] group-data-[state=expanded]:left-[20px] top-2 z-10 rounded-full",e.length>0?"bg-destructive-600":t.length>0?"bg-warning-600":"bg-transparent"),"data-sentry-component":"ActiveDot","data-sentry-source-file":"Sidebar.tsx"}),en=()=>{let e=(0,g.useRouter)(),{ref:t}=(0,b.g)(),{data:n}=(0,O.YA)(),s=(0,U.qM)(),r=(0,K.hx)(),{securityLints:o,errorLints:i}=z(),c=e.pathname.split("/")[3],{projectAuthAll:d,projectEdgeFunctionAll:u,projectStorageAll:p,realtimeAll:m}=(0,D.x)(["project_auth:all","project_edge_function:all","project_storage:all","realtime:all"]),f=R(t,n),x=I(t,n,{auth:d,edgeFunctions:u,storage:p,realtime:m}),h=P(t,n),y=E(t,n);return(0,a.jsxs)(W.wZ,{"data-sentry-element":"SidebarMenu","data-sentry-component":"ProjectLinks","data-sentry-source-file":"Sidebar.tsx",children:[(0,a.jsxs)(W.Cn,{className:"gap-0.5","data-sentry-element":"SidebarGroup","data-sentry-source-file":"Sidebar.tsx",children:[(0,a.jsx)(ee,{active:l()(c)&&!l()(e.query.ref),route:{key:"HOME",label:"Project overview",icon:(0,a.jsx)(_.ww,{size:$,strokeWidth:Y}),link:"/project/".concat(t),linkElement:(0,a.jsx)(L.L,{projectRef:t})},"data-sentry-element":"SideBarNavLink","data-sentry-source-file":"Sidebar.tsx"},"home"),f.map((e,t)=>(0,a.jsx)(ee,{route:e,active:c===e.key},"tools-routes-".concat(t)))]}),(0,a.jsx)(V.w,{className:"w-[calc(100%-1rem)] mx-auto","data-sentry-element":"Separator","data-sentry-source-file":"Sidebar.tsx"}),(0,a.jsx)(W.Cn,{className:"gap-0.5","data-sentry-element":"SidebarGroup","data-sentry-source-file":"Sidebar.tsx",children:x.map((e,t)=>(0,a.jsx)(ee,{route:e,active:c===e.key},"product-routes-".concat(t)))}),(0,a.jsx)(V.w,{className:"w-[calc(100%-1rem)] mx-auto","data-sentry-element":"Separator","data-sentry-source-file":"Sidebar.tsx"}),(0,a.jsx)(W.Cn,{className:"gap-0.5","data-sentry-element":"SidebarGroup","data-sentry-source-file":"Sidebar.tsx",children:h.map((e,t)=>"api"===e.key&&r?(0,a.jsx)(ee,{route:{label:e.label,icon:e.icon,key:e.key},onClick:()=>{s.setShowProjectApiDocs(!0)}},"other-routes-".concat(t)):"advisors"===e.key?(0,a.jsxs)("div",{className:"relative",children:[et(i,o),(0,a.jsx)(ee,{route:e,active:c===e.key},"other-routes-".concat(t))]},e.key):"logs"===e.key?(0,a.jsx)(ee,{route:e,active:c===e.key},"other-routes-".concat(t)):(0,a.jsx)(ee,{route:e,active:c===e.key},"other-routes-".concat(t)))}),(0,a.jsx)(W.Cn,{className:"gap-0.5","data-sentry-element":"SidebarGroup","data-sentry-source-file":"Sidebar.tsx",children:y.map((e,t)=>(0,a.jsx)(ee,{route:e,active:c===e.key},"settings-routes-".concat(t)))})]})},ea=()=>{let e=(0,g.useRouter)(),{slug:t}=(0,b.g)(),{data:n}=(0,M.s)(),s=(0,b.fG)(),r=(null==n?void 0:n.organization_requires_mfa)&&!s,o=e.pathname.split("/")[3],l=[{label:"Projects",href:"/org/".concat(t),key:"projects",icon:(0,a.jsx)(c.A,{size:$,strokeWidth:Y})},{label:"Team",href:"/org/".concat(t,"/team"),key:"team",icon:(0,a.jsx)(d.A,{size:$,strokeWidth:Y})},{label:"Integrations",href:"/org/".concat(t,"/integrations"),key:"integrations",icon:(0,a.jsx)(u.A,{size:$,strokeWidth:Y})},{label:"Usage",href:"/org/".concat(t,"/usage"),key:"usage",icon:(0,a.jsx)(p.A,{size:$,strokeWidth:Y})},{label:"Billing",href:"/org/".concat(t,"/billing"),key:"billing",icon:(0,a.jsx)(m.A,{size:$,strokeWidth:Y})},{label:"Organization settings",href:"/org/".concat(t,"/general"),key:"settings",icon:(0,a.jsx)(f.A,{size:$,strokeWidth:Y})}];return(0,a.jsx)(W.wZ,{className:"flex flex-col gap-1 items-start","data-sentry-element":"SidebarMenu","data-sentry-component":"OrganizationLinks","data-sentry-source-file":"Sidebar.tsx",children:(0,a.jsx)(W.Cn,{className:"gap-0.5","data-sentry-element":"SidebarGroup","data-sentry-source-file":"Sidebar.tsx",children:l.map((t,n)=>(0,a.jsx)(ee,{disabled:r,active:0===n?void 0===o:"settings"===t.key?e.pathname.includes("/general")||e.pathname.includes("/apps")||e.pathname.includes("/audit")||e.pathname.includes("/documents")||e.pathname.includes("/security"):o===t.key,route:{label:t.label,link:t.href,key:t.label,icon:t.icon}},t.key))})})}},3829:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(80263),s=n(34531),r=n(72463),o=n(53239),l=n(30789),i=n(59399),c=n(39271),d=n(53555);let u=(0,r.A)((e,t)=>({items:e,...t})),p=(0,o.memo)(e=>{let{data:t,index:n,style:s}=e,{items:r,itemProps:o,ItemComponent:l,listRef:i,LoaderComponent:c}=t,u=n<r.length?r[n]:void 0;return u?(0,a.jsx)("div",{style:s,children:(0,a.jsx)(l,{index:n,item:u,listRef:i,...o})}):void 0!==c?(0,a.jsx)("div",{style:s,children:c}):(0,a.jsx)("div",{className:"space-y-1 my-1",style:s,children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2",children:[(0,a.jsx)(d.E,{className:"h-4 w-5"}),(0,a.jsx)(d.E,{className:"w-40 h-4"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2",children:[(0,a.jsx)(d.E,{className:"h-4 w-5"}),(0,a.jsx)(d.E,{className:"w-32 h-4"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2 opacity-75",children:[(0,a.jsx)(d.E,{className:"h-4 w-5"}),(0,a.jsx)(d.E,{className:"w-20 h-4"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2 opacity-50",children:[(0,a.jsx)(d.E,{className:"h-4 w-5"}),(0,a.jsx)(d.E,{className:"w-40 h-4"})]}),(0,a.jsxs)("div",{className:"flex flex-row h-6 px-4 items-center gap-2 opacity-25",children:[(0,a.jsx)(d.E,{className:"h-4 w-5"}),(0,a.jsx)(d.E,{className:"w-20 h-4"})]})]})})},i.t7);p.displayName="Item";let m=(0,o.memo)(function(e){let{items:t=[],itemProps:n,hasNextPage:s=!1,isLoadingNextPage:r=!1,getItemSize:d=()=>40,onLoadNextPage:m=()=>{},ItemComponent:f=()=>null,LoaderComponent:x}=e,h=(0,o.useRef)(),g=r?()=>{}:m,y=e=>!s||e<t.length,b=s?t.length+1:t.length,v=u(t,{itemProps:n,ItemComponent:f,LoaderComponent:x,listRef:h});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)(l.Ay,{"data-sentry-element":"AutoSizer","data-sentry-source-file":"InfiniteList.tsx",children:e=>{let{height:t,width:n}=e;return(0,a.jsx)(c.A,{itemCount:b,isItemLoaded:y,loadMoreItems:g,children:e=>{let{onItemsRendered:s,ref:r}=e;return(0,a.jsx)(i._m,{ref:e=>{r(e),h.current=e},height:null!=t?t:0,width:null!=n?n:0,itemCount:b,itemData:v,itemSize:d,onItemsRendered:s,children:p})}})}})}),(0,a.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,pointerEvents:"none"}})]})},s.Pi)},6772:(e,t,n)=>{"use strict";n.d(t,{Jx:()=>d,Vh:()=>c,u5:()=>o,uJ:()=>l});var a=n(56947),s=n(65172),r=n(47620);let o=2,l=5;async function i(e,t){let{projectRef:n}=e;if(!n)throw Error("Project ref is required");let{data:a,error:r}=await (0,s.Jt)("/platform/projects/{ref}/databases",{params:{path:{ref:n}},signal:t});return r&&(0,s.H4)(r),a}let c=function(e){let{projectRef:t}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(r.p.list(t),e=>{let{signal:n}=e;return i({projectRef:t},n)},{enabled:n&&void 0!==t,...s})},d=e=>{let{projectRef:t}=e,{data:n=[],error:a,isLoading:s,isError:r,isSuccess:o}=c({projectRef:t});return{database:n.find(e=>e.identifier===t),error:a,isLoading:s,isError:r,isSuccess:o}}},7022:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(80263),s=n(53239),r=n(37034);let o=e=>{let{children:t,editor:n,id:a,beforeLineNumber:o,afterLineNumber:l=0,heightInLines:i=1}=e,c=null!=o?o:l,d="".concat(a,"-").concat(c.toString()),u=(0,s.useMemo)(()=>document.createElement("div"),[]),p=(0,s.useRef)(),m=(0,s.useRef)({top:0,height:0,heightInLines:i}),f="getModifiedEditor"in n?n.getModifiedEditor():n,x=()=>{let e=f.getLayoutInfo();e&&(u.style.left="".concat(e.contentLeft,"px"),u.style.top="".concat(m.current.top,"px"),u.style.width="".concat(e.width-e.contentLeft-20,"px"),u.style.height="".concat(m.current.height,"px"))},h=()=>{f.changeViewZones(e=>{p.current&&e.removeZone(p.current),p.current=e.addZone({afterLineNumber:null!=o?o:l,heightInLines:m.current.heightInLines,domNode:document.createElement("div"),onDomNodeTop:e=>{m.current.top=e,x()},onComputedHeight:e=>{m.current.height=e,x()}})})};return(0,s.useEffect)(()=>{let e={getId:()=>a,getDomNode:()=>u,getPosition:()=>null};return h(),f.addOverlayWidget(e),()=>{f.changeViewZones(t=>{p.current&&t.removeZone(p.current),f.removeOverlayWidget(e)})}},[f,a,o,l]),(0,s.useEffect)(()=>{i!==m.current.heightInLines&&(m.current.heightInLines=i,h())},[i]),(0,r.createPortal)(t,u,d)};var l=n(24030),i=n(40022);let c=e=>{let{value:t,onChange:n,onSubmit:r,onAccept:o,onReject:c,onCancel:d,isDiffVisible:u,isLoading:p=!1}=e,m=(0,s.useRef)(null);(0,s.useEffect)(()=>{setTimeout(()=>{var e,n;null==(e=m.current)||e.focus(),null==(n=m.current)||n.setSelectionRange(t.length,t.length)},100)},[]);let f=(0,s.useCallback)(()=>{t.trim()&&!p&&r(t)},[t,p,r]),x=(0,s.useCallback)(e=>{n(e.target.value)},[n]),h=(0,s.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||e.metaKey||e.ctrlKey||(e.preventDefault(),f())},[f]);return(0,a.jsxs)("div",{className:"overflow-hidden rounded-md p-0 bg-popover border border-foreground/20 focus-within:border-foreground/30 shadow-xl text-sm max-w-xl","data-sentry-component":"AskAIWidget","data-sentry-source-file":"AskAIWidget.tsx",children:[(0,a.jsx)(l.H,{ref:m,className:"bg-transparent border-0 outline-0 ring-0 ring-offset-0 focus:outline-0 focus:ring-0 focus:ring-offset-0 focus-visible:outline-0 focus-visible:ring-0 focus-visible:ring-offset-0 focus-within:outline-0 focus-within:ring-0 focus-within:ring-offset-0 shadow-none rounded-none gap-4 text-xs md:text-xs py-2 pl-3 !leading-[20px]",placeholder:u?"Make an edit...":"Edit via the Assistant...",value:t,onChange:x,onKeyDown:h,disabled:p,"data-sentry-element":"ExpandingTextArea","data-sentry-source-file":"AskAIWidget.tsx"}),u?(0,a.jsxs)("div",{className:"flex justify-start p-0 border-t",children:[(0,a.jsxs)(i.$,{type:"text",onClick:o,className:"text-xs h-auto py-1 rounded-none px-3 border-r-border",disabled:p,children:["Accept ",(0,a.jsx)("span",{className:"text-xs text-foreground-light",children:"⌘ + Enter"})]}),(0,a.jsxs)(i.$,{onClick:c,type:"text",className:"text-xs h-auto py-1 rounded-none px-3 border-r-border",disabled:p,children:["Reject ",(0,a.jsx)("span",{className:"text-xs text-foreground-light",children:"Esc"})]})]}):(0,a.jsxs)("div",{className:"flex justify-start p-0 border-t",children:[(0,a.jsxs)(i.$,{type:"text",onClick:f,loading:p,className:"text-xs h-auto py-1 rounded-none px-3 border-r-border",disabled:p,children:[p?"Generating...":"Generate"," ",!p&&(0,a.jsx)("span",{className:"text-xs text-foreground-light",children:"Enter"})]}),(0,a.jsxs)(i.$,{onClick:d,type:"text",className:"text-xs h-auto py-1 rounded-none px-3 border-r-border",disabled:p,children:["Cancel ",(0,a.jsx)("span",{className:"text-xs text-foreground-light",children:"Esc"})]})]})]})},d=e=>{let{editor:t,id:n,value:r,onChange:l,onSubmit:i,onAccept:d,onReject:u,onCancel:p,isDiffVisible:m,isLoading:f=!1,startLineNumber:x,endLineNumber:h}=e,g=(0,s.useRef)(null),[y,b]=(0,s.useState)(3),v=(0,s.useCallback)(()=>{g.current&&b(Math.max(3,Math.ceil(g.current.offsetHeight/20)))},[]);return(0,s.useEffect)(()=>{v();let e=new ResizeObserver(v);return g.current&&e.observe(g.current),()=>{e.disconnect()}},[v]),(0,a.jsx)(o,{editor:t,id:n,heightInLines:y,afterLineNumber:h,beforeLineNumber:Math.max(0,x-1),"data-sentry-element":"InlineWidget","data-sentry-component":"ResizableAIWidget","data-sentry-source-file":"ResizableAIWidget.tsx",children:(0,a.jsx)("div",{ref:g,children:(0,a.jsx)(c,{value:r,onChange:l,onSubmit:i,onAccept:d,onReject:u,onCancel:p,isDiffVisible:m,isLoading:f,"data-sentry-element":"AskAIWidget","data-sentry-source-file":"ResizableAIWidget.tsx"})})})}},7124:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});let a={orgSubscription:e=>["organizations",e,"subscription"],orgPlans:e=>["organizations",e,"plans"],addons:e=>["projects",e,"addons"]}},8082:(e,t,n)=>{"use strict";n.d(t,{GJ:()=>c,PG:()=>i,b_:()=>d,Wu:()=>u});var a=n(73969),s=n(65172),r=n(41734);n(58982),n(28140),n(85924),n(30784),n(35021),n(92403),n(63846),n(18111);var o=n(34531);let l=["count(","sum(","avg(","min(","max(","coalesce(","nullif(","current_timestamp","current_date","length(","lower(","upper(","trim(","substring(","to_char(","to_date(","extract(","date(","date_trunc(","string_agg(","in (","now(","left("],i=e=>{let t=e.toLowerCase().replaceAll("\n"," ");return t.includes("create function")||t.includes("create or replace function")?"functions":t.includes("create policy")||t.includes("alter policy")?"rls-policies":void 0},c=e=>(e.trim().toLowerCase().match(/\w+\s*\(/g)||[]).some(e=>!l.some(t=>e.trim().toLowerCase()===t)),d=e=>{let t=e.trim().toLowerCase();if(!t.startsWith("select"))return!1;let n=["created","inserted","updated","deleted","truncate"];return!(["insert","update","delete","alter","drop","create","replace"].some(e=>!n.some(n=>t.includes(n)&&n.includes(e))&&t.includes(e))||c(t))},u=e=>{let t=e?(0,o.Bl)(e.message):void 0;try{(0,s.H4)((null==t?void 0:t.error)||t||e)}catch(e){e instanceof r.o||e instanceof Error?a.oR.error(e.message):"string"==typeof e?a.oR.error(e):a.oR.error("An unknown error occurred")}}},9483:(e,t,n)=>{"use strict";n.d(t,{G:()=>c});var a=n(80251),s=n(73969),r=n(65172),o=n(63492),l=n(41734);async function i(e){let t,{sql:n}=e,a="".concat(o.o2,"/api/ai/sql/title-v2"),s=await (0,r.We)({"Content-Type":"application/json"}),i=await (0,r.x8)(a,{headers:s,method:"POST",body:JSON.stringify({sql:n})});try{t=await i.json()}catch(e){}if(!i.ok)throw new l.o(null==t?void 0:t.message,i.status);return t}let c=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.n)(e=>i(e),{async onSuccess(t,n,a){await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?s.oR.error("Failed to generate title: ".concat(e.message)):t(e,n,a)},...n})}},10306:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(80263),s=n(70856),r=n.n(s);let o=()=>(0,a.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center","data-sentry-component":"LogoLoader","data-sentry-source-file":"LogoLoader.tsx",children:(0,a.jsx)("div",{children:(0,a.jsx)("svg",{width:"60",height:"62",viewBox:"0 0 60 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r().loading,"data-sentry-element":"svg","data-sentry-source-file":"LogoLoader.tsx",children:(0,a.jsx)("path",{d:"M30.2571 4.12811L30.257 4.12389C30.2133 1.21067 26.5349 -0.034778 24.7224 2.24311L1.76109 31.0996C-1.21104 34.8348 1.45637 40.34 6.23131 40.34H29.4845L29.7563 58.4432C29.8 61.3564 33.4783 62.6016 35.2908 60.324L34.8996 60.0127L35.2908 60.324L58.2521 31.4674C61.2241 27.7322 58.5568 22.227 53.782 22.227H30.3762L30.2571 4.12811Z",stroke:"hsl(var(--brand-default))",strokeWidth:2,strokeLinecap:"round","data-sentry-element":"path","data-sentry-source-file":"LogoLoader.tsx"})})})})},12046:(e,t,n)=>{"use strict";n.d(t,{Lv:()=>v,mD:()=>w,wU:()=>N,aP:()=>j});var a=n(77796),s=n.n(a),r=n(60013),o=n.n(r),l=n(73969),i=n(56028),c=n(12532),d=n(79166),u=n(64722),p=n(2997),m=n(31759),f=n(65172);async function x(e,t){let{projectRef:n,id:a,name:s,parentId:r}=e,o={name:s};r&&(o.parentId=r);let{data:l,error:i}=await (0,f.F6)("/platform/projects/{ref}/content/folders/{id}",{params:{path:{ref:n,id:a}},body:o,signal:t});if(i)throw(0,f.H4)(i);return l}var h=n(9191),g=n(53239);let y="new-folder",b=(0,i.BX)({folders:{},snippets:{},results:{},needsSaving:(0,d.zC)([]),savingStates:{},limit:100,lastUpdatedFolderName:"",diffContent:void 0,get allFolderNames(){return Object.values(b.folders).map(e=>e.folder.name)},setDiffContent:(e,t)=>b.diffContent={sql:e,diffType:t},addSnippet:e=>{let{projectRef:t,snippet:n}=e;b.snippets[n.id]||(b.snippets[n.id]={projectRef:t,splitSizes:[50,50],snippet:n},b.results[n.id]=[],b.savingStates[n.id]="IDLE")},updateSnippet:e=>{let{id:t,snippet:n,skipSave:a=!1}=e;b.snippets[t]&&(b.snippets[t].snippet={...b.snippets[t].snippet,...n},a||b.needsSaving.set(t,!0))},setSnippet:(e,t)=>{let n=b.snippets[t.id];n?n.snippet.content||(n.snippet.content=t.content):b.addSnippet({projectRef:e,snippet:t})},setSql:(e,t)=>{var n;let a=null==(n=b.snippets[e])?void 0:n.snippet;(null==a?void 0:a.content)&&(a.content.sql=t,b.needsSaving.set(e,!1))},renameSnippet:e=>{var t;let{id:n,name:a,description:s}=e,r=null==(t=b.snippets[n])?void 0:t.snippet;r&&(r.name=a,r.description=s,b.needsSaving.set(n,!0))},removeSnippet:e=>{let{[e]:t,...n}=b.snippets;b.snippets=n;let{[e]:a,...s}=b.results;b.results=s,b.needsSaving.delete(e)},addFolder:e=>{let{projectRef:t,folder:n}=e;b.folders[n.id]||(b.folders[n.id]={projectRef:t,folder:n})},addNewFolder:e=>{let{projectRef:t}=e;b.folders[y]={projectRef:t,status:"editing",folder:{id:y,name:"",owner_id:-1,project_id:-1,parent_id:null}}},editFolder:e=>{b.folders[e].status="editing"},saveFolder:e=>{let{id:t,name:n}=e,a=b.folders[t],s="new-folder"===t,r=a.folder.name!==n;if(s&&b.allFolderNames.includes(n))return b.removeFolder(t),l.oR.error("Unable to create new folder: This folder name already exists");if(r&&b.allFolderNames.includes(n))return a.status="idle",l.oR.error("Unable to update folder: This folder name already exists");let o=a.folder.name.slice();a.status=r?"saving":"idle",a.folder.id=t,a.folder.name=n,r&&(b.lastUpdatedFolderName=o,b.needsSaving.set(t,!0))},removeFolder:e=>{let{[e]:t,...n}=b.folders;b.folders=n},setLimit:e=>b.limit=e,addNeedsSaving:e=>b.needsSaving.set(e,!0),addFavorite:e=>{let t=b.snippets[e];t&&(t.snippet.favorite=!0,b.needsSaving.set(e,!0))},removeFavorite:e=>{let t=b.snippets[e];t.snippet&&(t.snippet.favorite=!1,b.needsSaving.set(e,!0))},addResult:(e,t,n)=>{b.results[e]&&b.results[e].unshift({rows:t,autoLimit:n})},addResultError:(e,t,n)=>{b.results[e]&&b.results[e].unshift({rows:[],error:t,autoLimit:n})},resetResult:e=>{b.results[e]&&(b.results[e]=[])}}),v=()=>(0,i.P9)(b),j=e=>(0,c.s)(b,e),w=e=>{let t=j();return(0,g.useMemo)(()=>Object.values(t.folders).filter(t=>t.projectRef===e).map(e=>e.folder),[e,t.folders])},N=e=>{let t=j();return(0,g.useMemo)(()=>Object.values(t.snippets).filter(t=>t.projectRef===e).map(e=>e.snippet),[e,t.snippets])};async function k(e,t,n){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];try{var s;if(b.savingStates[e]="UPDATING",await (0,u.d)({projectRef:t,payload:n}),a){let e=(0,h.S)();await Promise.all([e.invalidateQueries(p.M.count(t,"sql")),e.invalidateQueries(p.M.sqlSnippets(t)),e.invalidateQueries(p.M.folders(t))])}let r=null==(s=b.snippets[e])?void 0:s.snippet;(null==r?void 0:r.content)&&(r.isNotSavedInDatabaseYet=!1),b.savingStates[e]="IDLE"}catch(t){b.savingStates[e]="UPDATING_FAILED"}}let S=o()(e=>s()(k,1e3)),C=function(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return S(e)(e,t,n,a)};async function _(e,t,n){try{if(e===y){let e=await (0,m.c)({projectRef:t,name:n});l.oR.success("Successfully created folder"),b.removeFolder(y),b.folders[e.id]={projectRef:t,status:"idle",folder:e}}else await x({projectRef:t,id:e,name:n}),l.oR.success("Successfully updated folder"),b.folders[e].status="idle"}catch(t){if(l.oR.error("Failed to save folder: ".concat(t.message)),t.message.includes("create"))b.removeFolder(e);else if(t.message.includes("update")&&b.lastUpdatedFolderName.length>0){let t=b.folders[e];t.status="idle",t.folder.name=b.lastUpdatedFolderName}}finally{b.lastUpdatedFolderName=""}}(0,d.lt)(b,{name:"sqlEditorStateV2",enabled:!0}),(0,i.B1)(b.needsSaving,()=>{let e=v();e.needsSaving.forEach((t,n)=>{let a=e.snippets[n],s=e.folders[n];if(a){let{name:e,description:s,visibility:r,project_id:o,owner_id:i,folder_id:c,content:d,favorite:u}=a.snippet;"project"===r&&c?l.oR.error("Shared snippet cannot be within a folder"):(C(n,a.projectRef,{id:n,type:"sql",name:null!=e?e:"Untitled",description:null!=s?s:"",visibility:null!=r?r:"user",project_id:null!=o?o:0,owner_id:i,folder_id:null!=c?c:void 0,content:{...d,content_id:n,favorite:null!=u&&u}},t),b.needsSaving.delete(n))}else s&&(_(n,s.projectRef,s.folder.name),b.needsSaving.delete(n))})})},12644:(e,t,n)=>{"use strict";n.d(t,{GS:()=>m,Z7:()=>x,ty:()=>h,u2:()=>f});var a=n(80263),s=n(79279),r=n(28881),o=n(95043),l=n(36272),i=n(34532),c=n(53239),d=n(61062),u=n(51500),p=n(93210);let m=d.Ay,f=(0,s.F)("group relative transition-colors h-[28px] flex items-center gap-3 text-sm cursor-pointer select-none text-foreground-light hover:bg-control aria-expanded:bg-transparent data-[state=open]:bg-transparent",{variants:{isSelected:{true:"text-foreground !bg-selection",false:""},isOpened:{true:"bg-control",false:""},isPreview:{true:"bg-control text-foreground",false:""}}}),x=(0,c.forwardRef)((e,t)=>{let{level:n=1,levelPadding:s=38,isExpanded:l=!1,isOpened:i=!1,isBranch:d=!1,isSelected:m=!1,isPreview:x=!1,isLoading:y=!1,xPadding:b=16,name:v="",icon:j,isEditing:w=!1,onEditSubmit:N,onDoubleClick:k,...S}=e,[C,_]=(0,c.useState)(v),A=(0,c.useRef)(null),R=(0,c.useRef)(0);(0,c.useEffect)(()=>{w?(R.current=Number(new Date),setTimeout(()=>{let e=A.current;e&&(document.activeElement!==e&&e.focus(),setTimeout(()=>{let t=e.value,n=t.lastIndexOf("."),a=n>0?n:t.length;try{e.setSelectionRange(0,a)}catch(e){console.error("Could not set selection range",e)}},50))},200)):_(v)},[w]),(0,c.useEffect)(()=>{y||_(v)},[y]);let{isDisabled:I,isHalfSelected:P,handleSelect:E,handleExpand:L,treeState:T,dispatch:D,...F}=S;return(0,a.jsxs)("div",{ref:t,...F,"aria-selected":m,"aria-expanded":!w&&l,onDoubleClick:k,className:(0,u.cn)(f({isSelected:m,isOpened:i,isPreview:x}),S.className),style:{paddingLeft:b+(n-1)*s/2,...S.style},"data-treeview-is-branch":d,"data-treeview-level":n,children:[Array.from({length:n-1}).map((e,t)=>(0,a.jsx)("div",{style:{left:b+t*s/2+7},className:"absolute h-full w-px bg-border-strong"},t)),m&&(0,a.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),d?(0,a.jsxs)(a.Fragment,{children:[y?(0,a.jsx)(r.A,{className:(0,u.cn)("text-foreground-muted animate-spin"),size:14}):(0,a.jsx)(o.A,{className:(0,u.cn)("text-foreground-muted","group-aria-selected:text-foreground-light","group-aria-expanded:text-foreground-light","transition-transform duration-200","group-aria-expanded:rotate-90"),size:14,strokeWidth:1.5}),(0,a.jsx)(g,{className:(0,u.cn)("transition-colors"," text-foreground-muted","group-aria-selected:text-foreground-light","group-aria-expanded:text-foreground-light"),isOpen:l,size:16,strokeWidth:1.5})]}):j||(0,a.jsx)(h,{className:(0,u.cn)("transition-colors","fill-foreground-muted","group-aria-selected:fill-foreground","w-5 h-5 shrink-0","-ml-0.5"),size:16,strokeWidth:1.5}),(0,a.jsx)("span",{className:(0,u.cn)(w&&"hidden","truncate text-sm"),title:v,children:v}),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),null==N||N(C)},className:(0,u.cn)(!w&&"hidden"),children:(0,a.jsx)(p.p,{autoFocus:!0,ref:A,onChange:e=>{_(e.target.value)},onBlur:e=>{if(Number(new Date)-R.current<400){var t;e.preventDefault(),null==(t=A.current)||t.focus()}else null==N||N(C)},onKeyDownCapture:e=>{if("Enter"===e.key){var t;null==(t=A.current)||t.blur()}else"Escape"===e.key?(_(v),null==N||N(v)):e.stopPropagation()},className:"block w-full text-sm px-2 py-1 h-7",value:C})})]})}),h=(0,c.forwardRef)((e,t)=>(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_1018_49117)",children:[(0,a.jsx)("path",{d:"M20.8457 14.4531V15.6348H17.8916V14.4531H20.8457ZM18.3311 8.52539V15.6348H16.9004V8.52539H18.3311Z"}),(0,a.jsx)("path",{d:"M13.6865 14.5508L15.3857 16.084L14.4873 16.9092L12.8271 15.376L13.6865 14.5508ZM15.3564 11.5283V12.6318C15.3564 13.1429 15.2962 13.5938 15.1758 13.9844C15.0553 14.3717 14.8812 14.6956 14.6533 14.9561C14.4255 15.2132 14.1553 15.4069 13.8428 15.5371C13.5303 15.6673 13.1836 15.7324 12.8027 15.7324C12.4219 15.7324 12.0736 15.6673 11.7578 15.5371C11.4453 15.4069 11.1751 15.2132 10.9473 14.9561C10.7227 14.6956 10.5469 14.3717 10.4199 13.9844C10.2962 13.5938 10.2344 13.1429 10.2344 12.6318V11.5283C10.2344 11.0173 10.2962 10.568 10.4199 10.1807C10.5436 9.79329 10.7178 9.47103 10.9424 9.21387C11.1702 8.95345 11.4404 8.75814 11.7529 8.62793C12.0654 8.49447 12.4121 8.42773 12.793 8.42773C13.1771 8.42773 13.5254 8.49447 13.8379 8.62793C14.1504 8.75814 14.4206 8.95345 14.6484 9.21387C14.8796 9.47103 15.0553 9.79329 15.1758 10.1807C15.2962 10.568 15.3564 11.0173 15.3564 11.5283ZM13.9307 12.6318V11.5186C13.9307 11.1833 13.9062 10.8952 13.8574 10.6543C13.8086 10.4134 13.7354 10.2165 13.6377 10.0635C13.5433 9.91048 13.4245 9.79818 13.2812 9.72656C13.1413 9.65495 12.9785 9.61914 12.793 9.61914C12.6107 9.61914 12.4479 9.65495 12.3047 9.72656C12.1647 9.79818 12.0475 9.91048 11.9531 10.0635C11.8587 10.2165 11.7855 10.4134 11.7334 10.6543C11.6846 10.8952 11.6602 11.1833 11.6602 11.5186V12.6318C11.6602 12.9704 11.6846 13.2601 11.7334 13.501C11.7822 13.7419 11.8538 13.9404 11.9482 14.0967C12.0459 14.2497 12.1647 14.3636 12.3047 14.4385C12.4479 14.5101 12.6139 14.5459 12.8027 14.5459C12.985 14.5459 13.1462 14.5101 13.2861 14.4385C13.4294 14.3636 13.5482 14.2497 13.6426 14.0967C13.7402 13.9437 13.8118 13.7467 13.8574 13.5059C13.9062 13.2617 13.9307 12.9704 13.9307 12.6318Z"}),(0,a.jsx)("path",{d:"M7.47266 13.7646C7.47266 13.6377 7.46126 13.5221 7.43848 13.418C7.41569 13.3138 7.36686 13.2178 7.29199 13.1299C7.22038 13.042 7.11458 12.9541 6.97461 12.8662C6.83789 12.7783 6.65885 12.6872 6.4375 12.5928C6.17383 12.4821 5.91829 12.3649 5.6709 12.2412C5.4235 12.1143 5.20052 11.9678 5.00195 11.8018C4.80339 11.6357 4.64551 11.4404 4.52832 11.2158C4.41439 10.988 4.35742 10.721 4.35742 10.415C4.35742 10.1156 4.41113 9.84375 4.51855 9.59961C4.62923 9.35547 4.78548 9.14714 4.9873 8.97461C5.18913 8.79883 5.42513 8.66374 5.69531 8.56934C5.96875 8.47493 6.27311 8.42773 6.6084 8.42773C7.06413 8.42773 7.45801 8.52214 7.79004 8.71094C8.12533 8.89974 8.38411 9.15853 8.56641 9.4873C8.75195 9.81608 8.84473 10.1937 8.84473 10.6201H7.41895C7.41895 10.4183 7.38965 10.2409 7.33105 10.0879C7.27572 9.93164 7.1862 9.80957 7.0625 9.72168C6.9388 9.63379 6.7793 9.58984 6.58398 9.58984C6.40169 9.58984 6.25033 9.62728 6.12988 9.70215C6.0127 9.77376 5.9248 9.87305 5.86621 10C5.81087 10.1237 5.7832 10.2637 5.7832 10.4199C5.7832 10.5371 5.81087 10.6429 5.86621 10.7373C5.9248 10.8285 6.00456 10.9115 6.10547 10.9863C6.20638 11.0579 6.3252 11.1279 6.46191 11.1963C6.60189 11.2646 6.75488 11.3314 6.9209 11.3965C7.24316 11.5234 7.52799 11.6634 7.77539 11.8164C8.02279 11.9661 8.22949 12.1354 8.39551 12.3242C8.56152 12.5098 8.68685 12.7197 8.77148 12.9541C8.85612 13.1885 8.89844 13.4554 8.89844 13.7549C8.89844 14.0511 8.84635 14.3213 8.74219 14.5654C8.64128 14.8063 8.49316 15.0146 8.29785 15.1904C8.10254 15.363 7.86654 15.4964 7.58984 15.5908C7.31641 15.6852 7.01042 15.7324 6.67188 15.7324C6.3431 15.7324 6.03223 15.6868 5.73926 15.5957C5.44629 15.5013 5.1875 15.3597 4.96289 15.1709C4.74154 14.9788 4.56738 14.7363 4.44043 14.4434C4.31348 14.1471 4.25 13.7972 4.25 13.3936H5.68066C5.68066 13.6084 5.70182 13.7923 5.74414 13.9453C5.78646 14.0951 5.85156 14.2155 5.93945 14.3066C6.02734 14.3945 6.13477 14.4613 6.26172 14.5068C6.39193 14.5492 6.54004 14.5703 6.70605 14.5703C6.89486 14.5703 7.0446 14.5345 7.15527 14.4629C7.26921 14.3913 7.35059 14.2952 7.39941 14.1748C7.44824 14.0544 7.47266 13.9176 7.47266 13.7646Z"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 5.73438H4.5C3.11929 5.73438 2 6.85366 2 8.23438V16.5039C2 17.8846 3.11929 19.0039 4.5 19.0039H20.5C21.8807 19.0039 23 17.8846 23 16.5039V8.23438C23 6.85366 21.8807 5.73438 20.5 5.73438ZM4.5 4.23438C2.29086 4.23438 0.5 6.02524 0.5 8.23438V16.5039C0.5 18.713 2.29086 20.5039 4.5 20.5039H20.5C22.7091 20.5039 24.5 18.713 24.5 16.5039V8.23438C24.5 6.02524 22.7091 4.23438 20.5 4.23438H4.5Z"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_1018_49117",children:(0,a.jsx)("rect",{width:"24",height:"24",transform:"translate(0.5 0.269531)"})})})]})),g=(0,c.forwardRef)((e,t)=>{let{isOpen:n,...s}=e,r=n?l.A:i.A;return(0,a.jsx)(r,{ref:t,...s})})},12803:(e,t,n)=>{"use strict";function a(e){return e?"object"==typeof e||Array.isArray(e)?JSON.stringify(e):e:""}n.d(t,{x:()=>a})},13001:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(80263),s=n(14360),r=n(57160),o=n(88712),l=n(37055),i=n(6218),c=n(53239),d=n(73969),u=n(65172),p=n(34531),m=n(7022);let f=e=>{let{language:t="javascript",value:n,defaultValue:f="",aiEndpoint:x,aiMetadata:h,initialPrompt:g,readOnly:y=!1,autoFocus:b=!1,className:v="",options:j={},onChange:w,onClose:N,executeQuery:k}=e,S=(0,p.UX)(),C=(0,c.useRef)(null),_=(0,c.useRef)(null),A=(0,c.useRef)(k);A.current=k;let[R,I]=(0,c.useState)(n||f),[P,E]=(0,c.useState)(!1),[L,T]=(0,c.useState)(!1),[D,F]=(0,c.useState)({original:"",modified:""}),[z,B]=(0,c.useState)({isOpen:!!g,selection:"",beforeSelection:"",afterSelection:"",startLineNumber:0,endLineNumber:0}),[M,O]=(0,c.useState)(g||""),{complete:U,completion:W,isLoading:q,setCompletion:H}=(0,r.sQ)({api:x||"",body:h,onError:e=>{d.oR.error("Failed to generate: ".concat(e.message))}}),G=(0,c.useCallback)(()=>{var e;H(""),E(!1),B(e=>({...e,isOpen:!1})),O(""),null==(e=C.current)||e.focus()},[H]),V=(0,c.useCallback)(()=>{if(D.modified){let e=D.modified;I(e),null==w||w(e),G()}},[D.modified,w,G]),K=async(e,n)=>{try{B(e=>({...e,selection:n.selection,beforeSelection:n.beforeSelection,afterSelection:n.afterSelection}));let a=(await (0,u.We)()).get("Authorization");await U(e,{...a?{headers:{Authorization:a}}:void 0,body:{...h,completionMetadata:{textBeforeCursor:n.beforeSelection,textAfterCursor:n.afterSelection,language:t,prompt:e,selection:n.selection}}})}catch(e){B(e=>({...e,isOpen:!1}))}},$={tabSize:2,fontSize:13,readOnly:y,minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!1,padding:{top:4},lineNumbersMinChars:3,...j};return(0,c.useEffect)(()=>{I(n||f)},[n,f]),(0,c.useEffect)(()=>{g&&(O(g),B({isOpen:!!g,selection:"",beforeSelection:"",afterSelection:"",startLineNumber:0,endLineNumber:0}))},[g]),(0,c.useEffect)(()=>{P||T(!1)},[P]),(0,c.useEffect)(()=>{if(!W)return void E(!1);F({original:z.beforeSelection+z.selection+z.afterSelection,modified:z.beforeSelection+W+z.afterSelection}),E(!0)},[W,z.beforeSelection,z.selection,z.afterSelection]),(0,c.useEffect)(()=>{let e=e=>{"Escape"===e.key?G():"Enter"===e.key&&("macos"===S?e.metaKey:e.ctrlKey)&&P&&(e.preventDefault(),V())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[S,P,V,G]),(0,a.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col h-full relative","data-sentry-component":"AIEditor","data-sentry-source-file":"index.tsx",children:P?(0,a.jsxs)("div",{className:"w-full h-full",children:[(0,a.jsx)(s.DiffEditor,{theme:"supabase",language:t,original:D.original,modified:D.modified,onMount:e=>{_.current=e,T(!0)},options:{...$,renderSideBySide:!1}}),L&&(0,a.jsx)(m.A,{editor:_.current,id:"ask-ai-diff",value:M,onChange:O,onSubmit:e=>{K(e,{beforeSelection:z.beforeSelection,selection:z.selection||D.modified,afterSelection:z.afterSelection})},onAccept:V,onReject:()=>{G()},onCancel:G,isDiffVisible:!0,isLoading:q,startLineNumber:Math.max(0,z.startLineNumber),endLineNumber:z.endLineNumber})]}):(0,a.jsxs)("div",{className:"w-full h-full relative",children:[(0,a.jsx)(s.default,{theme:"supabase",language:t,value:R,options:$,onChange:e=>{let t=e||"";I(t),null==w||w(t)},onMount:(e,t)=>{if(C.current=e,M){let t=e.getModel();if(t){let e=t.getLineCount();B({isOpen:!0,selection:t.getValue(),beforeSelection:"",afterSelection:"",startLineNumber:1,endLineNumber:e})}}fetch("".concat("/dashboard","/deno/lib.deno.d.ts")).then(e=>e.text()).then(e=>{t.languages.typescript.typescriptDefaults.addExtraLib(e)}),fetch("".concat("/dashboard","/deno/edge-runtime.d.ts")).then(e=>e.text()).then(e=>{t.languages.typescript.typescriptDefaults.addExtraLib(e)}),A.current&&e.addAction({id:"run-query",label:"Run Query",keybindings:[t.KeyMod.CtrlCmd+t.KeyCode.Enter],contextMenuGroupId:"operation",contextMenuOrder:0,run:()=>{var e;return null==(e=A.current)?void 0:e.call(A)}}),N&&e.addAction({id:"close-editor",label:"Close editor",keybindings:[t.KeyMod.CtrlCmd+t.KeyCode.KeyE],contextMenuGroupId:"operation",contextMenuOrder:0,run:()=>N()}),e.addAction({id:"generate-ai",label:"Generate with AI",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KeyK],run:()=>{var t,n;let a=e.getSelection(),s=e.getModel();if(!s||!a)return;let r=s.getLinesContent(),o=a.startLineNumber-1,l=a.endLineNumber,i=r.slice(0,o).join("\n")+"\n";B({isOpen:!0,selection:r.slice(o,l).join("\n"),beforeSelection:i,afterSelection:"\n"+r.slice(l).join("\n"),startLineNumber:null!=(t=null==a?void 0:a.startLineNumber)?t:0,endLineNumber:null!=(n=null==a?void 0:a.endLineNumber)?n:0})}}),b&&(1===e.getValue().length&&e.setPosition({lineNumber:1,column:2}),e.focus())},className:v}),z.isOpen&&C.current&&(0,a.jsx)(m.A,{editor:C.current,id:"ask-ai",value:M,onChange:O,onSubmit:e=>{K(e,{beforeSelection:z.beforeSelection,selection:z.selection,afterSelection:z.afterSelection})},onCancel:G,isDiffVisible:!1,isLoading:q,startLineNumber:Math.max(0,z.startLineNumber),endLineNumber:z.endLineNumber}),(0,a.jsx)(o.N,{children:!z.isOpen&&!R&&x&&(0,a.jsxs)(l.P.p,{initial:{y:5,opacity:0},animate:{y:0,opacity:1},exit:{y:5,opacity:0},className:"text-foreground-lighter absolute bottom-4 left-4 z-10 font-mono text-xs flex items-center gap-1",children:["Hit ","macos"===S?(0,a.jsx)(i.A,{size:12}):"CTRL+","K to edit with the Assistant"]})})]})})}},15052:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});let a={cliReleaseVersion:()=>["cliReleaseVersion"],defaultRegion:(e,t)=>["defaultRegion",[e,t]],ipAddress:()=>["ip-address"]}},16265:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var a=n(80263),s=n(83927),r=n.n(s),o=n(28881),l=n(72259),i=n(80903),c=n(3689),d=n(15601),u=n.n(d),p=n(24400),m=n(32466),f=n(53239),x=n(80535),h=n(58696),g=n(78358),y=n(6772),b=n(61662),v=n(63492),j=n(54474),w=n(9681),N=n(40022),k=n(51500),S=n(61965),C=n(80016),_=n(78721);let A=e=>{var t;let{selectedDatabaseId:n,variant:s="regular",additionalOptions:d=[],onSelectId:A=r(),buttonProps:R,onCreateReplicaClick:I=r(),portal:P=!0}=e,E=(0,p.useRouter)(),{ref:L}=(0,x.g)(),[T,D]=(0,f.useState)(!1),[,F]=(0,m.ZA)("showConnect",m.cr.withDefault(!1)),z=(0,j.RE)(),B=null!=n?n:z.selectedDatabaseId,{data:M,isLoading:O,isSuccess:U}=(0,y.Vh)({projectRef:L}),W=null!=M?M:[],q=W.sort((e,t)=>+(e.inserted_at>t.inserted_at)).sort(e=>e.identifier===L?-1:0),H=W.find(e=>e.identifier===B),G=(0,b.x)(null!=(t=null==H?void 0:H.region)?t:""),V=(0,b.s)(null!=B?B:""),K=d.find(e=>e.id===B);return(0,f.useEffect)(()=>{n&&z.setSelectedDatabaseId(n)},[n]),(0,a.jsxs)(w.AM,{open:T,onOpenChange:D,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"DatabaseSelector","data-sentry-source-file":"DatabaseSelector.tsx",children:[(0,a.jsx)(w.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"DatabaseSelector.tsx",children:(0,a.jsxs)("div",{className:"flex cursor-pointer",children:[(0,a.jsx)("span",{className:"flex items-center text-foreground-lighter px-3 rounded-lg rounded-r-none text-xs border border-button border-r-0",children:"Source"}),(0,a.jsx)(N.$,{type:"default",icon:O&&(0,a.jsx)(o.A,{className:"animate-spin"}),iconRight:(0,a.jsx)(l.A,{strokeWidth:1.5,size:12}),...R,className:(0,k.cn)("pr-2 rounded-l-none","connected-on-right"===s&&"rounded-r-none","connected-on-left"===s&&"rounded-l-none border-l-0","connected-on-both"===s&&"rounded-none border-x-0",null==R?void 0:R.className),"data-sentry-element":"Button","data-sentry-source-file":"DatabaseSelector.tsx",children:K?(0,a.jsx)("span",{children:K.name}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"capitalize",children:O||(null==H?void 0:H.identifier)===L?"Primary database":"Read replica"})," ",U&&(null==H?void 0:H.identifier)!==L&&(0,a.jsxs)("span",{children:["(",G," - ",V,")"]})]})})]})}),(0,a.jsx)(w.hl,{className:"p-0 w-64",side:"bottom",align:"end",portal:P,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"DatabaseSelector.tsx",children:(0,a.jsx)(S.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"DatabaseSelector.tsx",children:(0,a.jsxs)(S.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"DatabaseSelector.tsx",children:[d.length>0&&(0,a.jsx)(S.L$,{className:"border-b",children:d.map(e=>(0,a.jsx)(S.h_,{value:e.id,className:"cursor-pointer w-full",onSelect:()=>{z.setSelectedDatabaseId(e.id),D(!1),A(e.id)},onClick:()=>{z.setSelectedDatabaseId(e.id),D(!1),A(e.id)},children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,a.jsx)("p",{children:e.name}),e.id===B&&(0,a.jsx)(i.A,{size:14})]})},e.id))}),(0,a.jsx)(S.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"DatabaseSelector.tsx",children:(0,a.jsx)(C.FK,{className:(W||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"DatabaseSelector.tsx",children:null==q?void 0:q.map(e=>{let t=(0,b.x)(e.region),n=(0,b.s)(e.identifier);if("ACTIVE_HEALTHY"!==e.status){let s=[g.O5.INIT_READ_REPLICA,g.O5.COMING_UP].includes(e.status)?"coming up":"not healthy";return(0,a.jsxs)(_.m_,{children:[(0,a.jsx)(_.k$,{asChild:!0,children:(0,a.jsx)("div",{className:"px-2 py-1.5 w-full flex items-center justify-between",children:(0,a.jsxs)("p",{className:"text-xs text-foreground-lighter",children:["Read replica (",t," - ",n,")"]})})}),(0,a.jsx)(_.ZI,{side:"right",className:"w-80",children:(0,a.jsx)(h.o,{className:"text-xs text-foreground",content:"Replica unable to accept requests as its ".concat(s,". [View infrastructure settings](/project/").concat(L,"/settings/infrastructure) for more information.")})})]},e.identifier)}return(0,a.jsx)(S.h_,{value:e.identifier,className:"cursor-pointer w-full",onSelect:()=>{z.setSelectedDatabaseId(e.identifier),D(!1),A(e.identifier)},onClick:()=>{z.setSelectedDatabaseId(e.identifier),D(!1),A(e.identifier)},children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,a.jsx)("p",{children:e.identifier===L?"Primary database":"Read replica (".concat(t," - ").concat(n,")")}),e.identifier===B&&(0,a.jsx)(i.A,{size:16})]})},e.identifier)})})}),v.pe&&(0,a.jsx)(S.L$,{className:"border-t",children:(0,a.jsx)(S.h_,{className:"cursor-pointer w-full",onSelect:()=>{D(!1),E.push("/project/".concat(L,"/settings/infrastructure"))},onClick:()=>D(!1),children:(0,a.jsxs)(u(),{href:"/project/".concat(L,"/settings/infrastructure"),onClick:()=>{D(!1),F(null),null==I||I()},className:"w-full flex items-center gap-2",children:[(0,a.jsx)(c.A,{size:14,strokeWidth:1.5}),(0,a.jsx)("p",{children:"Create a new read replica"})]})})})]})})})]})}},17373:(e,t,n)=>{"use strict";n.d(t,{Hy:()=>o,T_:()=>a,XW:()=>s,od:()=>r});let a=100,s="supabase_grid",r="supabase-grid-select-row",o="supabase-grid-add-column"},17761:(e,t,n)=>{"use strict";n.d(t,{Ip:()=>p,K5:()=>f,Rc:()=>u,kt:()=>m,tz:()=>d});var a=n(80263),s=n(63895),r=n(95043),o=n(80903),l=n(25757),i=n(53239),c=n(51500);let d=s.bL,u=s.l9;s.YJ,s.ZL,s.Pb,s.z6,i.forwardRef((e,t)=>{let{className:n,inset:o,children:l,...i}=e;return(0,a.jsxs)(s.ZP,{ref:t,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-xs outline-none focus:bg-selection focus:text-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",o&&"pl-8",n),...i,children:[l,(0,a.jsx)(r.A,{className:"ml-auto h-4 w-4"})]})}).displayName=s.ZP.displayName,i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.G5,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-overlay p-1 text-foreground-light shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})}).displayName=s.G5.displayName;let p=i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.ZL,{children:(0,a.jsx)(s.UC,{ref:t,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-overlay p-1 text-foreground-light shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})})});p.displayName=s.UC.displayName;let m=i.forwardRef((e,t)=>{let{className:n,inset:r,...o}=e;return(0,a.jsx)(s.q7,{ref:t,className:(0,c.cn)("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-xs outline-none focus:bg-selection focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",n),...o})});m.displayName=s.q7.displayName,i.forwardRef((e,t)=>{let{className:n,children:r,checked:l,...i}=e;return(0,a.jsxs)(s.H_,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-xs outline-none focus:bg-selection focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:l,...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.VF,{children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),r]})}).displayName=s.H_.displayName,i.forwardRef((e,t)=>{let{className:n,children:r,...o}=e;return(0,a.jsxs)(s.hN,{ref:t,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-xs outline-none focus:bg-selection focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.VF,{children:(0,a.jsx)(l.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=s.hN.displayName,i.forwardRef((e,t)=>{let{className:n,inset:r,...o}=e;return(0,a.jsx)(s.JU,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-xs text-foreground-light",r&&"pl-8",n),...o})}).displayName=s.JU.displayName;let f=i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.wv,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-border",n),...r})});f.displayName=s.wv.displayName},20313:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var a=n(80263),s=n(15601),r=n.n(s),o=n(1012),l=n(86254),i=n(40022);let c=e=>{var t;let{projectRef:n,subject:s,error:c,className:d,showIcon:u=!0,children:p}=e,m=null==s?void 0:s.replace(/ /g,"%20"),f="/support/new?category=dashboard_bug";n&&(f+="&ref=".concat(n)),m&&(f+="&subject=".concat(m)),c&&(f+="&error=".concat(c.message));let x=(null==c||null==(t=c.message)?void 0:t.includes("503"))?"503 Service Temporarily Unavailable":null==c?void 0:c.message;return(0,a.jsxs)(o.Fc,{className:d,variant:"warning",title:s,"data-sentry-element":"Alert_Shadcn_","data-sentry-component":"AlertError","data-sentry-source-file":"AlertError.tsx",children:[u&&(0,a.jsx)(l.id,{className:"h-4 w-4",strokeWidth:2}),(0,a.jsx)(o.XL,{className:"text-foreground","data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"AlertError.tsx",children:s}),(0,a.jsxs)(o.TN,{className:"flex flex-col gap-3 break-words","data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"AlertError.tsx",children:[(0,a.jsxs)("div",{children:[(null==c?void 0:c.message)&&(0,a.jsxs)("p",{className:"text-left",children:["Error: ",x]}),(0,a.jsx)("p",{className:"text-left",children:"Try refreshing your browser, but if the issue persists for more than a few minutes, please reach out to us via support."})]}),p,(0,a.jsx)(i.$,{asChild:!0,type:"warning",className:"w-min","data-sentry-element":"Button","data-sentry-source-file":"AlertError.tsx",children:(0,a.jsx)(r(),{href:f,"data-sentry-element":"Link","data-sentry-source-file":"AlertError.tsx",children:"Contact support"})})]})]})}},20438:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var a=n(56947),s=n(65172),r=n(63492),o=n(7124);async function l(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{error:a,data:r}=await (0,s.Jt)("/platform/projects/{ref}/billing/addons",{params:{path:{ref:n}},signal:t});return a&&(0,s.H4)(a),r}let i=function(e){let{projectRef:t}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(o.s.addons(t),e=>{let{signal:n}=e;return l({projectRef:t},n)},{enabled:n&&r.pe&&void 0!==t,staleTime:36e5,...s})}},23748:(e,t,n)=>{"use strict";n.d(t,{kD:()=>i,o2:()=>c});var a=n(17702),s=n(15629),r=n(85265),o=n(58537);async function l(e,t){let{projectRef:n,connectionString:a,schemas:o=["public"],search:l,limit:i=100,page:c=0,sort:d="alphabetical",filterTypes:u=Object.values(r.z)}=e,p='\n    with records as (\n      select\n        c.oid::int8 as "id",\n        nc.nspname as "schema",\n        c.relname as "name",\n        c.relkind as "type",\n        case c.relkind\n          when \'r\' then 1\n          when \'v\' then 2\n          when \'m\' then 3\n          when \'f\' then 4\n          when \'p\' then 5\n        end as "type_sort",\n        obj_description(c.oid) as "comment",\n        count(*) over() as "count",\n        c.relrowsecurity as "rls_enabled"\n      from\n        pg_namespace nc\n        join pg_class c on nc.oid = c.relnamespace\n      where\n        c.relkind in ('.concat(u.map(e=>"'".concat(e,"'")).join(", "),")\n        and not pg_is_other_temp_schema(nc.oid)\n        and (\n          pg_has_role(c.relowner, 'USAGE')\n          or has_table_privilege(\n            c.oid,\n            'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'\n          )\n          or has_any_column_privilege(c.oid, 'SELECT, INSERT, UPDATE, REFERENCES')\n        )\n        and nc.nspname in (").concat(o.map(e=>"'".concat(e,"'")),")\n        ").concat(l?"and c.relname ilike '%".concat(l,"%'"):"","\n      order by ").concat("alphabetical"===d?"c.relname asc":'"type_sort" asc, c.relname asc',"\n      limit ").concat(i,"\n      offset ").concat(c*i,"\n    )\n    select\n      jsonb_build_object(\n        'entities', coalesce(jsonb_agg(\n          jsonb_build_object(\n            'id', r.id,\n            'schema', r.schema,\n            'name', r.name,\n            'type', r.type,\n            'comment', r.comment,\n            'rls_enabled', r.rls_enabled\n          )\n          order by ").concat("alphabetical"===d?"r.name asc":"r.type_sort asc, r.name asc","\n        ), '[]'::jsonb),\n        'count', coalesce(min(r.count), 0)\n      ) \"data\"\n    from records r;\n  "),{result:m}=await (0,s.E)({projectRef:n,connectionString:a,sql:p,queryKey:["entity-types",...o,c]},t);return m[0]}let i=function(e){let{projectRef:t,connectionString:n,schemas:s=["public"],search:r,limit:i=100,sort:c,filterTypes:d}=e,{enabled:u=!0,...p}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.q)(o.C.list(t,{schemas:s,search:r,sort:c,limit:i,filterTypes:d}),e=>{let{signal:a,pageParam:o}=e;return l({projectRef:t,connectionString:n,schemas:s,search:r,limit:i,page:o,sort:c,filterTypes:d},a)},{enabled:u&&void 0!==t,getNextPageParam(e,t){let n=t.length;if(!(n*i>=e.data.count))return n},...p})};function c(e,t){let{projectRef:n,connectionString:a,schemas:s=["public"],search:r,limit:i=100,sort:c,filterTypes:d}=t;return e.prefetchInfiniteQuery(o.C.list(n,{schemas:s,search:r,sort:c,limit:i,filterTypes:d}),e=>{let{signal:t,pageParam:o}=e;return l({projectRef:n,connectionString:a,schemas:s,search:r,limit:i,page:o,sort:c,filterTypes:d},t)})}},24030:(e,t,n)=>{"use strict";n.d(t,{H:()=>l});var a=n(80263),s=n(53239),r=n(51500),o=n(73815);let l=(0,s.forwardRef)((e,t)=>{let{className:n,value:l,...i}=e,c=(0,s.useRef)(null);(0,s.useImperativeHandle)(t,()=>c.current,[]);let d=e=>{e&&(l?(e.style.height="auto",e.style.height=e.scrollHeight+"px"):(e.style.height="auto",e.style.minHeight="36px"))};return(0,a.jsx)(o.f,{ref:e=>{e&&(c.current=e,d(e))},rows:1,"aria-expanded":!1,className:(0,r.cn)("h-auto resize-none box-border",n),value:l,...i})});l.displayName="ExpandingTextArea"},24447:(e,t,n)=>{"use strict";n.d(t,{PE:()=>u,Rd:()=>x,Uh:()=>p,Ym:()=>c,fU:()=>d,iN:()=>m,ok:()=>i});var a=n(73969),s=n(66188),r=n(52647),o=n(62173),l=n(52308);let i=".emptyFolderPlaceholder",c=(e,t)=>{let n=e.slice(0,t.columnIndex).map(e=>e.name),s=n.length>0?"".concat(n.join("/"),"/").concat(t.name):t.name;(0,r.l)(s),a.oR.success('Copied path to folder "'.concat(t.name,'"'))},d=e=>{let t=Math.floor(e/86400),n=Math.floor((e%=86400)/3600),a=Math.floor((e%=3600)/60);return(e=Math.floor(e%60),t>0)?"".concat(t,"d "):n>0?"".concat(n,"h "):a>0?"".concat(a,"m "):"".concat(e,"s")},u=async e=>{var t,n,r;let{projectRef:l,bucketId:i,file:c,showToast:d=!0,returnBlob:u=!1}=e;if(!l)return a.oR.error("Failed to download: Project ref is required");if(!i)return a.oR.error("Failed to download: Bucket ID is required");if(!c.path)return a.oR.error("Failed to download: Unable to find path to file");let p=c.name,m=null!=(n=null==c||null==(t=c.metadata)?void 0:t.mimetype)?n:void 0,f=d?a.oR.loading("Retrieving ".concat(p,"...")):void 0;try{let e=await (0,s.c)({projectRef:l,bucketId:i,path:c.path}),t=await e.blob(),n=new Blob([t],{type:m});if(u)return{name:p,blob:n};let d=window.URL.createObjectURL(n),x=document.createElement("a");return x.href=d,x.setAttribute("download","".concat(p)),document.body.appendChild(x),x.click(),null==(r=x.parentNode)||r.removeChild(x),window.URL.revokeObjectURL(t),f&&a.oR.success("Downloading ".concat(p),{id:f,closeButton:!0,duration:o.j}),!0}catch(e){return f&&a.oR.error("Failed to download ".concat(p),{id:f,closeButton:!0,duration:o.j}),!1}},p=e=>{let t=0,n=0;return e.forEach(e=>{if(0===(n+=e.remainingBytes))return;let a=e.remainingBytes/n;t+=a*e.remainingTime}),t},m=function(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return null!=(t=null==(e=null!=n?n:[])?void 0:e.filter(e=>e.name!==i).map(e=>{let t=e.id?l.Vl.FILE:l.Vl.FOLDER,n=Number(new Date)-Number(new Date(e.created_at)),s=t===l.Vl.FILE&&!e.metadata&&n>=9e5,r=t===l.Vl.FILE&&!e.metadata&&n<=9e5?l.U1.LOADING:l.U1.READY;return{...e,metadata:e.metadata,type:t,status:r,isCorrupted:s,path:a?"".concat(a,"/").concat(e.name):e.name}}))?t:[]},f=async e=>{try{return await new Promise((t,n)=>e.file(t,n))}catch(e){console.error("getFile error:",e);return}},x=async e=>{let t=(0,a.oR)("Retrieving items to upload..."),n=[],s=[];for(let t of e){let e=t.webkitGetAsEntry();e&&s.push(e)}for(;s.length>0;){let e=s.shift();if(e&&e.isFile){let t=await f(e);void 0!==t&&(t.path=e.fullPath.slice(1),n.push(t))}else e&&e.isDirectory&&s.push(...await h(e.createReader()))}return a.oR.dismiss(t),n},h=async e=>{let t=[],n=await g(e);for(;n&&n.length>0;)t.push(...n),n=await g(e);return t},g=async e=>{try{return await new Promise((t,n)=>{e.readEntries(t,n)})}catch(e){console.error("readEntriesPromise error:",e)}}},26367:(e,t,n)=>{"use strict";n.d(t,{h:()=>m});var a=n(80263),s=n(32144),r=n(24400),o=n(53239),l=n(63604),i=n(85265),c=n(23748),d=n(65303),u=n(5483),p=n(44187);function m(e){let{href:t,projectRef:n,children:m,...f}=e,x=function(){let e=(0,r.useRouter)(),t=(0,s.jE)(),{data:n}=(0,u.YA)(),[a]=(0,d.M)("table-editor-sort","alphabetical");return(0,o.useCallback)(()=>{n&&(e.prefetch("/project/".concat(n.ref,"/editor")),(0,l.KB)(t,{projectRef:n.ref,connectionString:n.connectionString}).catch(()=>{}),(0,c.o2)(t,{projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString,sort:a,filterTypes:Object.values(i.z)}).catch(()=>{}))},[a,n,t,e])}();return(0,a.jsx)(p.A,{href:t||"/project/".concat(n,"/editor"),prefetcher:x,...f,"data-sentry-element":"PrefetchableLink","data-sentry-component":"EditorIndexPageLink","data-sentry-source-file":"project.$ref.editor.tsx",children:m})}},28140:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});let a={list:e=>["projects",e,"database-extensions"]}},28979:(e,t,n)=>{"use strict";n.d(t,{Et:()=>c,d0:()=>i,jc:()=>l});var a=n(80263),s=n(72309),r=n(53239),o=n(51500);let l=s.bL,i=s.l9,c=r.forwardRef((e,t)=>{let{className:n,align:r="center",animate:l="zoom-in",sideOffset:i=4,...c}=e;return(0,a.jsx)(s.ZL,{children:(0,a.jsx)(s.UC,{ref:t,align:r,sideOffset:i,className:(0,o.cn)("z-50 w-64 rounded-md border bg-overlay p-4 text-popover-foreground shadow-md outline-none","zoom-in"===l?"animate-in zoom-in-[99%]":"animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",n),...c})})});c.displayName=s.UC.displayName},30784:(e,t,n)=>{"use strict";n.d(t,{S:()=>a});let a={list:(e,t)=>["projects",e,"database-policies",t].filter(Boolean)}},31492:(e,t,n)=>{"use strict";n.d(t,{X:()=>u});var a=n(80263),s=n(796),r=n(29257),o=n(53239),l=n(40022),i=n(51500),c=n(52647);!function(e){let t=[/\b(?:async|sync|yield)\*/,/\b(?:abstract|assert|async|await|break|case|catch|class|const|continue|covariant|default|deferred|do|dynamic|else|enum|export|extends|extension|external|factory|final|finally|for|get|hide|if|implements|import|in|interface|library|mixin|new|null|on|operator|part|rethrow|return|set|show|static|super|switch|sync|this|throw|try|typedef|var|void|while|with|yield)\b/],n=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,a={pattern:RegExp(n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}}}};e.languages.dart=e.languages.extend("clike",{"class-name":[a,{pattern:RegExp(n+/[A-Z]\w*(?=\s+\w+\s*[;,=()])/.source),lookbehind:!0,inside:a.inside}],keyword:t,operator:/\bis!|\b(?:as|is)\b|\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?/}),e.languages.insertBefore("dart","string",{"string-literal":{pattern:/r?(?:("""|''')[\s\S]*?\1|(["'])(?:\\.|(?!\2)[^\\\r\n])*\2(?!\2))/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,lookbehind:!0,inside:{punctuation:/^\$\{?|\}$/,expression:{pattern:/[\s\S]+/,inside:e.languages.dart}}},string:/[\s\S]+/}},string:void 0}),e.languages.insertBefore("dart","class-name",{metadata:{pattern:/@\w+/,alias:"function"}}),e.languages.insertBefore("dart","class-name",{generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":a,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}}})}(r.My);let d={defaultLanguage:"js"},u=e=>{var t;let{children:n,parentClassName:u,className:p,showCopy:m=!0}=e,{resolvedTheme:f}=(0,s.D)(),[x,h]=(0,o.useState)(!1),g=(0,o.useRef)(null),y=[];(0,o.useEffect)(()=>{if(!x)return;let e=setTimeout(()=>h(!1),2e3);return()=>clearTimeout(e)},[x]);let b=p&&p.replace(/language-/,"");!b&&d.defaultLanguage&&(b=d.defaultLanguage);let v=e=>{(0,c.l)(e,()=>h(!0))};return(0,a.jsx)(r.f4,{theme:"dark"===f?r.Zj.nightOwl:r.Zj.nightOwlLight,code:null!=(t=null==n?void 0:n.trim())?t:"",language:b,"data-sentry-element":"Highlight","data-sentry-component":"SimpleCodeBlock","data-sentry-source-file":"SimpleCodeBlock.tsx",children:e=>{let{className:t,tokens:s,getLineProps:r,getTokenProps:o}=e;return(0,a.jsxs)("div",{className:"Code codeBlockWrapper group",children:[(0,a.jsx)("pre",{ref:g,className:(0,i.cn)("codeBlock",t,u),children:s.map((e,t)=>{let n=r({line:e,key:t});return y.includes(t+1)&&(n.className="".concat(n.className," docusaurus-highlight-code-line")),(0,a.jsx)("div",{...n,children:e.map((e,t)=>(0,a.jsx)("span",{...o({token:e,key:t})},t))},t)})}),m&&(0,a.jsx)("div",{className:"invisible absolute right-0 top-0 opacity-0 transition-opacity group-hover:visible group-hover:opacity-100",children:(0,a.jsx)(l.$,{size:"tiny",type:"default",onClick:()=>v(n),children:x?"Copied":"Copy"})})]})}})}},31759:(e,t,n)=>{"use strict";n.d(t,{W:()=>c,c:()=>i});var a=n(32144),s=n(80251),r=n(73969),o=n(65172),l=n(2997);async function i(e,t){let{projectRef:n,name:a,parentId:s}=e,r={name:a};s&&(r.parentId=s);let{data:l,error:i}=await (0,o.bE)("/platform/projects/{ref}/content/folders",{params:{path:{ref:n}},body:r,signal:t});if(i)throw(0,o.H4)(i);return l}let c=function(){let{onError:e,onSuccess:t,invalidateQueriesOnSuccess:n=!0,...o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,a.jE)();return(0,s.n)(e=>i(e),{async onSuccess(e,a,s){let{projectRef:r}=a;n&&await c.invalidateQueries(l.M.folders(r)),await (null==t?void 0:t(e,a,s))},async onError(t,n,a){void 0===e?r.oR.error("Failed to create folder: ".concat(t.message)):e(t,n,a)},...o})}},32248:(e,t,n)=>{"use strict";n.d(t,{Fl:()=>s,Lo:()=>l,_L:()=>a,s9:()=>o,tO:()=>r});let a={name:"New Query",description:"",type:"sql",visibility:"user",content:{schema_version:"1.0",content_id:"",sql:"this is a test",favorite:!1}},s="\n-- Supabase AI is experimental and may produce incorrect answers\n-- Always verify the output before executing\n".trim(),r="Untitled query",o=[RegExp("^(.*;)?\\s*(drop|delete|truncate|alter\\s+table\\s+.*\\s+drop\\s+column)\\s","is")],l=[{value:-1,label:"No limit"},{value:100,label:"100 rows"},{value:500,label:"500 rows"},{value:1e3,label:"1,000 rows"}]},32267:(e,t,n)=>{"use strict";n.d(t,{B:()=>s});var a=n(63492);let s=e=>[{title:"Manage",items:[{name:"Users",key:"users",url:"/project/".concat(e,"/auth/users"),items:[]}]},{title:"Configuration",items:[{name:"Policies",key:"policies",url:"/project/".concat(e,"/auth/policies"),items:[]},...a.pe?[{name:"Sign In / Providers",key:"sign-in-up",pages:["providers","third-party"],url:"/project/".concat(e,"/auth/providers"),items:[]},{name:"Sessions",key:"sessions",url:"/project/".concat(e,"/auth/sessions"),items:[]},{name:"Rate Limits",key:"rate-limits",url:"/project/".concat(e,"/auth/rate-limits"),items:[]},{name:"Emails",key:"emails",pages:["templates","smtp"],url:"/project/".concat(e,"/auth/templates"),items:[]},{name:"Multi-Factor",key:"mfa",url:"/project/".concat(e,"/auth/mfa"),items:[]},{name:"URL Configuration",key:"url-configuration",url:"/project/".concat(e,"/auth/url-configuration"),items:[]},{name:"Attack Protection",key:"protection",url:"/project/".concat(e,"/auth/protection"),items:[]},{name:"Auth Hooks",key:"hooks",url:"/project/".concat(e,"/auth/hooks"),items:[],label:"BETA"},{name:"Advanced",key:"advanced",url:"/project/".concat(e,"/auth/advanced"),items:[]}]:[]]}]},32735:(e,t,n)=>{"use strict";n.d(t,{E:()=>a});let a={usage:e=>["projects",e,"usage"],orgUsage:(e,t,n,a)=>["organizations",e,"usage",t,n,a],resourceWarnings:()=>["projects","resource-warnings"]}},34378:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var a=n(80263),s=n(29277),r=n(9797),o=n(53239),l=n(24560),i=n(76129),c=n(17761),d=n(51500),u=n(52647),p=n(60417),m=n(58696),f=n(82143),x=n(90050),h=n(9919);let g=e=>{let{column:t,value:n,visible:s,onClose:r}=e,[l,i]=(0,o.useState)("view"),c=null===n?"":"object"==typeof n?JSON.stringify(n,null,"	"):String(n),d="string"==typeof n;return(0,o.useEffect)(()=>{s&&i("view")},[s]),(0,a.jsx)(h.cj,{open:s,onOpenChange:()=>r(),"data-sentry-element":"Sheet","data-sentry-component":"CellDetailPanel","data-sentry-source-file":"CellDetailPanel.tsx",children:(0,a.jsxs)(h.h,{size:"lg",className:"flex flex-col gap-0","data-sentry-element":"SheetContent","data-sentry-source-file":"CellDetailPanel.tsx",children:[(0,a.jsx)(h.Fm,{className:"py-2.5","data-sentry-element":"SheetHeader","data-sentry-source-file":"CellDetailPanel.tsx",children:(0,a.jsxs)(h.qp,{className:"flex items-center justify-between pr-7","data-sentry-element":"SheetTitle","data-sentry-source-file":"CellDetailPanel.tsx",children:[(0,a.jsxs)("p",{className:"truncate",children:["Viewing cell details on column: ",(0,a.jsx)("code",{className:"text-sm",children:t})]}),d&&(0,a.jsx)(x.A,{options:["MD","view"],activeOption:l,borderOverride:"border-muted",onClickOption:i})]})}),"view"===l?(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(f.A,{isReadOnly:!0,id:"sql-editor-expand-cell",language:"json",value:c,placeholder:null===n?"NULL":void 0,options:{wordWrap:"off",contextmenu:!1}})}):(0,a.jsx)("div",{className:"flex-grow py-4 px-4 bg-default overflow-y-auto",children:(0,a.jsx)(m.o,{remarkPlugins:[p.A],className:"!max-w-full markdown-body",content:c})})]})})},y=e=>{var t,n,p;let{rows:m}=e,[f,x]=(0,o.useState)(!1),[h,y]=(0,o.useState)(),b=(e,t)=>{let n=t[e];return(0,a.jsxs)(c.tz,{modal:!1,"data-sentry-element":"ContextMenu_Shadcn_","data-sentry-component":"formatter","data-sentry-source-file":"Results.tsx",children:[(0,a.jsx)(c.Rc,{asChild:!0,"data-sentry-element":"ContextMenuTrigger_Shadcn_","data-sentry-source-file":"Results.tsx",children:(0,a.jsx)("div",{className:(0,d.cn)("flex items-center h-full font-mono text-xs w-full whitespace-pre",null===n&&"text-foreground-lighter"),children:null===n?"NULL":"string"==typeof n?n:JSON.stringify(n)})}),(0,a.jsxs)(c.Ip,{onCloseAutoFocus:e=>e.stopPropagation(),"data-sentry-element":"ContextMenuContent_Shadcn_","data-sentry-source-file":"Results.tsx",children:[(0,a.jsxs)(c.kt,{className:"gap-x-2",onSelect:()=>{let e=function(e){return null===e?"":"object"==typeof e||Array.isArray(e)?JSON.stringify(e):e}(null!=n?n:"");(0,u.l)(e)},onFocusCapture:e=>e.stopPropagation(),"data-sentry-element":"ContextMenuItem_Shadcn_","data-sentry-source-file":"Results.tsx",children:[(0,a.jsx)(s.A,{size:14,"data-sentry-element":"Clipboard","data-sentry-source-file":"Results.tsx"}),"Copy cell content"]}),(0,a.jsxs)(c.kt,{className:"gap-x-2",onSelect:()=>x(!0),onFocusCapture:e=>e.stopPropagation(),"data-sentry-element":"ContextMenuItem_Shadcn_","data-sentry-source-file":"Results.tsx",children:[(0,a.jsx)(r.A,{size:14,"data-sentry-element":"Expand","data-sentry-source-file":"Results.tsx"}),"View cell content"]})]})]})},v=e=>(0,a.jsx)("div",{className:"flex h-full items-center justify-center font-mono text-xs","data-sentry-component":"columnRender","data-sentry-source-file":"Results.tsx",children:e}),j=Object.keys(null!=(n=null==m?void 0:m[0])?n:[]).map((e,t)=>{let n=Math.max(Math.min(8.25*m.map(t=>String(t[e]).length).reduce((e,t)=>Math.max(e,t),0),500),100);return{idx:t,key:e,name:e,resizable:!0,parent:void 0,level:0,width:n,minWidth:100,maxWidth:void 0,draggable:!1,frozen:!1,sortable:!1,isLastFrozenColumn:!1,renderCell:t=>{let{row:n}=t;return b(e,n)},renderHeaderCell:()=>v(e)}});return(0,a.jsx)(a.Fragment,{children:0===m.length?(0,a.jsx)("div",{className:"bg-table-header-light [[data-theme*=dark]_&]:bg-table-header-dark",children:(0,a.jsx)("p",{className:"m-0 border-0 px-4 py-3 font-mono text-sm text-foreground-light",children:"Success. No rows returned"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Ay,{columns:j,rows:m,className:"h-full flex-grow border-t-0",rowClass:()=>"[&>.rdg-cell]:items-center",onSelectedCellChange:y,onCellKeyDown:i.GL}),(0,a.jsx)(g,{column:null!=(p=null==h?void 0:h.column.name)?p:"",value:null==h||null==(t=h.row)?void 0:t[h.column.name],visible:f,onClose:()=>x(!1)})]})})}},34424:(e,t,n)=>{"use strict";let a;n.d(t,{y:()=>en,$:()=>ea});var s=n(80263),r=n(77341),o=n.n(r),l=n(62140),i=n.n(l),c=n(93896),d=n.n(c),u=n(48388),p=n.n(u),m=n(38280),f=n.n(m),x=n(14685),h=n.n(x),g=n(64676),y=n.n(g),b=n(74722),v=n.n(b),j=n(86727),w=n.n(j),N=n(53239),k=n(12043),S=n(73969),C=n(80896),_=n(56028),A=n(12532),R=n(82147),I=n(99715),P=n(80535),E=n(52308),L=n(24447),T=n(54498),D=n(12578),F=n(76291),z=n(47114),B=n(67575),M=n(9191),O=n(65172);let U=async(e,t)=>{let{projectRef:n,bucketId:a,paths:s}=e;if(!a)throw Error("bucketId is required");let{data:r,error:o}=await (0,O.yH)("/platform/storage/{ref}/buckets/{id}/objects",{params:{path:{ref:n,id:a}},body:{paths:s},signal:t});return o&&(0,O.H4)(o),r};var W=n(66188);let q=async(e,t)=>{let{projectRef:n,bucketId:a,path:s,options:r}=e;if(!a)throw Error("bucketId is required");let{data:o,error:l}=await (0,O.bE)("/platform/storage/{ref}/buckets/{id}/objects/list",{params:{path:{ref:n,id:a}},body:{path:s,options:r},signal:t});return l&&(0,O.H4)(l),o},H=async e=>{let{projectRef:t,bucketId:n,from:a,to:s}=e;if(!n)throw Error("bucketId is required");let{data:r,error:o}=await (0,O.bE)("/platform/storage/{ref}/buckets/{id}/objects/move",{params:{path:{ref:t,id:n}},body:{from:a,to:s}});return o&&(0,O.H4)(o),r};var G=n(5483),V=n(63492),K=n(34531);let $=Object.fromEntries(Object.entries(n(32505)).filter(e=>{let[,{extensions:t}]=e;return void 0!==t}).flatMap(e=>{let[t,{extensions:n}]=e;return n.map(e=>[e.toLowerCase(),t])}));var Y=n(97956),Z=n(62173),J=n(40022);let Q={view:E.JB.COLUMNS,sortBy:E.NA.NAME,sortByOrder:E.ou.ASC,sortBucket:E.yP.CREATED_AT};function X(e){var t;let{projectRef:n,resumableUploadUrl:r,serviceKey:l,supabaseClient:c}=e,u=P.rS.STORAGE_PREFERENCE(n),{view:m,sortBy:x,sortByOrder:g,sortBucket:b}=(0,K.Bl)(null==(t=localStorage)?void 0:t.getItem(u))||Q,j=(0,_.BX)({projectRef:n,supabaseClient:c,resumableUploadUrl:r,serviceKey:l,uploadProgresses:[],abortApiCalls:()=>{a&&(a.abort(),a=new AbortController)},abortUploadCallbacks:{},abortUploads:e=>{j.abortUploadCallbacks[e].forEach(e=>e()),j.abortUploadCallbacks[e]=[]},columns:[],popColumn:()=>{j.abortApiCalls(),j.columns=j.columns.slice(0,j.getLatestColumnIndex())},popColumnAtIndex:e=>{j.columns=j.columns.slice(0,e+1)},pushColumnAtIndex:(e,t)=>{j.columns=j.columns.slice(0,t+1).concat([e])},openedFolders:[],pushOpenedFolderAtIndex:(e,t)=>{j.openedFolders=j.openedFolders.slice(0,t).concat(e)},popOpenedFolders:()=>{j.openedFolders=j.openedFolders.slice(0,j.openedFolders.length-1)},popOpenedFoldersAtIndex:e=>{j.openedFolders=j.openedFolders.slice(0,e+1)},clearOpenedFolders:()=>{j.openedFolders=[]},selectedItems:[],setSelectedItems:e=>j.selectedItems=e,clearSelectedItems:e=>{void 0!==e?j.selectedItems=j.selectedItems.filter(t=>t.columnIndex!==e):j.selectedItems=[]},selectedItemsToDelete:[],setSelectedItemsToDelete:e=>{j.selectedItemsToDelete=e},selectedItemsToMove:[],setSelectedItemsToMove:e=>{j.selectedItemsToMove=e},selectedBucket:{},setSelectedBucket:e=>{j.selectedBucket=e,j.setSelectedFilePreview(void 0),j.clearOpenedFolders(),j.clearSelectedItems()},setSelectedItemToRename:e=>{j.updateRowStatus({name:e.name,status:E.U1.EDITING,columnIndex:e.columnIndex})},view:m,setView:e=>{j.view=e,j.updateExplorerPreference()},sortBucket:b,setSortBucket:async e=>{j.sortBucket=e,j.updateExplorerPreference()},sortBy:x,setSortBy:async e=>{j.sortBy=e,j.updateExplorerPreference(),j.setSelectedFilePreview(void 0),await j.refetchAllOpenedFolders()},sortByOrder:g,setSortByOrder:async e=>{j.sortByOrder=e,j.updateExplorerPreference(),j.setSelectedFilePreview(void 0),await j.refetchAllOpenedFolders()},isSearching:!1,setIsSearching:e=>j.isSearching=e,selectedFilePreview:void 0,setSelectedFilePreview:e=>j.selectedFilePreview=e,selectedFileCustomExpiry:void 0,setSelectedFileCustomExpiry:e=>j.selectedFileCustomExpiry=e,updateExplorerPreference:()=>{let e=P.rS.STORAGE_PREFERENCE(n),{view:t,sortBy:a,sortByOrder:s,sortBucket:r}=j;localStorage.setItem(e,JSON.stringify({view:t,sortBy:a,sortByOrder:s,sortBucket:r}))},getLatestColumnIndex:()=>j.columns.length-1,setColumnIsLoadingMore:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];j.columns=j.columns.map((n,a)=>a===e?{...n,isLoadingMoreItems:t}:n)},openBucket:async e=>{let{id:t,name:n}=e;j.setSelectedBucket(e),await j.fetchFolderContents({bucketId:e.id,folderId:t,folderName:n,index:-1})},getPathAlongOpenedFolders:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return e?j.openedFolders.length>0?"".concat(j.selectedBucket.name,"/").concat(j.openedFolders.map(e=>e.name).join("/")):j.selectedBucket.name:j.openedFolders.map(e=>e.name).join("/")},getPathAlongFoldersToIndex:e=>j.openedFolders.slice(0,e).map(e=>e.name).join("/"),addNewFolderPlaceholder:e=>{let t=E.Vl.FOLDER,n=-1===e?j.getLatestColumnIndex():e;j.addTempRow({type:t,name:"Untitled folder",status:E.U1.EDITING,columnIndex:n,metadata:null,isPrepend:!0})},addNewFolder:async e=>{let{folderName:t,columnIndex:n,onError:a}=e;if(!j.supabaseClient)return console.error("Supabase Client is missing");let s=j.sanitizeNameForDuplicateInColumn({name:t,autofix:!1,columnIndex:n});if(null===s){null==a||a();return}if(!/^[a-zA-Z0-9_-\s]*$/.test(s))return null==a||a(),S.oR.error("Only alphanumeric characters, hyphens, and underscores are allowed for folder names.");if(0===s.length)return j.removeTempRows(n);j.updateFolderAfterEdit({folderName:s,columnIndex:n});let r="".concat(s,"/").concat(L.ok),o=j.openedFolders.slice(0,n).map(e=>e.name).join("/"),l=o.length>0?"".concat(o,"/").concat(r):r;await j.supabaseClient.storage.from(j.selectedBucket.name).upload(l,new File([],L.ok)),o.length>0&&await U({projectRef:j.projectRef,bucketId:j.selectedBucket.id,paths:["".concat(o,"/").concat(L.ok)]});let i=j.columns[n].items.find(e=>e.name===s);i&&j.openFolder(n,i)},fetchFolderContents:async e=>{let{bucketId:t,folderId:n,folderName:s,index:r,searchString:o}=e;j.abortApiCalls(),j.updateRowStatus({name:s,status:E.U1.LOADING,columnIndex:r}),j.pushColumnAtIndex({id:n,name:s,status:E.U1.LOADING,items:[]},r);let l=j.openedFolders.slice(0,r+1).map(e=>e.name).join("/"),i={limit:200,offset:0,search:o,sortBy:{column:j.sortBy,order:j.sortByOrder}};try{let e=await q({bucketId:t,projectRef:j.projectRef,path:l,options:i},null==a?void 0:a.signal);j.updateRowStatus({name:s,status:E.U1.READY,columnIndex:r});let o=(0,L.iN)(e,l);j.pushColumnAtIndex({id:n||s,name:s,status:E.U1.READY,items:o,hasMoreItems:200===o.length,isLoadingMoreItems:!1},r)}catch(e){"AbortError"===e.name?j.updateRowStatus({name:s,status:E.U1.READY,columnIndex:r}):S.oR.error('Failed to retrieve folder contents from "'.concat(s,'": ').concat(e.message))}},fetchMoreFolderContents:async e=>{let{index:t,column:n,searchString:s=""}=e;j.setColumnIsLoadingMore(t);let r=j.openedFolders.map(e=>e.name).join("/"),o={limit:200,offset:n.items.length,search:s,sortBy:{column:j.sortBy,order:j.sortByOrder}};try{let e=await q({projectRef:j.projectRef,bucketId:j.selectedBucket.id,path:r,options:o},null==a?void 0:a.signal),n=(0,L.iN)(e,r);j.columns=j.columns.map((a,s)=>s===t?{...a,items:a.items.concat(n),isLoadingMoreItems:!1,hasMoreItems:200===e.length}:a)}catch(e){e.message.includes("aborted")||S.oR.error("Failed to retrieve more folder contents: ".concat(e.message))}},refetchAllOpenedFolders:async()=>{let e=j.openedFolders.map(e=>e.name);await j.fetchFoldersByPath({paths:e})},fetchFoldersByPath:async e=>{let{paths:t,searchString:n="",showLoading:a=!1}=e;if(void 0===j.selectedBucket.id)return;let s=[""].concat(t);a&&(j.columns=[j.selectedBucket.name].concat(t).map(e=>({id:e,name:e,status:E.U1.LOADING,items:[]})));let r=(await Promise.all(s.map(async(e,a)=>{let s=t.slice(0,a).join("/"),r={limit:200,offset:0,search:n,sortBy:{column:j.sortBy,order:j.sortByOrder}};try{return await q({projectRef:j.projectRef,bucketId:j.selectedBucket.id,path:s,options:r})}catch(e){return S.oR.error("Failed to fetch folders: ".concat(e.message)),[]}}))).map((e,n)=>{let a=t.slice(0,n).join("/"),r=(0,L.iN)(e,a);return{id:null,status:E.U1.READY,name:0===n?j.selectedBucket.name:s[n],items:r,hasMoreItems:200===r.length,isLoadingMoreItems:!1}});j.columns=r,j.openedFolders=t.map((e,t)=>{let n=p()(r[t].items,{name:e});return n||{id:null,name:e,type:E.Vl.FOLDER,status:E.U1.READY,metadata:null,isCorrupted:!1,created_at:null,updated_at:null,last_accessed_at:null}})},validateParentFolderEmpty:async e=>{try{let n=await q({projectRef:j.projectRef,bucketId:j.selectedBucket.id,path:e,options:{limit:200,offset:0,sortBy:{column:j.sortBy,order:j.sortByOrder}}});if(0===n.length){var t;let n="".concat(e,"/").concat(L.ok);await (null==(t=j.supabaseClient)?void 0:t.storage.from(j.selectedBucket.name).upload(n,new File([],L.ok)))}}catch(e){}},deleteFolder:async e=>{try{let t=await j.getAllItemsAlongFolder(e);if(await j.deleteFiles({files:t,isDeleteFolder:!0}),j.popColumnAtIndex(e.columnIndex),j.popOpenedFoldersAtIndex(e.columnIndex-1),e.columnIndex>0){let t=j.openedFolders.slice(0,e.columnIndex).map(e=>e.name).join("/");t.length>0&&await j.validateParentFolderEmpty(t)}await j.refetchAllOpenedFolders(),j.setSelectedItemsToDelete([]),S.oR.success("Successfully deleted ".concat(e.name))}catch(e){S.oR.error("Failed to delete folder: ".concat(e.message))}},renameFolder:async(e,t,n)=>{let a=e.name;if(a===t)return j.updateRowStatus({name:a,status:E.U1.READY,columnIndex:n});let r=(0,S.oR)((0,s.jsx)(Y.t,{progress:0,message:"Renaming folder to ".concat(t)}),{closeButton:!1,position:"top-right"});try{if(t.includes("/")||t.includes("\\"))return S.oR.error("Folder name cannot contain forward or back slashes.");j.updateRowStatus({name:a,status:E.U1.LOADING,columnIndex:n,updatedName:t});let o=await j.getAllItemsAlongFolder(e),l=0,c=!1,d=o.map(e=>{let a="".concat(e.prefix,"/").concat(e.name),s=a.split("/"),r=s.slice(0,n).concat(t).concat(s.slice(n+1)).join("/");return()=>new Promise(async e=>{l+=1/o.length;try{await H({projectRef:j.projectRef,bucketId:j.selectedBucket.id,from:a,to:r})}catch(e){c=!0,S.oR.error("Failed to move ".concat(a," to the new folder"))}e()})}),u=i()(d,2);await u.reduce(async(e,n)=>{await e,await Promise.all(n.map(e=>e())),(0,S.oR)((0,s.jsx)(Y.t,{progress:100*l,message:"Renaming folder to ".concat(t)}),{id:r,closeButton:!1,position:"top-right"})},Promise.resolve()),c?S.oR.error("Renamed folder to ".concat(t," with some errors"),{id:r,closeButton:!0,duration:Z.j}):S.oR.success("Successfully renamed folder to ".concat(t),{id:r,closeButton:!0,duration:Z.j}),j.openedFolders[n].name===e.name&&(j.setSelectedFilePreview(void 0),j.popOpenedFoldersAtIndex(n-1)),await j.refetchAllOpenedFolders()}catch(e){S.oR.error("Failed to rename folder to ".concat(t,": ").concat(e.message),{id:r,closeButton:!0,duration:Z.j})}},updateFolderAfterEdit:e=>{let{folderName:t,columnIndex:n,status:a=E.U1.READY}=e,s=void 0!==n?n:j.getLatestColumnIndex(),r=j.columns.map((e,n)=>{if(n===s){let n=e.items.map(e=>{if(e.status===E.U1.EDITING){let n=new Date().toISOString();return{...e,status:a,name:t,createdAt:n,lastAccessedAt:n,updatedAt:n,metadata:null,id:null}}return e});return{...e,items:n}}return e});j.columns=r},openFolder:async(e,t)=>{j.setSelectedFilePreview(void 0),j.clearSelectedItems(e+1),j.popOpenedFoldersAtIndex(e-1),j.pushOpenedFolderAtIndex(t,e),await j.fetchFolderContents({bucketId:j.selectedBucket.id,folderId:t.id,folderName:t.name,index:e})},downloadFolder:async e=>{let t=0,n=S.oR.loading("Retrieving files from folder...");try{var a;let r=await j.getAllItemsAlongFolder(e);(0,S.oR)((0,s.jsx)(Y.t,{progress:0,message:"Downloading ".concat(r.length," file").concat(r.length>1?"s":"","...")}),{id:n,closeButton:!1,position:"top-right"});let o=r.map(e=>{var n,a;let s=null!=(a=null==(n=e.metadata)?void 0:n.mimetype)?a:null;return()=>new Promise(async n=>{try{let a=await (0,W.c)({projectRef:j.projectRef,bucketId:j.selectedBucket.id,path:"".concat(e.prefix,"/").concat(e.name)});t+=1/r.length;let o=await a.blob();n({name:e.name,prefix:e.prefix,blob:new Blob([o],{type:s})})}catch(t){console.error("Failed to download file","".concat(e.prefix,"/").concat(e.name)),n(!1)}})}),l=i()(o,10),c=await l.reduce(async(e,a)=>{let o=await e,l=await Promise.allSettled(a.map(e=>e()));return(0,S.oR)((0,s.jsx)(Y.t,{progress:100*t,message:"Downloading ".concat(r.length," file").concat(r.length>1?"s":"","...")}),{id:n,closeButton:!1,position:"top-right"}),o.concat(l.map(e=>e.value).filter(Boolean))},Promise.resolve([])),d=new I.D7("application/zip"),u=new I.Vx(d,{bufferedWrite:!0});0===c.length&&S.oR.error('Failed to download files from "'.concat(e.name,'"'),{id:n,closeButton:!0,duration:Z.j}),c.forEach(e=>{e.blob&&u.add("".concat(e.prefix,"/").concat(e.name),new I.nZ(e.blob))});let p=URL.createObjectURL(await u.close()),m=document.createElement("a");m.href=p,m.setAttribute("download","".concat(e.name,".zip")),document.body.appendChild(m),m.click(),null==(a=m.parentNode)||a.removeChild(m),S.oR.success(c.length===r.length?'Successfully downloaded folder "'.concat(e.name,'"'):'Downloaded folder "'.concat(e.name,'". However, ').concat(r.length-c.length," files did not download successfully."),{id:n,closeButton:!0,duration:Z.j})}catch(e){S.oR.error("Failed to download folder: ".concat(e.message),{id:n,closeButton:!0,duration:Z.j})}},getAllItemsAlongFolder:async e=>{var t,n;let a=[],s=!1,r="",{name:o,columnIndex:l,prefix:i}=e;if(void 0===i){let e=j.openedFolders.slice(0,l).map(e=>e.name).join("/");r=e.length>0?"".concat(e,"/").concat(o):o}else r="".concat(i,"/").concat(o);let c={limit:1e4,offset:0,sortBy:{column:j.sortBy,order:j.sortByOrder}},d=[];for(;;)try{let e=await q({projectRef:j.projectRef,bucketId:j.selectedBucket.id,path:r,options:c});if(d=d.concat(e),c.offset+=c.limit,(e||[]).length<c.limit)break}catch(e){s=!0;break}if(s)throw Error("Failed to retrieve all files within folder");let u=null!=(t=null==d?void 0:d.filter(e=>null===e.id))?t:[];return(null!=(n=null==d?void 0:d.filter(e=>null!==e.id))?n:[]).forEach(e=>a.push({...e,prefix:r})),(await Promise.all(u.map(e=>j.getAllItemsAlongFolder({...e,columnIndex:0,prefix:r})))).map(e=>{e.map(e=>a.push(e))}),a},uploadFiles:async e=>{var t,n,a,r;let{files:l,columnIndex:c,isDrop:d=!1}=e;if(!j.serviceKey)return void(0,S.oR)((0,s.jsxs)("p",{children:["Uploading files to Storage through the dashboard is currently unavailable with the new API keys. Please re-enable"," ",(0,s.jsx)(D.g,{href:"/project/".concat(j.projectRef,"/settings/api-keys"),children:"legacy JWT keys"})," ","if you'd like to upload files to Storage through the dashboard."]}));let u=null==(t=(0,M.S)().getQueryCache().find(z.n.storage(j.projectRef)))?void 0:t.state.data,p=null==u?void 0:u.fileSizeLimit,m=new Date,f=d?(await (0,L.Rd)(l)).filter(e=>!e.path.includes("#/")):Array.from(l),x=-1===c?j.getLatestColumnIndex():c,g=void 0!==p?f.filter(e=>e.size<=p):f;if(g.length<f.length){let e=f.length-g.length,{value:t,unit:n}=(0,T.Jb)(p);if(S.oR.error((0,s.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,s.jsxs)("p",{className:"text-foreground",children:["Failed to upload ",e," file",e>1?"s":""," as"," ",e>1?"their":"its"," size",e>1?"s are":" is"," beyond the global upload limit of"," ",t,n,"."]}),(0,s.jsxs)("p",{className:"text-foreground-light",children:["You can change the global file size upload limit in"," ",(0,s.jsx)(D.g,{href:"/project/".concat(j.projectRef,"/storage/settings"),children:"Storage settings"}),"."]})]}),{duration:8e3}),e===f.length)return}let y=g.filter(e=>e.size>0);if(y.length<g.length){let e=g.length-y.length;if(S.oR.error((0,s.jsx)("div",{className:"flex flex-col gap-y-1",children:(0,s.jsxs)("p",{className:"text-foreground",children:["Failed to upload ",e," file",e>1?"s":""," as"," ",e>1?"their":"its"," size",e>1?"s are":" is"," 0."]})})),e===g.length)return}let b=(null!=(r=null==(a=j.columns)||null==(n=a[x])?void 0:n.items)?r:[]).filter(e=>!e.id).map(e=>e.name),v=g.filter(e=>".DS_Store"!==e.name).map(e=>{if(!e.path)return e;let t=e.path.split("/"),n=t.length>1?t[0]:null;if(b.includes(n)){let a=j.sanitizeNameForDuplicateInColumn({name:n,autofix:!0,columnIndex:c});t[0]=a,e.path=t.join("/")}return e});j.uploadProgresses=Array(v.length).fill({percentage:0,elapsed:0,uploadSpeed:0,remainingBytes:0,remainingTime:0});let w=[],N=v.length,k=0,_=0,A=j.openedFolders.slice(0,x).map(e=>e.name).join("/"),R=j.onUploadProgress(),I=v.map((e,t)=>{var n,a,s;let r=e.name.split(".").pop(),l={mimetype:null!=(n=e.type||function(e){if(void 0!==e)return $[e.toLowerCase()]}(r))?n:"",size:e.size},i={cacheControl:"3600",contentType:l.mimetype},c=(null!=(a=null==e?void 0:e.path)?a:"").split("/").length>1,d=c?e.name:j.sanitizeNameForDuplicateInColumn({name:e.name,autofix:!0}),u=h()(e,["path"])&&c?e.path:d,p=(null!=u?u:"unknown").replaceAll(/\u{202F}/gu," "),m=A.length>0?"".concat(A,"/").concat(p):p;if(c){let t=(null==(s=e.path)?void 0:s.split("/")[0])||"";w.includes(t)||(j.addTempRow({type:E.Vl.FOLDER,name:t,status:E.U1.LOADING,columnIndex:x,metadata:l}),w.push(t))}else j.addTempRow({type:E.Vl.FILE,name:d,status:E.U1.LOADING,columnIndex:x,metadata:l});let f=0,g=j.selectedBucket.name;return()=>new Promise(async(n,a)=>{let s,r=e.size/1048576,c=Date.now();s=Math.min(s=r<30?6291456:r<100?Math.floor(e.size/8):r<500?Math.floor(e.size/10):r<1024?Math.floor(e.size/20):r<10240?Math.floor(e.size/30):Math.floor(e.size/50),524288e3);let d=e.size<=s,u=new C._O(e,{endpoint:j.resumableUploadUrl,retryDelays:[0,200,500,1500,3e3,5e3],headers:{authorization:"Bearer ".concat(j.serviceKey),"x-source":"supabase-dashboard",...j.serviceKey.includes("secret")?{apikey:j.serviceKey}:{}},uploadDataDuringCreation:d,removeFingerprintOnSuccess:!0,metadata:{bucketName:g,objectName:m,...i},chunkSize:s,onShouldRetry:e=>![400,403,404,409,413,415,429].includes(e.originalResponse?e.originalResponse.getStatus():0),onError:t=>{if(_+=1,t instanceof C.nj){var n,s,r;let a=null==(n=t.originalResponse)?void 0:n.getStatus();415===a?S.oR.error(o()((null==t||null==(s=t.originalResponse)?void 0:s.getBody())||"Failed to upload ".concat(e.name,": ").concat(l.mimetype," is not allowed")),{description:"Allowed MIME types: ".concat(null==(r=j.selectedBucket.allowed_mime_types)?void 0:r.join(", "))}):413===a&&S.oR.error("Failed to upload ".concat(e.name,": File size exceeds the bucket upload limit."))}else S.oR.error("Failed to upload ".concat(e.name,": ").concat(t.message));a(t)},onProgress:(e,n)=>{0===f&&e>s&&(f=e);let a=e-f,r=(Date.now()-c)/1e3,o=a/r,l=n-a;j.uploadProgresses[t]={percentage:0===n?0:e/n,elapsed:r,uploadSpeed:o,remainingBytes:l,remainingTime:l/o},j.onUploadProgress(R)},onSuccess(){k+=1,n()}});return Array.isArray(j.abortUploadCallbacks[R])||(j.abortUploadCallbacks[R]=[]),j.abortUploadCallbacks[R].push(()=>{try{u.abort(!0)}catch(e){}a(Error("Upload aborted by user"))}),u.findPreviousUploads().then(e=>{e.length&&u.resumeFromPreviousUpload(e[0]),u.start()})})}),P=i()(I,10);try{await P.reduce(async(e,t)=>{await e,await Promise.allSettled(t.map(e=>e())),j.onUploadProgress(R)},Promise.resolve()),k>0&&await U({projectRef:j.projectRef,bucketId:j.selectedBucket.id,paths:["".concat(A,"/").concat(L.ok)]}),await j.refetchAllOpenedFolders(),0===N||0===k&&0===_?S.oR.dismiss(R):_===N?S.oR.error("Failed to upload ".concat(N," file").concat(N>1?"s":"","!"),{id:R,closeButton:!0,duration:Z.j}):k===N?S.oR.success("Successfully uploaded ".concat(N," file").concat(N>1?"s":"","!"),{id:R,closeButton:!0,duration:Z.j}):S.oR.success("Successfully uploaded ".concat(k," out of ").concat(N," file").concat(N>1?"s":"","!"),{id:R,closeButton:!0,duration:Z.j})}catch(e){S.oR.error("Failed to upload files",{id:R,closeButton:!0,duration:Z.j})}let F=new Date;console.log("Total time taken for ".concat(v.length," files: ").concat((F-m)/1e3," seconds"))},moveFiles:async e=>{let t=d()(e.split("/")).join("/"),n=0;j.clearSelectedItems();let a=(0,S.oR)("Moving ".concat(j.selectedItemsToMove.length," file").concat(j.selectedItemsToMove.length>1?"s":"","..."),{description:"Do not close the browser until it's completed",duration:1/0});await Promise.all(j.selectedItemsToMove.map(async a=>{let s=j.openedFolders.slice(0,a.columnIndex).map(e=>e.name).join("/"),r=s.length>0?"".concat(s,"/").concat(a.name):a.name,o=e.length>0?"".concat(t,"/").concat(a.name):a.name;try{await H({projectRef:j.projectRef,bucketId:j.selectedBucket.id,from:r,to:o})}catch(e){n+=1,S.oR.error(e.message)}})),n===j.selectedItemsToMove.length?S.oR.error("Failed to move files"):(0,S.oR)("Successfully moved ".concat(j.selectedItemsToMove.length-n," files to ").concat(t.length>0?t:"the root of your bucket")),S.oR.dismiss(a),await j.refetchAllOpenedFolders(),j.setSelectedItemsToMove([])},deleteFiles:async e=>{let{files:t,isDeleteFolder:n=!1}=e;j.setSelectedFilePreview(void 0);let a=0,r=t.some(e=>e.prefix)?t.map(e=>"".concat(e.prefix,"/").concat(e.name)):t.map(e=>{let{name:t,columnIndex:n}=e,a=j.openedFolders.slice(0,n).map(e=>e.name).join("/");return j.updateRowStatus({name:t,status:E.U1.LOADING,columnIndex:n}),a.length>0?"".concat(a,"/").concat(t):t});j.clearSelectedItems();let o=(0,S.oR)((0,s.jsx)(Y.t,{progress:0,message:"Deleting ".concat(r.length," file(s)...")}),{closeButton:!1,position:"top-right"}),l=i()(r,2).map(e=>()=>(a+=e.length/r.length,U({projectRef:j.projectRef,bucketId:j.selectedBucket.id,paths:e})));if(await i()(l,2).reduce(async(e,t)=>{await e,await Promise.all(t.map(e=>e())),(0,S.oR)((0,s.jsx)(Y.t,{progress:100*a,message:"Deleting ".concat(r.length," file(s)...")}),{id:o,closeButton:!1,position:"top-right"})},Promise.resolve()),n)S.oR.dismiss(o);else{let e=v()(r.map(e=>{let t=e.split("/");return t.slice(0,t.length-1).join("/")}));await Promise.all(e.map(e=>j.validateParentFolderEmpty(e))),S.oR.success("Successfully deleted ".concat(r.length," file(s)"),{id:o,closeButton:!0,duration:Z.j,description:void 0}),await j.refetchAllOpenedFolders(),j.setSelectedItemsToDelete([])}},downloadSelectedFiles:async e=>{var t;let n=Math.min(...e.map(e=>e.columnIndex)),a=e.map(e=>{let{name:t,columnIndex:a}=e,s=j.openedFolders.slice(n,a).map(e=>e.name).join("/"),r=s.length>0?"".concat(s,"/").concat(t):t;return{...e,formattedPathToFile:r}}),r=0,o=S.oR.loading("Downloading ".concat(e.length," file").concat(e.length>1?"s":"","...")),l=a.map(e=>()=>new Promise(async t=>{let n=await (0,L.PE)({projectRef:j.projectRef,bucketId:j.selectedBucket.id,file:e,returnBlob:!0});r+=1/a.length,y()(n)&&t({...n,name:e.formattedPathToFile}),t(!1)})),c=i()(l,10),d=await c.reduce(async(t,n)=>{let a=await t,l=await Promise.allSettled(n.map(e=>e()));return(0,S.oR)((0,s.jsx)(Y.t,{progress:100*r,message:"Downloading ".concat(e.length," file").concat(e.length>1?"s":"","...")}),{id:o,closeButton:!1,position:"top-right"}),a.concat(l.map(e=>e.value).filter(Boolean))},Promise.resolve([])),u=new I.D7("application/zip"),p=new I.Vx(u,{bufferedWrite:!0});d.forEach(e=>{p.add(e.name,new I.nZ(e.blob))});let m=URL.createObjectURL(await p.close()),f=document.createElement("a");f.href=m,f.setAttribute("download","supabase-files.zip"),document.body.appendChild(f),f.click(),null==(t=f.parentNode)||t.removeChild(f),S.oR.success("Successfully downloaded ".concat(d.length," files"),{id:o,closeButton:!0,duration:Z.j})},renameFile:async(e,t,n)=>{let a=e.name;if(a===t||0===t.length)j.updateRowStatus({name:a,status:E.U1.READY,columnIndex:n});else{j.updateRowStatus({name:a,status:E.U1.LOADING,columnIndex:n,updatedName:t});let r=j.getPathAlongFoldersToIndex(n),o=r.length>0?"".concat(r,"/").concat(a):a,l=r.length>0?"".concat(r,"/").concat(t):t;try{var s;if(await H({projectRef:j.projectRef,bucketId:j.selectedBucket.id,from:o,to:l}),S.oR.success('Successfully renamed "'.concat(a,'" to "').concat(t,'"')),(null==(s=j.selectedFilePreview)?void 0:s.name)===a){let{previewUrl:n,...a}=e;j.setSelectedFilePreview({...a,name:t})}await j.refetchAllOpenedFolders()}catch(e){S.oR.error("Failed to rename file: ".concat(e.message)),j.updateRowStatus({name:a,status:E.U1.READY,columnIndex:n})}}},selectRangeItems:(e,t)=>{let n=j.columns[e].items,a=n[t],s=j.selectedItems.map(e=>e.id),r=s[s.length-1],o=f()(n,{id:r}),l=Math.min(t,o),i=Math.max(t,o),c=n.slice(l,i+1).map(t=>({...t,columnIndex:e}));if(t<o&&c.reverse(),s.includes(a.id)){let e=c.map(e=>e.id);j.setSelectedItems(j.selectedItems.filter(t=>t.id===a.id||!e.includes(t.id)))}else j.setSelectedItems(w()(j.selectedItems.concat(c),"id"))},sanitizeNameForDuplicateInColumn:e=>{let{name:t,columnIndex:n,autofix:a=!1}=e,s=void 0!==n?n:j.getLatestColumnIndex(),r=j.columns[s].items.filter(e=>e.status!==E.U1.EDITING);if(r.filter(e=>e.name===t).length>0)if(!a)return S.oR.error("The name ".concat(t," already exists in the current directory. Please use a different name.")),null;else{let[e,n]=t.split("."),a=new RegExp("".concat(e," \\([-0-9]+\\)").concat(n?"."+n:"","$")),s=r.filter(e=>e.name.match(a)),o=e+" (".concat(s.length+1,")");return n?"".concat(o,".").concat(n):o}return t},addTempRow:e=>{let{type:t,name:n,status:a,columnIndex:s,metadata:r,isPrepend:o=!1}=e,l=j.columns.map((e,l)=>{if(l===s){let s={type:t,name:n,status:a,metadata:r},l=o?[s].concat(e.items):e.items.concat([s]);return{...e,items:l}}return e});j.columns=l},removeTempRows:e=>{let t=j.columns.map((t,n)=>{if(n===e){let e=t.items.filter(e=>h()(e,"id"));return{...t,items:e}}return t});j.columns=t},onUploadProgress:e=>{let t=j.uploadProgresses.length,n=j.uploadProgresses.reduce((e,t)=>{let{percentage:n}=t;return e+n},0)/t*100,a=(0,L.Uh)(j.uploadProgresses);return(0,S.oR)((0,s.jsx)(Y.t,{progress:n,message:"Uploading ".concat(t," file").concat(t>1?"s":"","..."),progressPrefix:"".concat(a&&!isNaN(a)&&isFinite(a)&&0!==a?"".concat((0,L.fU)(a)," remaining – "):""),action:e&&(0,s.jsx)(J.$,{size:"tiny",type:"default",className:"ml-6",onClick:()=>j.abortUploads(e),children:"Cancel"})}),{id:e,closeButton:!1,position:"top-right"})},updateRowStatus:e=>{let{name:t,status:n,columnIndex:a,updatedName:s}=e,r=void 0!==a?a:j.getLatestColumnIndex(),o=j.columns.map((e,a)=>{if(a===r){let a=e.items.map(e=>e.name===t?{...e,status:n,...s&&{name:s}}:e);return{...e,items:a}}return e});j.columns=o}});return j}a=new AbortController;let ee={projectRef:"",resumableUploadUrl:"",serviceKey:"",supabaseClient:void 0},et=(0,N.createContext)(X(ee)),en=e=>{var t,n,a;let{children:r}=e,{data:o}=(0,G.YA)(),l=(null==o?void 0:o.status)===V.BU.INACTIVE,[i,c]=(0,N.useState)(()=>X(ee)),d=(0,k.A)(i),{data:u}=(0,F.I)({projectRef:null==o?void 0:o.ref,reveal:!0}),{data:p}=(0,B.G)({projectRef:null==o?void 0:o.ref}),{serviceKey:m}=(0,F.x)(u),f=null!=(a=null==p||null==(t=p.app_config)?void 0:t.protocol)?a:"https",x=null==p||null==(n=p.app_config)?void 0:n.endpoint,h="".concat(V.pe?"https":f,"://").concat(x,"/storage/v1/upload/resumable");return(0,N.useEffect)(()=>{var e,t;let n=!!(null==o?void 0:o.ref),a=null!=(e=null==m?void 0:m.api_key)?e:"unknown";if(!l&&n){let e="".concat(V.pe?"https":f,"://").concat(x),n=(0,R.UU)(e,a,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1,storage:{getItem:e=>null,setItem:(e,t)=>{},removeItem:e=>{}}}});c(X({projectRef:null!=(t=null==o?void 0:o.ref)?t:"",supabaseClient:n,resumableUploadUrl:h,serviceKey:a}))}},[null==o?void 0:o.ref,d,null==m?void 0:m.api_key,l,h,f,x]),(0,s.jsx)(et.Provider,{value:i,"data-sentry-element":"unknown","data-sentry-component":"StorageExplorerStateContextProvider","data-sentry-source-file":"storage-explorer.tsx",children:r})};function ea(e){let t=(0,N.useContext)(et);return(0,A.s)(t,e)}},34487:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(37630);let s=e=>{try{return(0,a.GP)(e,{language:"postgresql",keywordCase:"lower"})}catch(t){return e}}},34618:(e,t,n)=>{"use strict";n.d(t,{A:()=>O,E:()=>M});var a=n(80263),s=n(4624),r=n(54784),o=n(25643),l=n(53239),i=n(87494),c=n(73969),d=n(80535),u=n(79512),p=n(34378),m=n(37225),f=n(9483),x=n(78720),h=n(23385),g=n(5483),y=n(63492),b=n(34531),v=n(33986),j=n(12046),w=n(9919),N=n(9681),k=n(40022),S=n(61965),C=n(28979),_=n(12644),A=n(51500),R=n(55501),I=n(43432),P=n(47452),E=n(93210),L=n(47142),T=n(8082),D=n(13001),F=n(88602),z=n(12578),B=n(35795);let M=e=>{var t,n,M,O,U,W,q,H;let{open:G,onClose:V,initialValue:K="",label:$="",saveLabel:Y="Save",saveValue:Z="",onSave:J,onRunSuccess:Q,onRunError:X,templates:ee=[],initialPrompt:et="",onChange:en}=e,{ref:ea}=(0,d.g)(),{data:es}=(0,g.YA)(),{profile:er}=(0,v.xc)(),eo=(0,j.aP)(),{mutateAsync:el}=(0,f.G)(),{data:ei}=(0,h.s)(),[ec,ed]=(0,l.useState)(!1),[eu,ep]=(0,l.useState)(),[em,ef]=(0,l.useState)(void 0),[ex,eh]=(0,l.useState)(),[eg,ey]=(0,l.useState)(K),[eb,ev]=(0,l.useState)(!0),[ej,ew]=(0,l.useState)(!1),eN=(0,i.mN)({defaultValues:{saveValue:Z||""}}),ek=null==eu||null==(M=eu.formattedError)||null==(n=M.split("\n"))||null==(t=n.filter(e=>e.length>0))?void 0:t[0],eS="formattedError"in(eu||{})?null!=(q=null==eu||null==(W=eu.formattedError)||null==(U=W.split("\n"))||null==(O=U.filter(e=>e.length>0))?void 0:O.slice(1))?q:[]:[null!=(H=null==eu?void 0:eu.message)?H:""],{mutate:eC,isLoading:e_}=(0,x.Y)({onSuccess:async e=>{ef(e.result),Q&&Q(e.result)},onError:e=>{ep(e),ef([]),X&&X(e)}}),eA=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(ep(void 0),eh(void 0),0!==eg.length){if(!e&&!(0,T.b_)(eg))return void eh((0,T.GJ)(eg)?"hasUnknownFunctions":"hasWriteOperation");eC({sql:(0,u.dZ)(eg,100),projectRef:null==es?void 0:es.ref,connectionString:null==es?void 0:es.connectionString,handleError:e=>{throw e},contextualInvalidation:!0})}},eR=e=>{ey(e),null==en||en(e)},eI=e=>{eR(e),ew(!1)};return(0,l.useEffect)(()=>{void 0!==K&&K!==eg&&(ey(K),ef(void 0),ep(void 0),eh(void 0))},[K]),(0,l.useEffect)(()=>{eN.reset({saveValue:Z||""})},[Z,eN]),(0,a.jsx)(w.cj,{open:G,onOpenChange:e=>!e&&V(),"data-sentry-element":"Sheet","data-sentry-component":"EditorPanel","data-sentry-source-file":"EditorPanel.tsx",children:(0,a.jsxs)(w.h,{showClose:!1,className:"w-full sm:max-w-3xl flex flex-col h-full p-0 space-y-0 gap-0","data-sentry-element":"SheetContent","data-sentry-source-file":"EditorPanel.tsx",children:[(0,a.jsxs)(w.Fm,{className:"flex shrink-0 items-center gap-x-3","data-sentry-element":"SheetHeader","data-sentry-source-file":"EditorPanel.tsx",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(w.qp,{className:"text-sm","data-sentry-element":"SheetTitle","data-sentry-source-file":"EditorPanel.tsx",children:"SQL Editor"}),$&&(0,a.jsx)(w.Qs,{className:"text-sm",children:$})]}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[ee.length>0&&(0,a.jsxs)(N.AM,{open:ej,onOpenChange:ew,children:[(0,a.jsx)(N.Wv,{asChild:!0,children:(0,a.jsx)(k.$,{size:"tiny",type:"default",role:"combobox","aria-expanded":ej,icon:(0,a.jsx)(s.A,{size:14}),children:"Templates"})}),(0,a.jsx)(N.hl,{align:"end",className:"w-[300px] p-0",children:(0,a.jsxs)(S.uB,{children:[(0,a.jsx)(S.G7,{placeholder:"Search templates..."}),(0,a.jsxs)(S.oI,{children:[(0,a.jsx)(S.xL,{children:"No templates found."}),(0,a.jsx)(S.L$,{children:ee.map(e=>(0,a.jsxs)(C.jc,{children:[(0,a.jsx)(C.d0,{asChild:!0,children:(0,a.jsx)(S.h_,{value:e.name,onSelect:()=>eI(e.content),className:"cursor-pointer",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(_.ty,{size:16,className:(0,A.cn)("w-5 h-5 flex-0 mr-2 transition-colors fill-foreground-muted")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-foreground flex-1",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:e.description})]})]})})}),(0,a.jsx)(C.Et,{side:"left",className:"w-[500px] p-0",children:(0,a.jsx)(R.N,{language:"sql",className:"language-sql border-none",hideLineNumbers:!0,value:e.content})})]},e.name))})]})]})})]}),(0,a.jsx)(F.G,{tooltip:{content:{side:"bottom",text:"Save as snippet"}},size:"tiny",type:"default",className:"w-7 h-7",loading:ec,icon:(0,a.jsx)(r.A,{size:16}),onClick:async()=>{if(!ea)return console.error("Project ref is required");if(!es)return console.error("Project is required");if(!er)return console.error("Profile is required");try{ed(!0);let{title:e}=await el({sql:eg}),t=(0,u.fW)({id:(0,b.gZ)(),name:e,sql:eg,owner_id:er.id,project_id:es.id});eo.addSnippet({projectRef:ea,snippet:t}),eo.addNeedsSaving(t.id),c.oR.success((0,a.jsxs)("div",{children:["Saved snippet! View it"," ",(0,a.jsx)(z.g,{href:"/project/".concat(ea,"/sql/").concat(t.id),children:"here"})]}))}catch(e){c.oR.error("Failed to create new query: ".concat(e.message))}finally{ed(!1)}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"EditorPanel.tsx"}),(0,a.jsx)(F.G,{size:"tiny",type:"default",className:"w-7 h-7",onClick:V,icon:(0,a.jsx)(o.A,{size:16}),tooltip:{content:{side:"bottom",text:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{children:"Close Editor"}),(0,a.jsx)(I.S,{keys:["Meta","e"]})]})}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"EditorPanel.tsx"})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col h-full",children:[(0,a.jsx)("div",{className:"flex-1 min-h-0 relative",children:(0,a.jsx)(D.A,{autoFocus:!0,language:"pgsql",value:eg,onChange:eR,aiEndpoint:"".concat(y.o2,"/api/ai/code/complete"),aiMetadata:{projectRef:null==es?void 0:es.ref,connectionString:null==es?void 0:es.connectionString,orgSlug:null==ei?void 0:ei.slug},initialPrompt:et,options:{tabSize:2,fontSize:13,minimap:{enabled:!1},wordWrap:"on",lineNumbers:"on",folding:!1,padding:{top:16},lineNumbersMinChars:3},executeQuery:eA,onClose:()=>V(),"data-sentry-element":"AIEditor","data-sentry-source-file":"EditorPanel.tsx"})}),void 0!==eu&&(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)(L.Z,{type:"warning",className:"m-0 rounded-none border-x-0 border-b-0 [&>div>div>pre]:text-sm [&>div]:flex [&>div]:flex-col [&>div]:gap-y-2",title:ek||"Error running SQL query",description:(0,a.jsx)("div",{children:eS.length>0?eS.map((e,t)=>(0,a.jsx)("pre",{className:"font-mono text-xs whitespace-pre-wrap",children:e},"err-".concat(t))):(0,a.jsx)("p",{className:"font-mono text-xs",children:eu.error})})})}),ex&&(0,a.jsx)(B.A,{className:"border-t",warningType:ex,onCancel:()=>eh(void 0),onConfirm:()=>{eh(void 0),eA(!0)}}),void 0!==em&&em.length>0&&(0,a.jsxs)("div",{className:"max-h-72 shrink-0 flex flex-col ".concat(eb&&"h-full"),children:[eb&&(0,a.jsx)("div",{className:"border-t flex-1 overflow-auto",children:(0,a.jsx)(p.A,{rows:em})}),(0,a.jsxs)("p",{className:"text-xs text-foreground-light border-t py-2 px-5 flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"font-mono",children:[em.length," rows",em.length>=100&&" (Limited to only 100 rows)"]}),(0,a.jsx)(k.$,{size:"tiny",type:"default",className:"ml-2",onClick:()=>ev(e=>!e),children:eb?"Hide Results":"Show Results"})]})]}),void 0!==em&&0===em.length&&!eu&&(0,a.jsx)("div",{className:"shrink-0",children:(0,a.jsx)("p",{className:"text-xs text-foreground-light font-mono py-2 px-5",children:"Success. No rows returned."})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 justify-end px-5 py-4 w-full border-t shrink-0",children:[J&&(0,a.jsx)(P.lV,{...eN,children:(0,a.jsxs)("form",{onSubmit:eN.handleSubmit(e=>{J(eg,e.saveValue)}),className:"flex items-center gap-2",children:[Z&&(0,a.jsx)(P.zB,{control:eN.control,name:"saveValue",render:e=>{let{field:t}=e;return(0,a.jsx)(E.p,{size:"tiny",placeholder:"Enter save value...",...t})}}),(0,a.jsx)(k.$,{size:"tiny",type:"default",htmlType:"submit",children:Y})]})}),(0,a.jsx)(m.C,{isDisabled:e_,isExecuting:e_,onClick:eA,"data-sentry-element":"SqlRunButton","data-sentry-source-file":"EditorPanel.tsx"})]})]})]})})},O=M},35021:(e,t,n)=>{"use strict";n.d(t,{U:()=>a});let a={list:e=>["projects",e,"database-triggers"],resource:(e,t)=>["projects",e,"resources",t]}},35795:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(80263),s=n(40022),r=n(47142);let o=e=>{let{warningType:t,onCancel:n,onConfirm:o,disabled:l=!1,className:i}=e;return(0,a.jsxs)(r.Z,{type:"warning",className:"mb-0 rounded-none border-0 shrink-0 bg-background-100 ".concat(i),"data-sentry-element":"Admonition","data-sentry-component":"SqlWarningAdmonition","data-sentry-source-file":"SqlWarningAdmonition.tsx",children:[(0,a.jsxs)("p",{className:"text-xs !mb-1",children:["hasWriteOperation"===t?"This query contains write operations.":"This query involves running a function."," ","Are you sure you want to execute it?"]}),(0,a.jsx)("p",{className:"text-foreground-light text-xs",children:"Make sure you are not accidentally removing something important."}),(0,a.jsxs)("div",{className:"flex justify-stretch mt-2 gap-2",children:[(0,a.jsx)(s.$,{type:"outline",size:"tiny",className:"w-full flex-1",onClick:n,"data-sentry-element":"Button","data-sentry-source-file":"SqlWarningAdmonition.tsx",children:"Cancel"}),(0,a.jsx)(s.$,{type:"danger",size:"tiny",disabled:l,className:"w-full flex-1",onClick:o,"data-sentry-element":"Button","data-sentry-source-file":"SqlWarningAdmonition.tsx",children:"Run"})]})]})}},37225:(e,t,n)=>{"use strict";n.d(t,{C:()=>c});var a=n(80263),s=n(28881),r=n(6218),o=n(80923),l=n(34531),i=n(40022);let c=e=>{let{isDisabled:t=!1,isExecuting:n=!1,hasSelection:c=!1,className:d,onClick:u}=e,p=(0,l.UX)();return(0,a.jsx)(i.$,{onClick:function(){u()},disabled:t,type:"primary",size:"tiny","data-testid":"sql-run-button",iconRight:n?(0,a.jsx)(s.A,{className:"animate-spin",size:10,strokeWidth:1.5}):(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:["macos"===p?(0,a.jsx)(r.A,{size:10,strokeWidth:1.5}):(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"CTRL"}),(0,a.jsx)(o.A,{size:10,strokeWidth:1.5})]}),className:d,"data-sentry-element":"Button","data-sentry-component":"SqlRunButton","data-sentry-source-file":"RunButton.tsx",children:c?"Run selected":"Run"})}},37283:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(80263),s=n(24400),r=n(53239),o=n(68906),l=n(32049),i=n(9919),c=n(61965),d=n(51500);let u=e=>{let{children:t,open:n=!1,onOpenChange:u,stickyBottom:p=!1}=e,m=(0,s.useRouter)(),{width:f}=(0,l.A)();return(0,r.useEffect)(()=>{u(!1)},[null==m?void 0:m.asPath]),(0,r.useEffect)(()=>{u(!1)},[f]),(0,a.jsx)(i.cj,{open:n,onOpenChange:u,"data-sentry-element":"Sheet","data-sentry-component":"MobileSheetNav","data-sentry-source-file":"MobileSheetNav.tsx",children:(0,a.jsx)(i.h,{id:"mobile-sheet-content",showClose:!1,size:"full",side:"bottom",className:(0,d.cn)("rounded-t-lg overflow-hidden overflow-y-scroll h-[85dvh] md:max-h-[500px]",p?"pt-2 pb-0":"py-2"),"data-sentry-element":"SheetContent","data-sentry-source-file":"MobileSheetNav.tsx",children:(0,a.jsx)(o.tH,{FallbackComponent:()=>(0,a.jsx)(c.xL,{}),"data-sentry-element":"ErrorBoundary","data-sentry-source-file":"MobileSheetNav.tsx",children:t})})})}},40990:(e,t,n)=>{"use strict";n.d(t,{TR:()=>v,bq:()=>h,eb:()=>j,gC:()=>b,l6:()=>p,mi:()=>w,s3:()=>m,yv:()=>f});var a=n(80263),s=n(26933),r=n(72259),o=n(11462),l=n(80903),i=n(53239),c=n(79279),d=n(32682),u=n(51500);let p=s.bL,m=s.YJ,f=i.forwardRef((e,t)=>{let{placeholder:n,...r}=e;return(0,a.jsx)(s.WT,{placeholder:"string"==typeof n?(0,a.jsx)("span",{children:n}):n,...r,ref:t})});f.displayName=s.WT.displayName;let x=(0,c.F)("",{variants:{size:{...d.vs}},defaultVariants:{size:d.FE}}),h=i.forwardRef((e,t)=>{let{className:n,children:o,size:l,...i}=e;return(0,a.jsxs)(s.l9,{ref:t,className:(0,u.cn)("flex w-full items-center justify-between rounded-md border border-strong hover:border-stronger bg-alternative dark:bg-muted hover:bg-selection text-xs ring-offset-background-control data-[placeholder]:text-foreground-lighter focus:outline-none ring-border-control focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200","data-[state=open]:bg-selection data-[state=open]:border-stronger","gap-2",x({size:l}),n),...i,children:[o,(0,a.jsx)(s.In,{asChild:!0,children:(0,a.jsx)(r.A,{className:"h-4 w-4 text-foreground-lighter",strokeWidth:1.5})})]})});h.displayName=s.l9.displayName;let g=i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.PP,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1 text-foreground-muted",n),...r,children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})});g.displayName=s.PP.displayName;let y=i.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,a.jsx)(s.wn,{ref:t,className:(0,u.cn)("flex cursor-default items-center justify-center py-1 text-foreground-muted",n),...o,children:(0,a.jsx)(r.A,{className:"h-4 w-4"})})});y.displayName=s.wn.displayName;let b=i.forwardRef((e,t)=>{let{className:n,children:r,position:o="popper",...l}=e;return(0,a.jsx)(s.ZL,{children:(0,a.jsxs)(s.UC,{ref:t,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-overlay text-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:o,...l,children:[(0,a.jsx)(g,{}),(0,a.jsx)(s.LM,{className:(0,u.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(y,{})]})})});b.displayName=s.UC.displayName;let v=i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.JU,{ref:t,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-xs text-foreground-lighter/75 uppercase tracking-wider font-mono",n),...r})});v.displayName=s.JU.displayName;let j=i.forwardRef((e,t)=>{let{className:n,children:r,...o}=e;return(0,a.jsxs)(s.q7,{ref:t,className:(0,u.cn)("group","relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-overlay-hover text-foreground-light focus:text-foreground data-[state=checked]:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.VF,{className:"h-3.5 w-3.5 bg-foreground rounded-full flex justify-center items-center",children:(0,a.jsx)(l.A,{className:"h-2 w-2 text-background-overlay",strokeWidth:6})})}),(0,a.jsx)(s.p4,{children:"string"==typeof r?(0,a.jsx)("span",{children:r}):r})]})});j.displayName=s.q7.displayName;let w=i.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.wv,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-border-overlay",n),...r})});w.displayName=s.wv.displayName},41728:(e,t,n)=>{"use strict";n.d(t,{ID:()=>d,KO:()=>r,b4:()=>c,bI:()=>s,bL:()=>o,eg:()=>l,rW:()=>i});var a=n(85265);function s(e){return(null==e?void 0:e.entity_type)===a.z.TABLE}function r(e){return s(e)||(null==e?void 0:e.entity_type)===a.z.PARTITIONED_TABLE}function o(e){return(null==e?void 0:e.entity_type)===a.z.FOREIGN_TABLE}function l(e){return(null==e?void 0:e.entity_type)===a.z.VIEW}function i(e){return(null==e?void 0:e.entity_type)===a.z.MATERIALIZED_VIEW}function c(e){return l(e)||i(e)}function d(e){if(void 0===e.columns||void 0===e.relationships)return void console.error("Unable to convert PostgresTable to Entity type: columns and relationships must not be undefined.");let t=e.relationships.map(e=>({deletion_action:"a",update_action:"a",...e}));return{id:e.id,schema:e.schema,name:e.name,comment:e.comment,rls_enabled:e.rls_enabled,rls_forced:e.rls_forced,replica_identity:e.replica_identity,bytes:e.bytes,size:e.size,live_rows_estimate:e.live_rows_estimate,dead_rows_estimate:e.dead_rows_estimate,columns:e.columns,relationships:t,primary_keys:e.primary_keys,entity_type:a.z.TABLE}}},43432:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});var a=n(80263);let s=()=>"undefined"!=typeof navigator&&(!!(navigator.userAgent&&navigator.userAgent.includes("Mac"))||!!navigator.platform&&(navigator.platform.startsWith("Mac")||"iPhone"===navigator.platform)),r=e=>{let{keys:t}=e,n=s(),r=t.map(e=>"Meta"===e?n?"⌘":"Ctrl":e).map(e=>"Shift"===e?"⇧":e);return(0,a.jsx)("div",{className:"text-xs text-foreground-light flex items-center gap-[3px]","data-sentry-component":"KeyboardShortcut","data-sentry-source-file":"KeyboardShortcut.tsx",children:r.map(e=>(0,a.jsx)("span",{className:"px-1.5 py-0.5 rounded-sm border-b-2 flex items-center justify-center border border-foreground-lightest cursor-default",children:e},e))})}},43969:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(80263),s=n(22977),r=n(53239),o=n(51500),l=n(55568),i=n(2119),c=n(40022);function d(e){let t=(0,a.jsxs)("div",{className:(0,o.cn)("bg-surface-100","rounded-md border shadow-sm",e.noHideOverflow?"":"overflow-hidden",e.noMargin?"":"mb-4 md:mb-8",e.className),id:e.id,children:[e.title&&(0,a.jsx)("div",{className:(0,o.cn)("bg-surface-100 border-b border-default flex items-center px-4 py-4",e.titleClasses),children:e.title}),e.children,e.footer&&(0,a.jsx)(u,{children:e.footer})]});return!1===e.wrapWithLoading?t:(0,a.jsx)(l.A,{active:!!e.loading,"data-sentry-element":"Loading","data-sentry-component":"Panel","data-sentry-source-file":"Panel.tsx",children:t})}function u(e){let{children:t}=e;return(0,a.jsx)("div",{className:"bg-surface-100 border-t border-default","data-sentry-component":"Footer","data-sentry-source-file":"Panel.tsx",children:(0,a.jsx)("div",{className:"flex h-12 items-center px-4",children:t})})}let p=(0,r.forwardRef)((e,t)=>{let{className:n,title:r,description:l,href:d,buttonText:u,layout:p="horizontal",badgeLabel:m,...f}=e;return(0,a.jsxs)("div",{ref:t,...f,className:(0,o.cn)("relative px-4 py-5 bg-studio flex flex-col lg:flex-row lg:justify-between gap-6 overflow-hidden lg:items-center","vertical"===p&&"!flex-col !items-start gap-y-2",n),children:[(0,a.jsx)("div",{className:"absolute inset-0 -mt-[5px]",style:{backgroundImage:"\n                linear-gradient(to right, hsl(var(--background-200)/1) 0%, hsl(var(--background-200)/1) 30%, hsl(var(--background-200)/0) 100%),\n                linear-gradient(to right, hsl(var(--border-default)/0.33) 1px, transparent 1px),\n                linear-gradient(to bottom, hsl(var(--border-default)/0.33) 1px, transparent 1px)\n              ",backgroundSize:"100% 100%, 15px 15px, 15px 15px",backgroundPosition:"0 0, 0 0, 0 0"}}),(0,a.jsxs)("div",{className:"relative flex flex-col gap-y-2",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center -space-x-px",children:[(0,a.jsxs)(i.E,{variant:"default",className:"rounded-r-none pr-2 flex-shrink-0 gap-1.5 border-dashed bg-opacity-0 bg-surface-400 text-foreground-lighter",children:[(0,a.jsx)(s.A,{size:16,strokeWidth:1.2}),(0,a.jsx)("span",{className:"text-foreground-lighter",children:null!=m?m:"Upcoming change"})]}),(0,a.jsx)(i.E,{variant:"default",className:"rounded-l-none flex-shrink-0 gap-1.5 bg-opacity-0 bg-surface-400 text-foreground-lighter border-l-0",children:(0,a.jsx)("span",{className:"text-foreground text-xs",children:r})})]}),l&&(0,a.jsx)("div",{className:"text-foreground-light text-sm flex flex-col gap-0",children:(0,a.jsx)("div",{className:"prose text-xs max-w-none [&_p]:mt-2 [&_p]:mb-0",children:l})})]}),d&&(0,a.jsx)(c.$,{size:"tiny",type:"default",className:"text-xs",asChild:!0,children:(0,a.jsx)("a",{href:d,target:"_blank",rel:"noreferrer noopener",children:null!=u?u:"Read the accouncement"})})]})});p.displayName="PanelNotice",d.Content=function(e){let{children:t,className:n}=e;return(0,a.jsx)("div",{className:(0,o.cn)("px-4 py-4",n),"data-sentry-component":"Content","data-sentry-source-file":"Panel.tsx",children:t})},d.Footer=u,d.Notice=p;let m=d},44187:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(80263),s=n(15601),r=n.n(s),o=n(53239);let l=(0,o.forwardRef)(function(e,t){let{prefetcher:n,children:s,...l}=e,i=(0,o.useRef)(null),c=(0,o.useRef)(null);function d(){let e=Date.now();i.current&&e-i.current>=75&&n()}return(0,a.jsx)(r(),{ref:t,...l,onMouseEnter:function(){i.current=Date.now(),c.current=window.setTimeout(d,75)},onMouseLeave:function(){i.current=null,c.current&&(clearTimeout(c.current),c.current=null)},children:s})})},44293:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});let a=[{value:"=",label:"equals",preLabel:"[ = ]",abbrev:"eq"},{value:"<>",label:"not equal",preLabel:"[ <> ]",abbrev:"neq"},{value:">",label:"greater than",preLabel:"[ > ]",abbrev:"gt"},{value:"<",label:"less than",preLabel:"[ < ]",abbrev:"lt"},{value:">=",label:"greater than or equal",preLabel:"[ >= ]",abbrev:"gte"},{value:"<=",label:"less than or equal",preLabel:"[ <= ]",abbrev:"lte"},{value:"~~",label:"like operator",preLabel:"[ ~~ ]",abbrev:"like"},{value:"~~*",label:"ilike operator",preLabel:"[ ~~* ]",abbrev:"ilike"},{value:"in",label:"one of a list of values",preLabel:"[ in ]",abbrev:"in"},{value:"is",label:"checking for (null,not null,true,false)",preLabel:"[ is ]",abbrev:"is"}]},46312:(e,t,n)=>{"use strict";n.d(t,{BP:()=>r,EN:()=>s,O8:()=>l,mS:()=>o});var a=n(63492);let s=e=>{let t=e.find(e=>"compute_instance"===e.type),n=e.find(e=>"pitr"===e.type);return{computeInstance:t,pitr:n,customDomain:e.find(e=>"custom_domain"===e.type),ipv4:e.find(e=>"ipv4"===e.type)}},r=e=>{var t;return!!a.pe&&(null!=(t=null==e?void 0:e.addons)?t:[]).some(e=>"addon_security_hipaa"===e.supabase_prod_id)},o=e=>{if(!e)return e;switch(e){case"fly":return"Fly.io";case"aws":return"AWS";case"vercel_marketplace":return"Vercel";default:return e}},l=(e,t)=>{var n,a;return e&&t&&null!=(a=null==(n=({free:{free:"none",pro:"upgrade",team:"upgrade",enterprise:"upgrade"},pro:{free:"downgrade",pro:"none",team:"upgrade",enterprise:"upgrade"},team:{free:"downgrade",pro:"downgrade",team:"none",enterprise:"upgrade"},enterprise:{free:"downgrade",pro:"downgrade",team:"downgrade",enterprise:"none"}})[e])?void 0:n[t])?a:"none"}},46964:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var a=n(56947),s=n(65172),r=n(63492),o=n(32735);async function l(e,t){let{orgSlug:n,projectRef:a,start:r,end:o}=e;if(!n)throw Error("orgSlug is required");let{data:l,error:i}=await (0,s.Jt)("/platform/organizations/{slug}/usage",{params:{path:{slug:n},query:{project_ref:a,start:null==r?void 0:r.toISOString(),end:null==o?void 0:o.toISOString()}},signal:t});return i&&(0,s.H4)(i),l}let i=function(e){let{orgSlug:t,projectRef:n,start:s,end:i}=e,{enabled:c=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(o.E.orgUsage(t,n,null==s?void 0:s.toISOString(),null==i?void 0:i.toISOString()),e=>{let{signal:a}=e;return l({orgSlug:t,projectRef:n,start:s,end:i},a)},{enabled:c&&r.pe&&void 0!==t,staleTime:18e5,...d})}},47452:(e,t,n)=>{"use strict";n.d(t,{C5:()=>v,MJ:()=>y,Rr:()=>b,eI:()=>h,lR:()=>g,lV:()=>u,zB:()=>m});var a=n(80263),s=n(38694),r=n(53239),o=n(87494),l=n(51500),i=n(19428),c=n(88712),d=n(37055);let u=o.Op,p=r.createContext({}),m=e=>{let{...t}=e;return(0,a.jsx)(p.Provider,{value:{name:t.name},"data-sentry-element":"unknown","data-sentry-component":"FormField","data-sentry-source-file":"form.tsx",children:(0,a.jsx)(o.xI,{...t,"data-sentry-element":"Controller","data-sentry-source-file":"form.tsx"})})},f=()=>{let e=r.useContext(p),t=r.useContext(x),{getFieldState:n,formState:a}=(0,o.xW)(),s=n(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...s}},x=r.createContext({}),h=r.forwardRef((e,t)=>{let{asChild:n,...o}=e,l=r.useId(),i=n?s.DX:"div";return(0,a.jsx)(x.Provider,{value:{id:l},children:(0,a.jsx)(i,{ref:t,...o})})});h.displayName="FormItem";let g=r.forwardRef((e,t)=>{let{className:n,...s}=e,{error:r,formItemId:o}=f();return(0,a.jsx)(i.J,{ref:t,className:(0,l.cn)("text-foreground-light","transition-colors",r&&"!text-destructive",n,"leading-normal"),htmlFor:o,...s})});g.displayName="FormLabel";let y=r.forwardRef((e,t)=>{let{...n}=e,{error:r,formItemId:o,formDescriptionId:l,formMessageId:i}=f();return(0,a.jsx)(s.DX,{ref:t,id:o,"aria-describedby":r?"".concat(l," ").concat(i):"".concat(l),"aria-invalid":!!r,...n})});y.displayName="FormControl";let b=r.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:r}=f();return(0,a.jsx)("div",{ref:t,id:r,className:(0,l.cn)("text-sm text-foreground-light",n),...s})});b.displayName="FormDescription";let v=r.forwardRef((e,t)=>{let{className:n,children:s,...r}=e,{error:o,formMessageId:i}=f(),u=o?String(null==o?void 0:o.message):s;return(0,a.jsx)(c.N,{initial:!1,children:u?(0,a.jsx)(d.P.div,{initial:{opacity:0,y:-5,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-5,height:0},transition:{duration:.15,ease:"easeInOut"},children:(0,a.jsx)("p",{ref:t,id:i,className:(0,l.cn)("text-sm text-destructive",n),...r,children:u})},i):null})});v.displayName="FormMessage"},47620:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});let a={list:e=>["project",e,"replicas"],statuses:e=>["project",e,"replicas-statuses"],loadBalancers:e=>["project",e,"load-balancers"],replicaLag:(e,t)=>["project",e,"replica-lag",t]}},49812:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(80263),s=n(13730);n(53239);var r=n(25643),o=n(70800);function l(e){let{align:t="center",ariaLabel:n,arrow:r=!1,children:l,className:i,defaultOpen:c=!1,modal:d,onOpenChange:u,open:p,overlay:m,side:f="bottom",sideOffset:x=6,style:h,header:g,footer:y,size:b="content",disabled:v,"data-testid":j}=e,w=(0,o.A)("popover"),N=[w.content,w.size[b]];return i&&N.push(i),(0,a.jsxs)(s.bL,{defaultOpen:c,modal:d,onOpenChange:u,open:p,"data-sentry-element":"unknown","data-sentry-component":"Popover","data-sentry-source-file":"Popover.tsx",children:[(0,a.jsx)(s.l9,{disabled:v,className:w.trigger,"aria-label":n,"data-testid":j,"data-sentry-element":"unknown","data-sentry-source-file":"Popover.tsx",children:l}),(0,a.jsx)(s.ZL,{"data-sentry-element":"unknown","data-sentry-source-file":"Popover.tsx",children:(0,a.jsxs)(s.UC,{sideOffset:x,side:f,align:t,className:N.join(" "),style:h,"data-sentry-element":"unknown","data-sentry-source-file":"Popover.tsx",children:[r&&(0,a.jsx)(s.i3,{offset:10}),g&&(0,a.jsx)("div",{className:w.header,children:g}),m,y&&(0,a.jsx)("div",{className:w.footer,children:y})]})})]})}l.Separator=function(){let e=(0,o.A)("popover");return(0,a.jsx)("div",{className:e.separator,"data-sentry-component":"Separator","data-sentry-source-file":"Popover.tsx"})},l.Close=function(){let e=(0,o.A)("popover");return(0,a.jsx)(s.bm,{className:e.close,"data-sentry-element":"unknown","data-sentry-component":"Close","data-sentry-source-file":"Popover.tsx",children:(0,a.jsx)(r.A,{size:14,strokeWidth:2,"data-sentry-element":"X","data-sentry-source-file":"Popover.tsx"})})};let i=l},50348:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var a=n(56947),s=n(65172),r=n(63492),o=n(92403);async function l(e,t){let{projectRef:n}=e;if(!n)throw Error("projectRef is required");let{data:a,error:r}=await (0,s.Jt)("/platform/projects/{ref}/config/pgbouncer",{params:{path:{ref:n}},signal:t});return r&&(0,s.H4)(r),a}let i=function(e){let{projectRef:t}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(o.c.pgbouncerConfig(t),e=>{let{signal:n}=e;return l({projectRef:t},n)},{enabled:n&&void 0!==t&&r.pe,...s})}},52308:(e,t,n)=>{"use strict";n.d(t,{JB:()=>s,Jn:()=>u,NA:()=>r,U1:()=>c,Uw:()=>d,Vl:()=>i,Vm:()=>a,ou:()=>l,yP:()=>o});var a=function(e){return e[e.WEEK=604800]="WEEK",e[e.MONTH=2592e3]="MONTH",e[e.YEAR=31536e3]="YEAR",e}({}),s=function(e){return e.COLUMNS="COLUMNS",e.LIST="LIST",e}({}),r=function(e){return e.NAME="name",e.UPDATED_AT="updated_at",e.CREATED_AT="created_at",e.LAST_ACCESSED_AT="last_accessed_at",e}({}),o=function(e){return e.ALPHABETICAL="alphabetical",e.CREATED_AT="created_at",e}({}),l=function(e){return e.ASC="asc",e.DESC="desc",e}({}),i=function(e){return e.BUCKET="BUCKET",e.FILE="FILE",e.FOLDER="FOLDER",e}({}),c=function(e){return e.READY="READY",e.LOADING="LOADING",e.EDITING="EDITING",e}({});let d={upload:["INSERT"],download:["SELECT"],list:["SELECT"],update:["SELECT","UPDATE"],move:["SELECT","UPDATE"],copy:["SELECT","INSERT"],remove:["SELECT","DELETE"],createSignedUrl:["SELECT"],createSignedUrls:["SELECT"],getPublicUrl:[]},u={STORAGE_COLUMN:"STORAGE_COLUMN",STORAGE_ITEM:"STORAGE_ITEM",STORAGE_FOLDER:"STORAGE_FOLDER"}},53555:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var a=n(80263),s=n(51500);function r(e){let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...n,"data-sentry-component":"Skeleton","data-sentry-source-file":"skeleton.tsx"})}},54474:(e,t,n)=>{"use strict";n.d(t,{RE:()=>u,UZ:()=>d});var a=n(80263),s=n(53239),r=n(56028),o=n(12532),l=n(80535);function i(){let e=(0,r.BX)({selectedDatabaseId:void 0,setSelectedDatabaseId:t=>{e.selectedDatabaseId=t}});return e}let c=(0,s.createContext)(i()),d=e=>{let{children:t}=e,n=(0,l.MF)(i);return(0,a.jsx)(c.Provider,{value:n,"data-sentry-element":"unknown","data-sentry-component":"DatabaseSelectorStateContextProvider","data-sentry-source-file":"database-selector.tsx",children:t})};function u(e){let t=(0,s.useContext)(c);return(0,o.s)(t,e)}},54498:(e,t,n)=>{"use strict";n.d(t,{Jb:()=>s,OG:()=>r,Uj:()=>i,yO:()=>l});var a=n(73934);let s=(e,t)=>{if(e<=0)return{value:0,unit:a.s2.BYTES};let n=void 0!==t?Object.values(a.s2).indexOf(t):Math.floor(Math.log(e)/Math.log(1024)),s=void 0!==t?n<0?0:n:n>3?3:n,r=Object.values(a.s2)[s];return{value:e/Math.pow(1024,s),unit:r}},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.s2.BYTES,n=Object.values(a.s2).indexOf(t);return e<0||n<0?0:e*Math.pow(1024,n)};function o(e,t,n){return new URL(n?"".concat(t,"://").concat(n):"https://".concat(e,".storage.supabase.co"))}function l(e,t,n){let a=o(e,t,n);return a.pathname="/storage/v1/s3",a.toString()}function i(e,t,n){let a=o(e,t,n);return a.pathname="/storage/v1/iceberg",a.toString()}},55555:(e,t,n)=>{"use strict";n.d(t,{YD:()=>h,lW:()=>y,qm:()=>d,zv:()=>g});var a=n(80263),s=n(5483),r=n(53667),o=n.n(r),l=n(53239),i=n(56028),c=n(12532);let d={table:["r","v","m","f","p"],sql:["sql"]},u=e=>"".concat("supabase_recent_items","_").concat(e),p={activeTab:null,openTabs:[],tabsMap:{},previewTabId:void 0,recentItems:[]},m=e=>"".concat("supabase_studio_tabs","_").concat(e);function f(e){let t=function(e){if(!e)return[];let t=localStorage.getItem(u(e));try{return JSON.parse(null!=t?t:'{"items": []}').items}catch(e){return[]}}(e),{openTabs:n,activeTab:a,tabsMap:s,previewTabId:r}=function(e){if(!e)return p;let t=localStorage.getItem(m(e));if(!t)return p;try{let e=JSON.parse(null!=t?t:JSON.stringify(p));if(!e.openTabs||!Array.isArray(e.openTabs)||!e.tabsMap||"object"!=typeof e.tabsMap)return p;return e}catch(e){return p}}(e),l=(0,i.BX)({recentItems:t,addRecentItem:e=>{let t=l.recentItems.find(t=>t.id===e.id);if(t){t.timestamp=Date.now();return}let n={id:e.id,type:e.type,label:e.label||"Untitled",timestamp:Date.now(),metadata:e.metadata};l.recentItems.unshift(n);let[a,s]=o()(l.recentItems,e=>{if(d.table.includes(e.type))return e});l.recentItems=[...a.slice(0,8),...s]},clearRecentItems:()=>{l.recentItems=[]},removeRecentItem:e=>{l.recentItems=l.recentItems.filter(t=>t.id!==e)},removeRecentItems:e=>{l.recentItems=l.recentItems.filter(t=>!e.includes(t.id))},removeRecentItemsByType:e=>{l.recentItems=l.recentItems.filter(t=>t.type!==e)},getRecentItemsByType:e=>l.recentItems.filter(t=>t.type===e),activeTab:a,openTabs:n,tabsMap:s,previewTabId:r,addTab:e=>{if(!l.tabsMap[e.id]||l.activeTab!==e.id){if(l.tabsMap[e.id]){l.activeTab=e.id,e.isPreview||l.addRecentItem(e);return}if(!1===e.isPreview){l.openTabs=[...l.openTabs,e.id],l.tabsMap[e.id]=e,l.activeTab=e.id,l.addRecentItem(e);return}l.previewTabId&&(l.openTabs=l.openTabs.filter(e=>e!==l.previewTabId),delete l.tabsMap[l.previewTabId]),l.tabsMap[e.id]={...e,isPreview:!0},l.openTabs=[...l.openTabs,e.id],l.previewTabId=e.id,l.activeTab=e.id}},updateTab:(e,t)=>{l.tabsMap[e]&&("label"in t&&(l.tabsMap[e].label=t.label),"scrollTop"in t&&l.tabsMap[e].metadata&&(l.tabsMap[e].metadata.scrollTop=t.scrollTop))},removeTab:e=>{let t=l.openTabs.indexOf(e);l.openTabs=l.openTabs.filter(t=>t!==e),delete l.tabsMap[e],e===l.activeTab&&(l.activeTab=l.openTabs[t-1]||l.openTabs[t+1]||null)},removeTabs:e=>{e.length&&e.forEach(e=>l.removeTab(e))},reorderTabs:(e,t)=>{let n=[...l.openTabs],[a]=n.splice(e,1);n.splice(t,0,a),l.openTabs=n},makeTabActive:e=>{let t=l.tabsMap[e];t&&(l.activeTab=t.id)},makeTabPermanent:e=>{let t=l.tabsMap[e];(null==t?void 0:t.isPreview)&&(t.isPreview=!1,l.previewTabId=void 0,l.addRecentItem(t))},makeActiveTabPermanent:()=>{var e;return!!l.activeTab&&null!=(e=l.tabsMap[l.activeTab])&&!!e.isPreview&&(l.makeTabPermanent(l.activeTab),!0)},handleTabNavigation:(e,t)=>{var n,a,s;let r=l.tabsMap[e];if(r)switch(l.activeTab=e,!r.isPreview&&l.addRecentItem(r),r.type){case"sql":let o=t.query.schema||"public";t.push("/project/".concat(t.query.ref,"/sql/").concat(null==(n=r.metadata)?void 0:n.sqlId,"?schema=").concat(o));break;case"r":case"v":case"m":case"f":case"p":t.push("/project/".concat(t.query.ref,"/editor/").concat(null==(a=r.metadata)?void 0:a.tableId,"?schema=").concat(null==(s=r.metadata)?void 0:s.schema))}},handleTabClose:e=>{var t;let{id:n,router:a,editor:s,onClose:r,onClearDashboardHistory:o}=e,i=l.tabsMap[n],c=Object.values(l.tabsMap).filter(e=>e.id!==n),u=s?null==(t=c.filter(e=>{var t;return null==(t=d[s])?void 0:t.includes(e.type)})[0])?void 0:t.id:void 0,{[n]:p,...m}=l.tabsMap;if(l.tabsMap=m,i){let e=[...l.openTabs].filter(e=>e!==n);l.openTabs=e}if(l.previewTabId===n&&(l.previewTabId=void 0),l.activeTab===n||"new"===n)if(u)l.activeTab=u,l.handleTabNavigation(u,a);else switch(o(),null==i?void 0:i.type){case"sql":a.push("/project/".concat(a.query.ref,"/sql"));break;case"r":case"v":case"m":case"f":case"p":a.push("/project/".concat(a.query.ref,"/editor"));break;default:a.push("/project/".concat(a.query.ref,"/").concat(s))}null==r||r(n)},handleTabCloseAll:e=>{let{editor:t,router:n,onClearDashboardHistory:a}=e,s="table"===t?l.openTabs.filter(e=>!e.startsWith("sql")):l.openTabs.filter(e=>e.startsWith("sql"));l.removeTabs(s),a(),n.push("/project/".concat(n.query.ref,"/").concat("table"===t?"editor":"sql"))},handleTabDragEnd:(e,t,n,a)=>{let s=l.tabsMap[n];(null==s?void 0:s.isPreview)&&l.makeTabPermanent(n);let r=[...l.openTabs];r.splice(e,1),r.splice(t,0,n),l.openTabs=r,l.activeTab=n,l.handleTabNavigation(n,a)}});return l}let x=(0,l.createContext)(f("")),h=e=>{var t;let{children:n}=e,{data:r}=(0,s.YA)(),[o,c]=(0,l.useState)(f(null!=(t=null==r?void 0:r.ref)?t:""));return(0,l.useEffect)(()=>{if(null==r?void 0:r.ref){var e;c(f(null!=(e=null==r?void 0:r.ref)?e:""))}},[null==r?void 0:r.ref]),(0,l.useEffect)(()=>{if(null==r?void 0:r.ref)return(0,i.B1)(o,()=>{localStorage.setItem(m(null==r?void 0:r.ref),JSON.stringify({activeTab:o.activeTab,openTabs:o.openTabs,tabsMap:o.tabsMap,previewTabId:o.previewTabId})),localStorage.setItem(u(null==r?void 0:r.ref),JSON.stringify({items:o.recentItems}))})},[null==r?void 0:r.ref,o]),(0,a.jsx)(x.Provider,{value:o,"data-sentry-element":"unknown","data-sentry-component":"TabsStateContextProvider","data-sentry-source-file":"tabs.tsx",children:n})},g=e=>{let t=(0,l.useContext)(x);return(0,c.s)(t,e)};function y(e,t){switch(e){case"r":return"r-".concat(t.id);case"v":return"v-".concat(t.id);case"m":return"m-".concat(t.id);case"f":return"f-".concat(t.id);case"p":return"p-".concat(t.id);case"sql":return"sql-".concat(t.id);default:return""}}},55568:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(80263);n(53239);var s=n(28881),r=n(70800);function o(e){let{children:t,active:n}=e,o=(0,r.A)("loading"),l=[o.base],i=[o.content.base];n&&i.push(o.content.active);let c=[o.spinner];return(0,a.jsxs)("div",{className:l.join(" "),"data-sentry-component":"Loading","data-sentry-source-file":"Loading.tsx",children:[(0,a.jsx)("div",{className:i.join(" "),children:t}),n&&(0,a.jsx)(s.A,{size:24,className:c.join(" ")})]})}},56131:(e,t,n)=>{"use strict";n.d(t,{O:()=>a});let a={lint:e=>["projects",e,"lint"],lintRules:e=>["projects",e,"lint-rules"]}},58982:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});let a={users:(e,t)=>["projects",e,"users",...t?[t]:[]],usersInfinite:(e,t)=>["projects",e,"users-infinite",...t?[t].filter(Boolean):[]],usersCount:(e,t)=>["projects",e,"users-count",...t?[t].filter(Boolean):[]],authConfig:e=>["projects",e,"auth-config"],accessToken:()=>["access-token"]}},60018:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var a=n(80263),s=n(18687),r=n(63492);let o=(e,t,n,o)=>{var l,i,c;let d=(null==t?void 0:t.status)===r.BU.COMING_UP,u="/project/".concat(e),p=null==(l=null==o?void 0:o.auth)||l,m=null==(i=null==o?void 0:o.edgeFunctions)||i,f=null==(c=null==o?void 0:o.storage)||c;return[{title:"Project Settings",items:[{name:"General",key:"general",url:"/project/".concat(e,"/settings/general"),items:[]},...r.pe?[{name:"Compute and Disk",key:"compute-and-disk",url:"/project/".concat(e,"/settings/compute-and-disk"),items:[]}]:[],{name:"Infrastructure",key:"infrastructure",url:d?u:"/project/".concat(e,"/settings/infrastructure"),items:[]},...r.pe?[{name:"Integrations",key:"integrations",url:"/project/".concat(e,"/settings/integrations"),items:[]},{name:"Log Drains",key:"log-drains",url:"/project/".concat(e,"/settings/log-drains"),items:[]},{name:"Data API",key:"api",url:d?u:"/project/".concat(e,"/settings/api"),items:[]},{name:"API Keys",key:"api-keys",url:"/project/".concat(e,"/settings/api-keys"),items:[],label:"NEW"},{name:"JWT Keys",key:"jwt",url:"/project/".concat(e,"/settings/jwt"),items:[],label:"NEW"}]:[],{name:"Add Ons",key:"addons",url:"/project/".concat(e,"/settings/addons"),items:[]},{name:"Vault",key:"vault",url:d?u:"/project/".concat(e,"/integrations/vault/overview"),items:[],rightIcon:(0,a.jsx)(s.A,{strokeWidth:1,className:"h-4 w-4"}),label:"Alpha"}]},{title:"Configuration",items:[{name:"Database",key:"database",url:d?u:"/project/".concat(e,"/database/settings"),items:[],rightIcon:(0,a.jsx)(s.A,{strokeWidth:1,className:"h-4 w-4"})},...r.pe&&p?[{name:"Authentication",key:"auth",url:d?u:"/project/".concat(e,"/settings/auth"),items:[]}]:[],...r.pe&&f?[{name:"Storage",key:"storage",url:"/project/".concat(e,"/storage/settings"),items:[],rightIcon:(0,a.jsx)(s.A,{strokeWidth:1,className:"h-4 w-4"})}]:[],...r.pe&&m?[{name:"Edge Functions",key:"functions",url:"/project/".concat(e,"/functions/secrets"),items:[],rightIcon:(0,a.jsx)(s.A,{strokeWidth:1,className:"h-4 w-4"})}]:[]]},{title:"Billing",items:[{name:"Subscription",key:"subscription",url:"/org/".concat(null==n?void 0:n.slug,"/billing"),items:[],rightIcon:(0,a.jsx)(s.A,{strokeWidth:1,className:"h-4 w-4"})},{name:"Usage",key:"usage",url:"/org/".concat(null==n?void 0:n.slug,"/usage?projectRef=").concat(e),items:[],rightIcon:(0,a.jsx)(s.A,{strokeWidth:1,className:"h-4 w-4"})}]}]}},61179:(e,t,n)=>{"use strict";n.d(t,{W:()=>o});var a=n(43712),s=n(24400),r=n(53239);function o(){let{replace:e=!0,arrayKeys:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=JSON.stringify(t),o=(0,r.useMemo)(()=>new Set(t),[n]),l=(0,s.useRouter)(),i=(0,r.useMemo)(()=>Object.fromEntries(Object.entries(l.query).map(e=>{let[t,n]=e;return o.has(t)?Array.isArray(n)?[t,n]:[t,[n]]:[t,n]})),[o,l.query]),c=(0,a.A)(i);return[i,(0,r.useCallback)(t=>{let n=c.current,a="function"==typeof t?t(n):t,s=Object.fromEntries(Object.entries({...n,...a}).filter(e=>{let[,t]=e;return!!t}));(e?l.replace:l.push)({pathname:l.pathname,query:s},void 0,{shallow:!0,scroll:!1})},[l,e])]}},61662:(e,t,n)=>{"use strict";n.d(t,{s:()=>o,x:()=>l});var a=n(78358),s=n(88491),r=n.n(s);let o=e=>{var t;return r()(null!=(t=e.split("-"))?t:[])},l=e=>{var t,n;return null==(t=r()(null==(n=a.lI.find(t=>t.region===e))?void 0:n.name.split("(")))?void 0:t.split(")")[0]}},62136:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(80263),s=n(66623),r=n(40022);let o=e=>{let{href:t,abbrev:n=!0,className:o}=e;return(0,a.jsx)(r.$,{asChild:!0,type:"default",className:o,icon:(0,a.jsx)(s.A,{}),onClick:e=>e.stopPropagation(),"data-sentry-element":"Button","data-sentry-component":"DocsButton","data-sentry-source-file":"DocsButton.tsx",children:(0,a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:t,children:n?"Docs":"Documentation"})})}},63748:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var a=function(e){return e.Modification="modification",e.Addition="addition",e.NewSnippet="new-snippet",e}({})},63846:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});let a={list:e=>["projects",e,"enumerated-types"]}},64082:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var a=n(80263),s=n(51500),r=n(78721);let o=function(e){let{organization:t,showTooltip:n=!0,tooltipText:o="This organization is managed by Vercel Marketplace.",size:l="small"}=e;if("vercel-marketplace"===t.managed_by){let e=(0,a.jsx)("svg",{className:(0,s.cn)("small"===l&&"w-2.5 h-2.5","medium"===l&&"w-3.5 h-3.5","large"===l&&"w-5 h-5"),viewBox:"0 0 76 65",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M37.5274 0L75.0548 65H0L37.5274 0Z",fill:"hsl(var(--foreground-default) / 1)"})});return n?(0,a.jsxs)(r.m_,{children:[(0,a.jsx)(r.k$,{asChild:!0,children:(0,a.jsx)("div",{className:(0,s.cn)("bg-surface-100 dark:bg-surface-200 border rounded flex items-center justify-center hover:bg-surface-400 dark:hover:bg-surface-400 hover:border-stronger flex-shrink-0","small"===l&&"h-5 w-5","medium"===l&&"w-7 h-7","large"===l&&"w-10 h-10"),children:e})}),(0,a.jsx)(r.ZI,{children:o})]}):(0,a.jsx)("div",{className:(0,s.cn)("bg-surface-100 dark:bg-surface-200 border rounded flex items-center justify-center flex-shrink-0","small"===l&&"h-5 w-5","medium"===l&&"w-7 h-7","large"===l&&"w-10 h-10"),children:e})}return null}},64722:(e,t,n)=>{"use strict";n.d(t,{d:()=>i,v:()=>c});var a=n(32144),s=n(80251),r=n(73969),o=n(65172),l=n(2997);async function i(e,t){let{projectRef:n,payload:a}=e,{data:s,error:r}=await (0,o.yJ)("/platform/projects/{ref}/content",{params:{path:{ref:n}},body:a,headers:{Version:"2"},signal:t});return r&&(0,o.H4)(r),s}let c=function(){let{onError:e,onSuccess:t,invalidateQueriesOnSuccess:n=!0,...o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,a.jE)();return(0,s.n)(e=>i(e),{async onSuccess(e,a,s){let{projectRef:r}=a;n&&await c.invalidateQueries(l.M.allContentLists(r)),await (null==t?void 0:t(e,a,s))},async onError(t,n,a){void 0===e?r.oR.error("Failed to insert content: ".concat(t.message)):e(t,n,a)},...o})}},65216:(e,t,n)=>{"use strict";n.d(t,{A:()=>nC});var a=n(80263),s=n(24400),r=n(80535),o=n(25207),l=n(79880),i=n(1266),c=n(53434),d=n.n(c),u=n(53239),p=n(73969),m=n(56947),f=n(65172),x=n(63492);async function h(e){let t=await (0,f.x8)("".concat(x.o2,"/api/get-deployment-commit"));return await t.json()}let g=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.I)(["deployment-commit"],e=>{let{signal:t}=e;return h(t)},{...t})};var y=n(86254),b=n(40022),v=n(54660);let j=e=>{let{id:t}=e,n=(0,s.useRouter)();return(0,a.jsxs)("div",{className:"flex gap-3 flex-col w-full","data-sentry-component":"DeployCheckToast","data-sentry-source-file":"use-check-latest-deploy.tsx",children:[(0,a.jsxs)("div",{className:"flex gap-3 flex-row",children:[(0,a.jsx)(y.kW,{variant:"default",className:"mt-0.5","data-sentry-element":"StatusIcon","data-sentry-source-file":"use-check-latest-deploy.tsx"}),(0,a.jsxs)("div",{className:"flex w-full justify-between flex-col text-sm",children:[(0,a.jsx)("p",{className:"text-foreground",children:"A new version of this page is available"}),(0,a.jsx)("p",{className:"text-foreground-light",children:"Refresh to see the latest changes."})]})]}),(0,a.jsxs)("div",{className:"flex gap-5 justify-end",children:[(0,a.jsx)(b.$,{type:"outline",onClick:()=>p.oR.dismiss(t),"data-sentry-element":"Button","data-sentry-source-file":"use-check-latest-deploy.tsx",children:"Not now"}),(0,a.jsx)(b.$,{onClick:()=>n.reload(),"data-sentry-element":"Button","data-sentry-source-file":"use-check-latest-deploy.tsx",children:"Refresh"})]})]})};var w=n(86177),N=n(88712),k=n(37055),S=n(15601),C=n.n(S),_=n(72035),A=n(60045),R=n(70629),I=n(23445),P=n(32466),E=n(72259),L=n(46312),T=n(20313),D=n(16265),F=n(12578),z=n(90437),B=n(50348),M=n(757),O=n(6772),U=n(20438),W=n(57132),q=n(23385),H=n(34531),G=n(54474),V=n(51500),K=n(16838),$=n(40990),Y=n(55501),Z=n(55966),J=n(2119),Q=n(77635),X=n(47142);let ee=[{id:"uri",label:"URI",contentType:"input",lang:"bash",fileTitle:void 0},{id:"psql",label:"PSQL",contentType:"code",lang:"bash",fileTitle:void 0},{id:"golang",label:"Golang",contentType:"code",lang:"go",fileTitle:".env"},{id:"jdbc",label:"JDBC",contentType:"input",lang:"bash",fileTitle:void 0},{id:"dotnet",label:".NET",contentType:"code",lang:"csharp",fileTitle:"appsettings.json"},{id:"nodejs",label:"Node.js",contentType:"code",lang:"js",fileTitle:".env"},{id:"php",label:"PHP",contentType:"code",lang:"php",fileTitle:".env"},{id:"python",label:"Python",contentType:"code",lang:"python",fileTitle:".env"},{id:"sqlalchemy",label:"SQLAlchemy",contentType:"code",lang:"python",fileTitle:".env"}],et={host:{key:"host",description:"The hostname of your database"},port:{key:"port",description:"Port number for the connection"},database:{key:"database",description:"Default database name"},user:{key:"user",description:"Database user"},pool_mode:{key:"pool_mode",description:"Connection pooling behavior"}},en=[{key:"nextjs",label:"Next.js",icon:"nextjs",guideLink:"https://supabase.com/docs/guides/getting-started/quickstarts/nextjs",children:[{key:"app",label:"App Router",icon:"",children:[{key:"supabasejs",label:"supabase-js",icon:"supabase",children:[]}]},{key:"pages",label:"Pages Router",icon:"",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]}]},{key:"remix",label:"Remix",icon:"remix",guideLink:"https://supabase.com/docs/guides/auth/server-side/creating-a-client?framework=remix&environment=remix-loader",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]},{key:"react",label:"React",icon:"react",guideLink:"https://supabase.com/docs/guides/getting-started/quickstarts/reactjs",children:[{key:"create-react-app",label:"Create React App",icon:"react",children:[{key:"supabasejs",label:"supabase-js",icon:"supabase",children:[]}]},{key:"vite",label:"Vite",icon:"vite",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]}]},{key:"nuxt",label:"Nuxt",icon:"nuxt",guideLink:"https://supabase.com/docs/guides/getting-started/quickstarts/nuxtjs",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]},{key:"vuejs",label:"Vue.JS",icon:"vuejs",guideLink:"https://supabase.com/docs/guides/getting-started/quickstarts/vue",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]},{key:"sveltekit",label:"SvelteKit",icon:"sveltekit",guideLink:"https://supabase.com/docs/guides/getting-started/quickstarts/sveltekit",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]},{key:"solidjs",label:"Solid.js",icon:"solidjs",guideLink:"https://supabase.com/docs/guides/getting-started/quickstarts/solidjs",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]},{key:"astro",label:"Astro",icon:"astro",guideLink:"https://docs.astro.build/en/guides/backend/supabase/",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]},{key:"refine",label:"refine",icon:"refine",guideLink:"https://supabase.com/docs/guides/getting-started/quickstarts/refine",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]}],ea=[{key:"exporeactnative",label:"Expo React Native",icon:"expo",guideLink:"https://supabase.com/docs/guides/getting-started/tutorials/with-expo-react-native",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]},{key:"flutter",label:"Flutter",icon:"flutter",guideLink:"https://supabase.com/docs/guides/getting-started/tutorials/with-flutter",children:[{key:"supabaseflutter",label:"supabase-flutter",children:[],icon:"supabase"}]},{key:"ionicreact",label:"Ionic React",icon:"react",guideLink:"https://supabase.com/docs/guides/getting-started/tutorials/with-ionic-react",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]},{key:"swift",label:"Swift",icon:"swift",guideLink:"https://supabase.com/docs/guides/getting-started/tutorials/with-swift",children:[{key:"supabaseswift",label:"supabase-swift",children:[],icon:"supabase"}]},{key:"androidkotlin",label:"Android Kotlin",icon:"kotlin",guideLink:"https://supabase.com/docs/guides/getting-started/tutorials/with-kotlin",children:[{key:"supabasekt",label:"supabase-kt",children:[],icon:"supabase"}]},{key:"ionicangular",label:"Ionic Angular",icon:"ionic-angular",guideLink:"https://supabase.com/docs/guides/getting-started/tutorials/with-ionic-angular",children:[{key:"supabasejs",label:"Supabase-js",children:[],icon:"supabase"}]}],es=[{key:"prisma",label:"Prisma",icon:"prisma",guideLink:"https://supabase.com/partners/integrations/prisma",children:[]},{key:"drizzle",label:"Drizzle",icon:"drizzle",guideLink:"https://supabase.com/docs/guides/database/connecting-to-postgres#connecting-with-drizzle",children:[]}],er=[{key:"direct",label:"Connection String",obj:[]},{key:"frameworks",label:"App Frameworks",obj:en},{key:"mobiles",label:"Mobile Frameworks",obj:ea},{key:"orms",label:"ORMs",obj:es}],eo="Purchase IPv4 add-on or use Shared Pooler if on a IPv4 network",el="Connections are IPv4 proxied with IPv4 add-on";var ei=n(25643),ec=n(47831),ed=n(95043),eu=n(80903),ep=n(29012),em=n(52647);let ef=e=>{let{parameters:t}=e,[n,s]=(0,u.useState)(!1),[r,o]=(0,u.useState)({});return(0,a.jsxs)(Z.Nt,{open:n,onOpenChange:s,className:"group -space-y-px","data-sentry-element":"Collapsible_Shadcn_","data-sentry-component":"ConnectionParameters","data-sentry-source-file":"ConnectionParameters.tsx",children:[(0,a.jsx)(Z.R6,{asChild:!0,className:"w-full justify-start rounded-t-none !last:rounded-b group-data-[state=open]:rounded-b-none border-light px-3","data-sentry-element":"CollapsibleTrigger_Shadcn_","data-sentry-source-file":"ConnectionParameters.tsx",children:(0,a.jsx)(b.$,{type:"default",size:"tiny",className:"text-foreground-lighter !bg-dash-sidebar",icon:(0,a.jsx)(ed.A,{className:(0,V.cn)("text-foreground-muted transition-transform",n?"rotate-90":"")}),"data-sentry-element":"Button","data-sentry-source-file":"ConnectionParameters.tsx",children:"View parameters"})}),(0,a.jsxs)(Z.Ke,{className:"bg-dash-sidebar rounded-b border font-mono text-sm","data-sentry-element":"CollapsibleContent_Shadcn_","data-sentry-source-file":"ConnectionParameters.tsx",children:[(0,a.jsx)("div",{className:"px-4 py-2",children:t.map(e=>(0,a.jsx)("div",{className:"py-0.5 group/param",children:(0,a.jsxs)("div",{className:"text-xs flex items-center",children:[(0,a.jsxs)("span",{className:"text-foreground-lighter",children:[e.key,": "]}),(0,a.jsx)("span",{className:"ml-1 text-foreground",children:e.value}),(0,a.jsx)("button",{onClick:()=>{(0,em.l)(e.value,()=>{o(t=>({...t,[e.key]:!0})),setTimeout(()=>{o(t=>({...t,[e.key]:!1}))},1e3)})},className:(0,V.cn)("text-foreground-lighter","ml-2 opacity-0 group-hover/param:opacity-100","hover:text-foreground rounded-sm p-1",r[e.key]&&"opacity-100","transition-all"),children:r[e.key]?(0,a.jsx)(eu.A,{size:12,strokeWidth:1.5}):(0,a.jsx)(ep.A,{size:12,strokeWidth:1.5})})]})},e.key))}),(0,a.jsx)(Q.w,{"data-sentry-element":"Separator","data-sentry-source-file":"ConnectionParameters.tsx"}),(0,a.jsx)("div",{className:"text-foreground-muted text-xs px-4 py-1 font-sans",children:"For security reasons, your database password is never shown."})]})]})};var ex=n(90777);let eh=e=>{let{x:t,y1:n,y2:s,isActive:r}=e;return(0,a.jsx)(N.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"FlowingLine","data-sentry-source-file":"PoolerIcons.tsx",children:r&&(0,a.jsxs)("svg",{width:2,height:s-n+6,viewBox:"0 0 ".concat(2," ").concat(s-n+6),style:{position:"absolute",left:t-1,top:n-3},children:[(0,a.jsx)(k.P.line,{x1:"1",y1:"3",x2:"1",y2:s-n+3,stroke:"hsl(var(--foreground-default) / 0.6)",strokeWidth:1,strokeLinecap:"round",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},exit:{pathLength:0,opacity:0},transition:{duration:.2}}),(0,a.jsx)("defs",{children:(0,a.jsxs)(k.P.linearGradient,{id:"lineGradient-".concat(t,"-").concat(n,"-").concat(s),gradientUnits:"userSpaceOnUse",x1:"2",y1:"-20",x2:"2",y2:s-n+26,animate:{y1:[-20,s-n+26],y2:[0,s-n+46]},transition:{duration:1,repeat:1/0,ease:"linear",repeatDelay:0},children:[(0,a.jsx)("stop",{offset:"0",stopColor:"hsl(var(--foreground-default) / 0.6)",stopOpacity:"0"}),(0,a.jsx)("stop",{offset:"0.8",stopColor:"hsl(var(--foreground-default))"}),(0,a.jsx)("stop",{offset:"1",stopColor:"hsl(var(--foreground-default) / 0.6)",stopOpacity:"0"})]})}),(0,a.jsx)(k.P.line,{x1:"2",y1:"3",x2:"2",y2:s-n+3,stroke:"url(#lineGradient-".concat(t,"-").concat(n,"-").concat(s,")"),strokeWidth:1,strokeLinecap:"round",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})]})})},eg=e=>{let{isActive:t}=e;return(0,a.jsx)(k.P.rect,{width:ew,height:3,className:(0,V.cn)("fill-background-surface-200 stroke-border-stronger stroke-[1]",t&&"stroke-foreground/40"),x:ej,y:eb,rx:"1.5",animate:{boxShadow:t?"0 0 8px #86efac":"0 0 0px #86efac"},transition:{duration:.2},"data-sentry-element":"unknown","data-sentry-component":"TopRect","data-sentry-source-file":"PoolerIcons.tsx"})},ey=e=>{let{isActive:t}=e;return(0,a.jsxs)("g",{"data-sentry-element":"g","data-sentry-component":"BottomRect","data-sentry-source-file":"PoolerIcons.tsx",children:[(0,a.jsx)(k.P.rect,{width:ew,height:32,className:(0,V.cn)("stroke-border fill-background-surface-100 stroke-[1] transition-all",t&&"fill-background-surface-100 stroke-border-stronger","flex items-center justify-center"),x:ej,y:ev,rx:"4",animate:{fill:t?"#2563eb":"#1e40af",stroke:"#93c5fd",boxShadow:t?"0 0 8px #93c5fd":"0 0 0px #93c5fd"},transition:{duration:.2},"data-sentry-element":"unknown","data-sentry-source-file":"PoolerIcons.tsx"}),(0,a.jsx)(ex.Wm,{size:21,className:(0,V.cn)("w-4 h-4 text-foreground-lighter transition-all",t&&"text-foreground"),x:ej+ew/6,y:ev+5.5,strokeWidth:1,"data-sentry-element":"Database","data-sentry-source-file":"PoolerIcons.tsx"})]})},eb=30.72,ev=61.44,ej=8.16,ew=32.160000000000004,eN=()=>{let[e,t]=(0,u.useState)([!1,!1,!1]),[n,s]=(0,u.useState)([!1,!1,!1]),[r,o]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{o(n.some(Boolean))},[n]),(0,u.useEffect)(()=>{let e=e=>{t(t=>{let n=[...t];return n[e]=!1,n}),s(t=>{let n=[...t];return n[e]=!1,n}),setTimeout(()=>{t(t=>{let n=[...t];return n[e]=!0,n})},0),setTimeout(()=>{s(t=>{let n=[...t];return n[e]=!0,n})},400),setTimeout(()=>{t(t=>{let n=[...t];return n[e]=!1,n}),s(t=>{let n=[...t];return n[e]=!1,n})},1e3)};setTimeout(()=>e(0),0),setTimeout(()=>e(1),200),setTimeout(()=>e(2),400);let n=[0,1,2].map(t=>setInterval(()=>e(t),3e3+200*t));return()=>n.forEach(clearInterval)},[]),(0,a.jsxs)("div",{style:{position:"relative",width:48,height:96},"data-sentry-component":"TransactionIcon","data-sentry-source-file":"PoolerIcons.tsx",children:[(0,a.jsxs)("svg",{width:48,height:96,viewBox:"0 0 ".concat(48," ").concat(96),"data-sentry-element":"svg","data-sentry-source-file":"PoolerIcons.tsx",children:[[0,1,2].map(t=>(0,a.jsx)(u.Fragment,{children:(0,a.jsx)(N.N,{children:e[t]&&(0,a.jsx)(k.P.circle,{cx:12+12*t,cy:12.48,r:2.64,className:"fill-foreground",initial:{scale:0,x:[-8,-5,-2][t],y:-10},animate:{scale:1,x:0,y:0},exit:{scale:0,x:[8,5,2][t],y:-10},transition:{type:"spring",stiffness:500,damping:30}})})},t)),(0,a.jsx)(eg,{isActive:r,"data-sentry-element":"TopRect","data-sentry-source-file":"PoolerIcons.tsx"}),(0,a.jsx)(ey,{isActive:!0,"data-sentry-element":"BottomRect","data-sentry-source-file":"PoolerIcons.tsx"})]}),[0,1,2].map(e=>(0,a.jsx)(eh,{x:12+12*e,y1:17.28,y2:26.880000000000003,isActive:n[e]},e)),(0,a.jsx)(eh,{x:18,y1:38.400000000000006,y2:56.64,isActive:!0,"data-sentry-element":"FlowingLine","data-sentry-source-file":"PoolerIcons.tsx"}),(0,a.jsx)(eh,{x:30,y1:38.400000000000006,y2:56.64,isActive:!0,"data-sentry-element":"FlowingLine","data-sentry-source-file":"PoolerIcons.tsx"})]})},ek=()=>{let[e,t]=(0,u.useState)([!1,!1,!1]),[n,s]=(0,u.useState)([!1,!1,!1]);return(0,u.useEffect)(()=>{let e=e=>{t(t=>{let n=[...t];return n[e]=!0,n}),s(t=>{let n=[...t];return n[e]=!0,n}),setTimeout(()=>{t(t=>{let n=[...t];return n[e]=!1,n}),s(t=>{let n=[...t];return n[e]=!1,n})},2500)};setTimeout(()=>e(0),100),setTimeout(()=>e(1),1500),setTimeout(()=>e(2),3e3);let n=[0,1,2].map(t=>setInterval(()=>e(t),3e3*Math.random()+8e3));return()=>n.forEach(clearInterval)},[]),(0,a.jsxs)("div",{style:{position:"relative",width:48,height:96},"data-sentry-component":"DirectConnectionIcon","data-sentry-source-file":"PoolerIcons.tsx",children:[(0,a.jsxs)("svg",{width:48,height:96,viewBox:"0 0 ".concat(48," ").concat(96),"data-sentry-element":"svg","data-sentry-source-file":"PoolerIcons.tsx",children:[[0,1,2].map(t=>(0,a.jsx)(u.Fragment,{children:(0,a.jsx)(N.N,{children:e[t]&&(0,a.jsx)(k.P.circle,{cx:12+12*t,cy:12.48,r:2.64,className:"fill-foreground",initial:{scale:0,x:[-8,-5,-2][t],y:-10},animate:{scale:1,x:0,y:0},exit:{scale:0,x:[8,5,2][t],y:-10},transition:{type:"spring",stiffness:500,damping:30}})})},t)),(0,a.jsx)(ey,{isActive:n.some(e=>e),"data-sentry-element":"BottomRect","data-sentry-source-file":"PoolerIcons.tsx"})]}),[0,1,2].map(e=>(0,a.jsx)(eh,{x:12+12*e,y1:17.28,y2:56.64,isActive:n[e]},e))]})},eS=e=>{let{className:t,active:n}=e;return(0,a.jsxs)("div",{className:(0,V.cn)("relative inline-flex",t),"data-sentry-component":"IPv4StatusIcon","data-sentry-source-file":"ConnectionPanel.tsx",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1",stroke:"currentColor",className:"size-6 stroke-foreground-lighter","data-sentry-element":"svg","data-sentry-source-file":"ConnectionPanel.tsx",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418","data-sentry-element":"path","data-sentry-source-file":"ConnectionPanel.tsx"})}),n?(0,a.jsx)("div",{className:"absolute -right-1.5 -top-1.5 bg-brand-500 rounded w-4 h-4 flex items-center justify-center",children:(0,a.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M8.33325 2.5L3.74992 7.08333L1.66659 5",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):(0,a.jsx)("div",{className:"absolute -right-1.5 -top-1.5 bg-destructive rounded w-4 h-4 flex items-center justify-center",children:(0,a.jsx)(ei.A,{size:10,strokeWidth:4,className:"text-white rounded-full"})})]})},eC=e=>{let{title:t}=e;return(0,a.jsx)("div",{className:"flex items-center justify-between px-4 py-1 bg-surface-100/50 border border-b-0 border-surface rounded-t","data-sentry-component":"CodeBlockFileHeader","data-sentry-source-file":"ConnectionPanel.tsx",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ec.A,{size:12,className:"text-foreground-muted",strokeWidth:1.5,"data-sentry-element":"FileCode","data-sentry-source-file":"ConnectionPanel.tsx"}),(0,a.jsx)("span",{className:"text-xs text-foreground-light",children:t})]})})},e_=e=>{var t;let{type:n="direct",badge:s,title:o,description:l,connectionString:i,ipv4Status:c,notice:d,parameters:u=[],lang:p="bash",fileTitle:m,children:f,onCopyCallback:h}=e,{ref:g}=(0,r.g)(),v=(0,G.RE)(),{data:j}=(0,M.A)({projectRef:g}),w=null==j?void 0:j.find(e=>e.identifier===v.selectedDatabaseId),N=(null==w?void 0:w.pool_mode)==="session",k=null!=(t=c.links)?t:[];return(0,a.jsxs)("div",{className:"flex flex-col gap-5 lg:grid lg:grid-cols-2 lg:gap-20 w-full","data-sentry-component":"ConnectionPanel","data-sentry-source-file":"ConnectionPanel.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2 mb-2",children:[(0,a.jsx)("h1",{className:"text-sm",children:o}),!!s&&(0,a.jsx)(J.E,{children:s})]}),(0,a.jsx)("p",{className:"text-sm text-foreground-light mb-4",children:l}),(0,a.jsxs)("div",{className:"flex flex-col -space-y-px",children:[m&&(0,a.jsx)(eC,{title:m}),"transaction"===n&&N?(0,a.jsx)(X.Z,{showIcon:!1,type:"default",className:"[&>h5]:text-xs [&>div]:text-xs",title:"Transaction pooler is unavailable as pool mode is set to Session",description:"If you'd like to use transaction mode, update your pool mode to Transaction for the connection pooler in your project's Database Settings.",children:(0,a.jsx)(b.$,{asChild:!0,type:"default",className:"mt-2",children:(0,a.jsx)(C(),{href:"/project/".concat(g,"/database/settings#connection-pooler"),className:"text-xs text-light hover:text-foreground",children:"Database Settings"})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.N,{wrapperClassName:(0,V.cn)("[&_pre]:rounded-b-none [&_pre]:px-4 [&_pre]:py-3",m&&"[&_pre]:rounded-t-none"),language:p,value:i,className:"[&_code]:text-[12px] [&_code]:text-foreground",hideLineNumbers:!0,onCopyCallback:h}),d&&(0,a.jsx)("div",{className:"border px-4 py-1 w-full justify-start rounded-t-none !last:rounded-b group-data-[state=open]:rounded-b-none border-light",children:null==d?void 0:d.map(e=>(0,a.jsx)("p",{className:"text-xs text-foreground-lighter",children:e},e))}),u.length>0&&(0,a.jsx)(ef,{parameters:u})]}),f]})]}),(0,a.jsx)("div",{className:"flex flex-col items-end",children:(0,a.jsxs)("div",{className:"flex flex-col -space-y-px w-full",children:["session"!==n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative border border-muted px-5 flex items-center gap-3 py-3 first:rounded-t last:rounded-b h-[58px]",children:[(0,a.jsx)("div",{className:"absolute top-2 left-2.5",children:"transaction"===n?(0,a.jsx)(eN,{}):(0,a.jsx)(ek,{})}),(0,a.jsx)("div",{className:"flex flex-col pl-[52px]",children:(0,a.jsx)("span",{className:"text-xs text-foreground",children:"transaction"===n?"Suitable for a large number of connected clients":"Suitable for long-lived, persistent connections"})})]}),(0,a.jsx)("div",{className:"border border-muted px-5 flex items-center gap-3 py-3 first:rounded-t last:rounded-b h-[58px]",children:(0,a.jsx)("div",{className:"flex flex-col pl-[52px]",children:(0,a.jsx)("span",{className:"text-xs text-foreground",children:"transaction"===n?"Pre-warmed connection pool to Postgres":"Each client has a dedicated connection to Postgres"})})})]}),x.pe&&(0,a.jsxs)("div",{className:"border border-muted px-5 flex gap-7 items-center py-3 first:rounded-t last:rounded-b",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(eS,{active:"success"===c.type})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xs text-foreground",children:c.title}),c.description&&("string"==typeof c.description?(0,a.jsx)("span",{className:"text-xs text-foreground-lighter",children:c.description}):c.description),k.length>0&&(0,a.jsx)("div",{className:"flex items-center gap-x-2 mt-2",children:k.map(e=>(0,a.jsx)(b.$,{asChild:!0,type:"default",size:"tiny",children:(0,a.jsx)(C(),{href:e.url,className:"text-xs text-light hover:text-foreground",children:e.text})},e.text))})]})]}),"session"===n&&(0,a.jsxs)("div",{className:"border border-muted px-5 flex gap-7 items-center py-3 first:rounded-t last:rounded-b bg-alternative/50",children:[(0,a.jsx)("div",{className:"flex w-6 h-6 rounded items-center justify-center gap-2 flex-shrink-0 bg-surface-100",children:(0,a.jsx)(y.id,{})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xs text-foreground",children:"Only use on a IPv4 network"}),(0,a.jsx)("span",{className:"text-xs text-foreground-lighter",children:"Use Direct Connection if connecting via an IPv6 network"})]})]}),x.pe&&"error"===c.type&&(0,a.jsxs)(Z.Nt,{className:"group -space-y-px",children:[(0,a.jsx)(Z.R6,{asChild:!0,className:"group/collapse w-full justify-start rounded-t-none !last:rounded-b group-data-[state=open]:rounded-b-none border-muted",children:(0,a.jsx)(b.$,{type:"default",size:"tiny",className:"text-foreground-lighter !bg-dash-sidebar",icon:(0,a.jsx)(ed.A,{className:(0,V.cn)("group-data-[state=open]/collapse:rotate-90 text-foreground-muted transition-transform")}),children:"Some platforms are IPv4-only:"})}),(0,a.jsx)(Z.Ke,{className:"bg-dash-sidebar rounded-b border px-3 py-2",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light max-w-xs",children:"A few major platforms are IPv4-only and may not work with a Direct Connection:"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("div",{className:"text-foreground text-xs",children:"Vercel"}),(0,a.jsx)("div",{className:"text-foreground text-xs",children:"GitHub Actions"}),(0,a.jsx)("div",{className:"text-foreground text-xs",children:"Render"}),(0,a.jsx)("div",{className:"text-foreground text-xs",children:"Retool"})]}),(0,a.jsxs)("p",{className:"text-xs text-foreground-lighter max-w-xs",children:["If you wish to use a Direct Connection with these, please purchase"," ",(0,a.jsx)(C(),{href:"/project/".concat(g,"/settings/addons?panel=ipv4"),className:"text-xs text-light hover:text-foreground",children:"IPv4 support"}),"."]}),(0,a.jsxs)("p",{className:"text-xs text-foreground-lighter max-w-xs",children:["You may also use the"," ",(0,a.jsx)("span",{className:"text-foreground-light",children:"Session Pooler"})," or"," ",(0,a.jsx)("span",{className:"text-foreground-light",children:"Transaction Pooler"})," if you are on a IPv4 network."]})]})})]})]})})]})};var eA=n(96872);let eR={nodejs:{installCommands:["npm install postgres"],files:[{name:"db.js",content:"import postgres from 'postgres'\n\nconst connectionString = process.env.DATABASE_URL\nconst sql = postgres(connectionString)\n\nexport default sql"}]},golang:{installCommands:["go get github.com/jackc/pgx/v5"],files:[{name:"main.go",content:'package main\n\nimport (\n	"context"\n	"log"\n	"os"\n	"github.com/jackc/pgx/v5"\n)\n\nfunc main() {\n	conn, err := pgx.Connect(context.Background(), os.Getenv("DATABASE_URL"))\n	if err != nil {\n		log.Fatalf("Failed to connect to the database: %v", err)\n	}\n	defer conn.Close(context.Background())\n\n	// Example query to test connection\n	var version string\n	if err := conn.QueryRow(context.Background(), "SELECT version()").Scan(&version); err != nil {\n		log.Fatalf("Query failed: %v", err)\n	}\n\n	log.Println("Connected to:", version)\n}'}]},dotnet:{installCommands:["dotnet add package Microsoft.Extensions.Configuration.Json --version YOUR_DOTNET_VERSION"],postInstallCommands:["dotnet add package Microsoft.Extensions.Configuration.Json --version YOUR_DOTNET_VERSION"]},python:{installCommands:["pip install python-dotenv psycopg2"],files:[{name:"main.py",content:'import psycopg2\nfrom dotenv import load_dotenv\nimport os\n\n# Load environment variables from .env\nload_dotenv()\n\n# Fetch variables\nUSER = os.getenv("user")\nPASSWORD = os.getenv("password")\nHOST = os.getenv("host")\nPORT = os.getenv("port")\nDBNAME = os.getenv("dbname")\n\n# Connect to the database\ntry:\n    connection = psycopg2.connect(\n        user=USER,\n        password=PASSWORD,\n        host=HOST,\n        port=PORT,\n        dbname=DBNAME\n    )\n    print("Connection successful!")\n    \n    # Create a cursor to execute SQL queries\n    cursor = connection.cursor()\n    \n    # Example query\n    cursor.execute("SELECT NOW();")\n    result = cursor.fetchone()\n    print("Current Time:", result)\n\n    # Close the cursor and connection\n    cursor.close()\n    connection.close()\n    print("Connection closed.")\n\nexcept Exception as e:\n    print(f"Failed to connect: {e}")'}]},sqlalchemy:{installCommands:["pip install python-dotenv sqlalchemy psycopg2"],files:[{name:"main.py",content:'from sqlalchemy import create_engine\n# from sqlalchemy.pool import NullPool\nfrom dotenv import load_dotenv\nimport os\n\n# Load environment variables from .env\nload_dotenv()\n\n# Fetch variables\nUSER = os.getenv("user")\nPASSWORD = os.getenv("password")\nHOST = os.getenv("host")\nPORT = os.getenv("port")\nDBNAME = os.getenv("dbname")\n\n# Construct the SQLAlchemy connection string\nDATABASE_URL = f"postgresql+psycopg2://{USER}:{PASSWORD}@{HOST}:{PORT}/{DBNAME}?sslmode=require"\n\n# Create the SQLAlchemy engine\nengine = create_engine(DATABASE_URL)\n# If using Transaction Pooler or Session Pooler, we want to ensure we disable SQLAlchemy client side pooling -\n# https://docs.sqlalchemy.org/en/20/core/pooling.html#switching-pool-implementations\n# engine = create_engine(DATABASE_URL, poolclass=NullPool)\n\n# Test the connection\ntry:\n    with engine.connect() as connection:\n        print("Connection successful!")\nexcept Exception as e:\n    print(f"Failed to connect: {e}")'}]}},eI=e=>{let{number:t,children:n,...s}=e;return(0,a.jsxs)("div",{...s,className:(0,V.cn)("flex items-center gap-2",s.className),"data-sentry-component":"StepLabel","data-sentry-source-file":"DatabaseConnectionString.tsx",children:[(0,a.jsx)("div",{className:"flex font-mono text-xs items-center justify-center w-6 h-6 border border-strong rounded-md bg-surface-100",children:t}),(0,a.jsx)("span",{children:n})]})},eP=()=>{var e,t,n,s,o,l,i,c,d,p,m,f,h,g,y,v,j,w,N,k,S,C,_;let{ref:A}=(0,r.g)(),{data:R}=(0,q.s)(),I=(0,G.RE)(),[P,en]=(0,u.useState)("uri"),ea=(0,u.useMemo)(()=>{var e;return(null==R||null==(e=R.plan)?void 0:e.id)==="free"},[R]),{data:es,error:er,isLoading:ei,isError:ec,isSuccess:ed}=(0,B.N)({projectRef:A}),{data:eu,error:ep,isLoading:em,isError:ef,isSuccess:ex}=(0,M.A)({projectRef:A}),{data:eh,error:eg,isLoading:ey,isError:eb,isSuccess:ev}=(0,O.Vh)({projectRef:A}),ej=!!x.pe&&(ea?ei:em),ew=x.pe?ea?ec:ef:void 0,eN=!x.pe||(ea?ed:ex),ek=null==eu?void 0:eu.find(e=>e.identifier===I.selectedDatabaseId),eS=ea?ek:es,eP=(null!=eh?eh:[]).find(e=>e.identifier===I.selectedDatabaseId),eE=(null==eP?void 0:eP.identifier)!==A,{data:eL}=(0,U.Q)({projectRef:A}),{ipv4:eT}=(0,L.EN)(null!=(s=null==eL?void 0:eL.selected_addons)?s:[]),{mutate:eD}=(0,W.h)(),eF=(0,H.Av)(eP||{db_user:"",db_host:"",db_port:"",db_name:""},["db_host","db_name","db_port","db_user","inserted_at"]),ez=(e,t)=>{var n,a,s;let r=ee.find(t=>t.id===e);eD({action:"connection_string_copied",properties:{connectionType:null!=(n=null==r?void 0:r.label)?n:"Unknown",lang:null!=(a=null==r?void 0:r.lang)?a:"Unknown",connectionMethod:t},groups:{project:null!=A?A:"Unknown",organization:null!=(s=null==R?void 0:R.slug)?s:"Unknown"}})},eB=(0,eA.H)({connectionInfo:eF,poolingInfo:{connectionString:null!=(o=null==ek?void 0:ek.connection_string)?o:"",db_host:eE?eF.db_host:null!=(l=null==ek?void 0:ek.db_host)?l:"",db_name:null!=(i=null==ek?void 0:ek.db_name)?i:"",db_port:null!=(c=null==ek?void 0:ek.db_port)?c:0,db_user:null!=(d=null==ek?void 0:ek.db_user)?d:""},metadata:{projectRef:A}}),eM=(0,eA.H)({connectionInfo:eF,poolingInfo:{connectionString:eE?null!=(p=null==eS?void 0:eS.connection_string.replace(null==eS?void 0:eS.db_host,eF.db_host))?p:"":null!=(m=null==eS?void 0:eS.connection_string)?m:"",db_host:eE?eF.db_host:null==eS?void 0:eS.db_host,db_name:null!=(f=null==eS?void 0:eS.db_name)?f:"",db_port:null!=(h=null==eS?void 0:eS.db_port)?h:0,db_user:null!=(g=null==eS?void 0:eS.db_user)?g:""},metadata:{projectRef:A}}),eO=null!=(y=null==(e=ee.find(e=>e.id===P))?void 0:e.lang)?y:"bash",eU=null!=(v=null==(t=ee.find(e=>e.id===P))?void 0:t.contentType)?v:"input",eW=eR[P],eq=null==eW?void 0:eW.files,eH=null==eW?void 0:eW.installCommands,eG=null==eW?void 0:eW.postInstallCommands,eV=eq||eH,eK=null==(n=ee.find(e=>e.id===P))?void 0:n.fileTitle,e$=0,eY={text:"Pooler settings",url:"/project/".concat(A,"/database/settings#connection-pooling")},eZ=eT?[{text:"IPv4 settings",url:"/project/".concat(A,"/settings/addons?panel=ipv4")},...ea?[eY]:[]]:[{text:"IPv4 add-on",url:"/project/".concat(A,"/settings/addons?panel=ipv4")},...ea?[eY]:[]];return(0,a.jsxs)("div",{className:"flex flex-col","data-sentry-component":"DatabaseConnectionString","data-sentry-source-file":"DatabaseConnectionString.tsx",children:[(0,a.jsxs)("div",{className:(0,V.cn)("flex flex-col md:flex-row items-stretch md:items-center gap-2 md:gap-3",K.UP),children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("span",{className:"flex items-center text-foreground-lighter px-3 rounded-lg rounded-r-none text-xs border border-button border-r-0",children:"Type"}),(0,a.jsxs)($.l6,{value:P,onValueChange:e=>en(e),"data-sentry-element":"Select_Shadcn_","data-sentry-source-file":"DatabaseConnectionString.tsx",children:[(0,a.jsx)($.bq,{size:"small",className:"w-auto rounded-l-none","data-sentry-element":"SelectTrigger_Shadcn_","data-sentry-source-file":"DatabaseConnectionString.tsx",children:(0,a.jsx)($.yv,{"data-sentry-element":"SelectValue_Shadcn_","data-sentry-source-file":"DatabaseConnectionString.tsx"})}),(0,a.jsx)($.gC,{"data-sentry-element":"SelectContent_Shadcn_","data-sentry-source-file":"DatabaseConnectionString.tsx",children:ee.map(e=>(0,a.jsx)($.eb,{value:e.id,children:e.label},e.id))})]})]}),(0,a.jsx)(D.A,{portal:!1,buttonProps:{size:"small"},"data-sentry-element":"DatabaseSelector","data-sentry-source-file":"DatabaseConnectionString.tsx"})]}),(ej||ey)&&(0,a.jsx)("div",{className:"p-7",children:(0,a.jsx)(z.A,{className:"h-8 w-full"})}),(ew||eb)&&(0,a.jsx)("div",{className:"p-7",children:(0,a.jsx)(T.A,{error:(ea?er:ep)||eg,subject:"Failed to retrieve database settings"})}),eN&&ev&&(0,a.jsxs)("div",{className:"flex flex-col divide-y divide-border",children:[eV&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-x-20 w-full px-4 md:px-7 py-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(eI,{number:++e$,className:"mb-4",children:"Install the following"}),null==eH?void 0:eH.map((e,t)=>(0,a.jsx)(Y.N,{className:"[&_code]:text-[12px] [&_code]:text-foreground",value:e,hideLineNumbers:!0,language:"bash",children:e},t))]}),eq&&(null==eq?void 0:eq.length)>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)(eI,{number:++e$,className:"mb-4",children:"Add file to project"}),null==eq?void 0:eq.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(eC,{title:e.name}),(0,a.jsx)(Y.N,{wrapperClassName:"[&_pre]:max-h-40 [&_pre]:px-4 [&_pre]:py-3 [&_pre]:rounded-t-none",value:e.content,hideLineNumbers:!0,language:eO,className:"[&_code]:text-[12px] [&_code]:text-foreground"})]},t))]})]}),(0,a.jsxs)("div",{children:[eV&&(0,a.jsx)("div",{className:"px-4 md:px-7 pt-8",children:(0,a.jsx)(eI,{number:++e$,children:"Choose type of connection"})}),(0,a.jsxs)("div",{className:"divide-y divide-border-muted [&>div]:px-4 [&>div]:md:px-7 [&>div]:py-8",children:[(0,a.jsx)(e_,{type:"direct",title:"Direct connection",contentType:eU,lang:eO,fileTitle:eK,description:"Ideal for applications with persistent, long-lived connections, such as those running on virtual machines or long-standing containers.",connectionString:eM.direct[P],ipv4Status:{type:eT?"success":"error",title:eT?"IPv4 compatible":"Not IPv4 compatible",description:ea||eT?ea?"Use Session Pooler if on a IPv4 network or purchase IPv4 add-on":el:eo,links:eZ},parameters:[{...et.host,value:eF.db_host},{...et.port,value:eF.db_port},{...et.database,value:eF.db_name},{...et.user,value:eF.db_user}],onCopyCallback:()=>ez(P,"direct")}),x.pe&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e_,{type:"transaction",title:"Transaction pooler",contentType:eU,lang:eO,badge:ea?"Shared Pooler":"Dedicated Pooler",fileTitle:eK,description:"Ideal for stateless applications like serverless functions where each interaction with Postgres is brief and isolated.",connectionString:eM.pooler[P],ipv4Status:{type:ea||eT?"success":"error",title:ea||eT?"IPv4 compatible":"Not IPv4 compatible",description:ea||eT?ea?"Transaction pooler connections are IPv4 proxied for free.":el:eo,links:ea?void 0:eZ},notice:["Does not support PREPARE statements"],parameters:[{...et.host,value:null!=(j=null==eS?void 0:eS.db_host)?j:""},{...et.port,value:null!=(w=null==eS?void 0:eS.db_port.toString())?w:"6543"},{...et.database,value:null!=(N=null==eS?void 0:eS.db_name)?N:""},{...et.user,value:null!=(k=null==eS?void 0:eS.db_user)?k:""},{...et.pool_mode,value:"transaction"}],onCopyCallback:()=>ez(P,"transaction_pooler"),children:!ea&&!eT&&(0,a.jsxs)(Z.Nt,{className:"group",children:[(0,a.jsx)(Z.R6,{asChild:!0,className:"w-full justify-start !last:rounded-b group-data-[state=open]:rounded-b-none border-light mt-4 px-3",children:(0,a.jsx)(b.$,{type:"default",size:"large",iconRight:(0,a.jsx)(E.A,{className:"transition group-data-[state=open]:rotate-180"}),className:"text-foreground !bg-dash-sidebar justify-between",children:(0,a.jsxs)("div",{className:"text-xs flex items-center p-2",children:[(0,a.jsx)("span",{children:"Using the Shared Pooler"}),(0,a.jsx)(J.E,{variant:"brand",size:"small",className:"ml-2",children:"IPv4 compatible"})]})})}),(0,a.jsxs)(Z.Ke,{className:"bg-dash-sidebar rounded-b border text-xs",children:[(0,a.jsx)("p",{className:"px-3 py-2",children:"Only recommended when your network does not support IPv6. Added latency compared to dedicated pooler."}),(0,a.jsx)(Y.N,{wrapperClassName:(0,V.cn)("[&_pre]:border-x-0 [&_pre]:border-b-0 [&_pre]:px-4 [&_pre]:py-3","[&_pre]:rounded-t-none"),language:eO,value:eB.pooler[P],className:"[&_code]:text-[12px] [&_code]:text-foreground",hideLineNumbers:!0,onCopyCallback:()=>ez(P,"transaction_pooler")})]})]})}),ea&&eT&&(0,a.jsx)(X.Z,{type:"warning",title:"Highly recommended to not use Session Pooler",className:"[&>div]:gap-0 px-8 [&>svg]:left-7 border-0 border-b rounded-none border-border-muted !py-4 mb-0",children:(0,a.jsx)("p",{className:"text-sm text-foreground-lighter !mb-0",children:"If you are using Session Pooler, we recommend switching to Direct Connection."})}),(0,a.jsx)(e_,{type:"session",title:"Session pooler",contentType:eU,lang:eO,badge:"Shared Pooler",fileTitle:eK,description:"Only recommended as an alternative to Direct Connection, when connecting via an IPv4 network.",connectionString:eB.pooler[P].replace("6543","5432"),ipv4Status:{type:"success",title:"IPv4 compatible",description:"Session pooler connections are IPv4 proxied for free",links:void 0},parameters:[{...et.host,value:null!=(S=null==ek?void 0:ek.db_host)?S:""},{...et.port,value:"5432"},{...et.database,value:null!=(C=null==ek?void 0:ek.db_name)?C:""},{...et.user,value:null!=(_=null==ek?void 0:ek.db_user)?_:""},{...et.pool_mode,value:"session"}],onCopyCallback:()=>ez(P,"session_pooler")})]})]})]}),eG&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-20 w-full px-4 md:px-7 py-10",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(eI,{number:++e$,className:"mb-4",children:"Add the configuration package to read the settings"}),null==eG?void 0:eG.map((e,t)=>(0,a.jsx)(Y.N,{className:"text-sm",value:e,hideLineNumbers:!0,language:"bash",children:e},t))]})})]}),"python"===P&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Q.w,{}),(0,a.jsxs)(Z.Nt,{className:"px-8 py-5",children:[(0,a.jsx)(Z.R6,{className:"group [&[data-state=open]>div>svg]:!-rotate-180",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2 w-full",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light group-hover:text-foreground transition",children:"Connecting to SQL Alchemy"}),(0,a.jsx)(E.A,{className:"transition-transform duration-200",strokeWidth:1.5,size:14})]})}),(0,a.jsx)(Z.Ke,{className:"my-2",children:(0,a.jsxs)("div",{className:"text-foreground-light text-xs grid gap-2",children:[(0,a.jsxs)("p",{children:["Please use ",(0,a.jsx)("code",{children:"postgresql://"})," instead of ",(0,a.jsx)("code",{children:"postgres://"})," as your dialect when connecting via SQLAlchemy."]}),(0,a.jsxs)("p",{children:["Example:",(0,a.jsx)("code",{children:'create_engine("postgresql+psycopg2://...")'})]}),(0,a.jsx)("p",{className:"text-sm font-mono tracking-tight text-foreground-lighter"})]})})]})]}),(0,a.jsx)(Q.w,{"data-sentry-element":"Separator","data-sentry-source-file":"DatabaseConnectionString.tsx"}),(0,a.jsxs)("div",{className:"px-8 pt-5 flex flex-col gap-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Reset your database password"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["You may reset your database password in your project's"," ",(0,a.jsx)(F.g,{href:"/project/".concat(A,"/database/settings"),className:"text-foreground-lighter hover:text-foreground","data-sentry-element":"InlineLink","data-sentry-source-file":"DatabaseConnectionString.tsx",children:"Database Settings"})]})]})]})};var eE=n(88602),eL=n(43969),eT=n(76291),eD=n(67575),eF=n(75019),ez=n(5483),eB=n(80586);let eM=e=>{let{connectionObject:t,selectedParent:n,selectedChild:a,selectedGrandchild:s}=e,r=t.find(e=>e.key===n);if(r){let e=r.children.find(e=>e.key===a);return e?e.children.find(e=>e.key===s)?"".concat(n,"/").concat(a,"/").concat(s):"".concat(n,"/").concat(a):n}return""};var eO=n(52542),eU=n(9681),eW=n(61965),eq=n(796),eH=n(16426),eG=n.n(eH);let eV=e=>{let{connection:t}=e,{resolvedTheme:n}=(0,eq.D)(),s=["ionic-angular"].includes(t)?"icons/frameworks":"libraries";return(0,a.jsx)(eG(),{className:"transition-all group-hover:scale-110",src:"".concat(x.o2,"/img/").concat(s,"/").concat(t.toLowerCase()).concat(["expo","nextjs","prisma","drizzle","astro","remix"].includes(t.toLowerCase())&&(null==n?void 0:n.includes("dark"))?"-dark":"").concat("icons/frameworks"===s?"":"-icon",".svg"),alt:"".concat(t," logo"),width:14,height:14,"data-sentry-element":"Image","data-sentry-component":"ConnectionIcon","data-sentry-source-file":"ConnectionIcon.tsx"})},eK=e=>{let{state:t,updateState:n,label:s,items:r}=e,[o,l]=(0,u.useState)(!1),i=r.find(e=>e.key===t);return(0,a.jsxs)(eU.AM,{open:o,onOpenChange:l,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"ConnectDropdown","data-sentry-source-file":"ConnectDropdown.tsx",children:[(0,a.jsxs)("div",{className:"flex ",children:[(0,a.jsx)("span",{className:"flex items-center text-foreground-lighter px-3 rounded-lg rounded-r-none text-xs border border-button border-r-0",children:s}),(0,a.jsx)(eU.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"ConnectDropdown.tsx",children:(0,a.jsx)(b.$,{size:"small",type:"default",className:"gap-0 rounded-l-none",iconRight:(0,a.jsx)(E.A,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"ConnectDropdown.tsx",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(null==i?void 0:i.icon)?(0,a.jsx)(eV,{connection:i.icon}):(0,a.jsx)(eO.A,{size:12}),null==i?void 0:i.label]})})})]}),(0,a.jsx)(eU.hl,{className:"p-0 max-w-48",side:"bottom",align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"ConnectDropdown.tsx",children:(0,a.jsxs)(eW.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"ConnectDropdown.tsx",children:[(0,a.jsx)(eW.G7,{placeholder:"Search...","data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"ConnectDropdown.tsx"}),(0,a.jsxs)(eW.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"ConnectDropdown.tsx",children:[(0,a.jsx)(eW.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"ConnectDropdown.tsx",children:"No results found."}),(0,a.jsx)(eW.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"ConnectDropdown.tsx",children:r.map(e=>(0,a.jsxs)(eW.h_,{value:e.key,onSelect:()=>{n(e.key),l(!1),l(!1)},className:"flex gap-2 items-center",children:[e.icon?(0,a.jsx)(eV,{connection:e.icon}):(0,a.jsx)(eO.A,{size:12}),e.label,(0,a.jsx)(eu.A,{size:15,className:(0,V.cn)("ml-auto  ",e.key===t?"opacity-100":"opacity-0")})]},e.key))})]})]})})]})};var e$=n(49434),eY=n.n(e$);let eZ=(0,u.forwardRef)((e,t)=>{var s,o,l,i,c,d;let{projectKeys:p,filePath:m,...f}=e,{ref:x}=(0,r.g)(),{data:h}=(0,q.s)(),g=(0,u.useMemo)(()=>(null==h?void 0:h.plan.id)!=="free",[h]),{data:y}=(0,eD.G)({projectRef:x}),{data:b}=(0,B.N)({projectRef:x}),{data:v}=(0,M.A)({projectRef:x}),{data:j}=(0,U.Q)({projectRef:x}),{ipv4:w}=(0,L.EN)(null!=(s=null==j?void 0:j.selected_addons)?s:[]),N=(0,H.Av)(y||{db_user:"",db_host:"",db_port:"",db_name:""},["db_host","db_name","db_port","db_user","inserted_at"]),k=null==v?void 0:v.find(e=>"PRIMARY"===e.database_type),S=g?b:void 0,C=(0,eA.H)({connectionInfo:N,poolingInfo:{connectionString:null!=(o=null==k?void 0:k.connection_string)?o:"",db_host:null!=(l=null==k?void 0:k.db_host)?l:"",db_name:null!=(i=null==k?void 0:k.db_name)?i:"",db_port:null!=(c=null==k?void 0:k.db_port)?c:0,db_user:null!=(d=null==k?void 0:k.db_user)?d:""},metadata:{projectRef:x}}),_=void 0!==S?(0,eA.H)({connectionInfo:N,poolingInfo:{connectionString:S.connection_string,db_host:S.db_host,db_name:S.db_name,db_port:S.db_port,db_user:S.db_user},metadata:{projectRef:x}}):void 0,A=(0,u.useMemo)(()=>eY()(()=>n(74988)("./".concat(m,"/content")),{loading:()=>(0,a.jsx)("div",{className:"p-4 min-h-[331px]",children:(0,a.jsx)(z.y,{})})}),[m]);return(0,a.jsx)("div",{ref:t,...f,className:(0,V.cn)("border rounded-lg",f.className),children:(0,a.jsx)(A,{projectKeys:p,filePath:m,connectionStringPooler:{transactionShared:C.pooler.uri,sessionShared:C.pooler.uri.replace("6543","5432"),transactionDedicated:null==_?void 0:_.pooler.uri,sessionDedicated:null==_?void 0:_.pooler.uri.replace("6543","5432"),ipv4SupportedForDedicatedPooler:!!w,direct:C.direct.uri}})})});eZ.displayName="ConnectTabContent";let eJ=()=>{var e,t,n,s,o,l,i,c;let{ref:d}=(0,r.g)(),{data:p}=(0,ez.YA)(),m=(null==p?void 0:p.status)===x.BU.ACTIVE_HEALTHY,[f,h]=(0,P.ZA)("showConnect",P.cr.withDefault(!1)),[g,y]=(0,u.useState)(en),[v,j]=(0,u.useState)(g[0].key),[w,N]=(0,u.useState)(null!=(c=null==(t=g.find(e=>e.key===v))||null==(e=t.children[0])?void 0:e.key)?c:""),[k,S]=(0,u.useState)((null==(o=g.find(e=>e.key===v))||null==(s=o.children.find(e=>e.key===w))||null==(n=s.children[0])?void 0:n.key)||""),{data:C}=(0,eD.G)({projectRef:d},{enabled:f}),_=(0,eF.SE)(A.aG.READ,"service_api_keys"),E=e=>{var t,n,a,s,r,o,l;j(e),N(null!=(o=null==(n=g.find(t=>t.key===e))||null==(t=n.children[0])?void 0:t.key)?o:""),S(null!=(l=null==(r=g.find(t=>t.key===e))||null==(s=r.children[0])||null==(a=s.children[0])?void 0:a.key)?l:"")},L=e=>{N(e);let t=g.find(e=>e.key===v),n=null==t?void 0:t.children.find(t=>t.key===e);n&&n.children.length>0?S(n.children[0].key):S("")},T=e=>{S(e)};function D(e){var t,n;j(e[0].key),(null==(t=e[0])?void 0:t.children.length)>0?(N(e[0].children[0].key),(null==(n=e[0].children[0])?void 0:n.children.length)>0?S(e[0].children[0].children[0].key):S("")):(N(""),S(""))}let F=()=>{let e=g.find(e=>e.key===v);return e&&e.children.length>0?e.children:[]},z=()=>{let e=g.find(e=>e.key===v),t=null==e?void 0:e.children.find(e=>e.key===w);return t&&t.children.length>0?t.children:[]},{data:B}=(0,eT.I)({projectRef:d}),{anonKey:M,publishableKey:O}=_?(0,eT.x)(B):{anonKey:null,publishableKey:null},U=(0,u.useMemo)(()=>{var e,t,n,a,s,r;let o=null!=(n=null==C||null==(e=C.app_config)?void 0:e.protocol)?n:"https",l=null!=(a=null==C||null==(t=C.app_config)?void 0:t.endpoint)?a:"",i=_?"".concat(o,"://").concat(null!=l?l:"-"):"";return{apiUrl:null!=i?i:null,anonKey:null!=(s=null==M?void 0:M.api_key)?s:null,publishableKey:null!=(r=null==O?void 0:O.api_key)?r:null}},[null==C||null==(l=C.app_config)?void 0:l.protocol,null==C||null==(i=C.app_config)?void 0:i.endpoint,_,null==M?void 0:M.api_key,null==O?void 0:O.api_key]),W=eM({connectionObject:g,selectedParent:v,selectedChild:w,selectedGrandchild:k});return m?(0,a.jsxs)(K.lG,{open:f,onOpenChange:e=>h(e||null),"data-sentry-element":"Dialog","data-sentry-component":"Connect","data-sentry-source-file":"Connect.tsx",children:[(0,a.jsx)(K.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"Connect.tsx",children:(0,a.jsx)(b.$,{type:"default",className:"rounded-full",icon:(0,a.jsx)(R.A,{className:"rotate-90"}),"data-sentry-element":"Button","data-sentry-source-file":"Connect.tsx",children:(0,a.jsx)("span",{children:"Connect"})})}),(0,a.jsxs)(K.Cf,{className:(0,V.cn)("sm:max-w-5xl p-0"),centered:!1,"data-sentry-element":"DialogContent","data-sentry-source-file":"Connect.tsx",children:[(0,a.jsxs)(K.c7,{className:K.UP,"data-sentry-element":"DialogHeader","data-sentry-source-file":"Connect.tsx",children:[(0,a.jsx)(K.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"Connect.tsx",children:"Connect to your project"}),(0,a.jsx)(K.rr,{"data-sentry-element":"DialogDescription","data-sentry-source-file":"Connect.tsx",children:"Get the connection strings and environment variables for your app"})]}),(0,a.jsxs)(eB.tU,{defaultValue:"direct",onValueChange:e=>(function(e){"frameworks"===e&&(y(en),D(en)),"mobiles"===e&&(y(ea),D(ea)),"orms"===e&&(y(es),D(es))})(e),"data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"Connect.tsx",children:[(0,a.jsx)(eB.j7,{className:(0,V.cn)("flex overflow-x-scroll gap-x-4",K.UP),"data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"Connect.tsx",children:er.map(e=>(0,a.jsx)(eB.Xi,{value:e.key,className:"px-0",children:e.label},e.key))}),er.map(e=>{var t,n,s,r,o,l;let i=((null==(t=g.find(e=>e.key===v))?void 0:t.children.length)||0)>0,c=((null==(s=g.find(e=>e.key===v))||null==(n=s.children.find(e=>e.key===w))?void 0:n.children.length)||0)>0;return"direct"===e.key?(0,a.jsx)(eB.av,{value:"direct",className:(0,V.cn)("!mt-0","p-0","flex flex-col gap-6"),children:(0,a.jsx)("div",{className:K.bQ,children:(0,a.jsx)(eP,{})})},"direct"):(0,a.jsxs)(eB.av,{value:e.key,className:(0,V.cn)(K.UP,K.bQ,"!mt-0"),children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-2 md:gap-3",children:[(0,a.jsx)(eK,{state:v,updateState:E,label:g===en||g===ea?"Framework":"Tool",items:g}),v&&i&&(0,a.jsx)(eK,{state:w,updateState:L,label:"Using",items:F()}),w&&c&&(0,a.jsx)(eK,{state:k,updateState:T,label:"With",items:z()})]}),(null==(r=g.find(e=>e.key===v))?void 0:r.guideLink)&&(0,a.jsx)(b.$,{asChild:!0,type:"default",icon:(0,a.jsx)(I.A,{strokeWidth:1.5}),children:(0,a.jsxs)("a",{target:"_blank",rel:"noreferrer",href:(null==(o=g.find(e=>e.key===v))?void 0:o.guideLink)||"",children:[null==(l=g.find(e=>e.key===v))?void 0:l.label," guide"]})})]}),(0,a.jsx)("p",{className:"text-xs text-foreground-lighter my-3",children:"Add the following files below to your application"}),(0,a.jsx)(eZ,{projectKeys:U,filePath:W,className:"rounded-b-none"}),(0,a.jsx)(eL.A.Notice,{className:"border border-t-0 rounded-lg rounded-t-none",title:"New API keys coming 2025",description:"\n`anon` and `service_role` API keys will be changing to `publishable` and `secret` API keys.   \n",href:"https://github.com/orgs/supabase/discussions/29260",buttonText:"Read the announcement"})]},"content-".concat(e.key))})]})]})]}):(0,a.jsx)(eE.G,{disabled:!0,type:"default",className:"rounded-full",icon:(0,a.jsx)(R.A,{className:"rotate-90"}),tooltip:{content:{side:"bottom",text:"Project is currently not active and cannot be connected"}},children:"Connect"})};var eQ=n(91351),eX=n(67776),e0=n(6218),e1=n(71139),e2=n(9357),e4=n(92707);let e3=()=>{let{theme:e,setTheme:t}=(0,eq.D)(),n=(0,e4.sU)(),{openFeaturePreviewModal:s}=(0,_.j_)();return(0,a.jsxs)(e1.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"LocalDropdown","data-sentry-source-file":"LocalDropdown.tsx",children:[(0,a.jsx)(e1.ty,{className:"border flex-shrink-0 px-3",asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"LocalDropdown.tsx",children:(0,a.jsx)(b.$,{type:"default",className:"[&>span]:flex px-0 py-0 rounded-full overflow-hidden h-8 w-8","data-sentry-element":"Button","data-sentry-source-file":"LocalDropdown.tsx",children:(0,a.jsx)(eQ.p,{className:"w-8 h-8 rounded-md","data-sentry-element":"ProfileImage","data-sentry-source-file":"LocalDropdown.tsx"})})}),(0,a.jsxs)(e1.SQ,{side:"bottom",align:"end",className:"w-44","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"LocalDropdown.tsx",children:[(0,a.jsxs)(e1._2,{className:"flex gap-2",onClick:s,onSelect:s,"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"LocalDropdown.tsx",children:[(0,a.jsx)(eX.A,{size:14,strokeWidth:1.5,className:"text-foreground-lighter","data-sentry-element":"FlaskConical","data-sentry-source-file":"LocalDropdown.tsx"}),"Feature previews"]}),(0,a.jsxs)(e1._2,{className:"flex gap-2",onClick:()=>n(!0),"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"LocalDropdown.tsx",children:[(0,a.jsx)(e0.A,{size:14,strokeWidth:1.5,className:"text-foreground-lighter","data-sentry-element":"Command","data-sentry-source-file":"LocalDropdown.tsx"}),"Command menu"]}),(0,a.jsx)(e1.mB,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"LocalDropdown.tsx"}),(0,a.jsxs)(e1.I,{"data-sentry-element":"DropdownMenuGroup","data-sentry-source-file":"LocalDropdown.tsx",children:[(0,a.jsx)(e1.lp,{"data-sentry-element":"DropdownMenuLabel","data-sentry-source-file":"LocalDropdown.tsx",children:"Theme"}),(0,a.jsx)(e1.Hr,{value:e,onValueChange:e=>{t(e)},"data-sentry-element":"DropdownMenuRadioGroup","data-sentry-source-file":"LocalDropdown.tsx",children:e2.h.map(e=>(0,a.jsx)(e1.Ht,{value:e.value,children:e.name},e.value))})]})]})]})};var e5=n(42813),e6=n(86815),e8=n(52786),e7=n(43432);let e9=()=>{let e=(0,e6.xd)();return(0,a.jsx)(eE.G,{type:"text",size:"tiny",id:"assistant-trigger",className:"rounded-none w-[32px] h-[30px] flex items-center justify-center p-0 hover:bg-brand-400",onClick:()=>{e.toggleAssistant()},tooltip:{content:{text:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{children:"AI Assistant"}),(0,a.jsx)(e7.S,{keys:["Meta","i"]})]})}},"data-sentry-element":"ButtonTooltip","data-sentry-component":"AssistantButton","data-sentry-source-file":"AssistantButton.tsx",children:(0,a.jsx)(e8.M,{allowHoverEffect:!1,size:16,"data-sentry-element":"AiIconAnimation","data-sentry-source-file":"AssistantButton.tsx"})})};var te=n(86084),tt=n(87610),tn=n(96572),ta=n(3689),ts=n(35752),tr=n(54499),to=n(24217),tl=n(37411),ti=n(80016),tc=n(13929),td=n(97600);let tu=(e,t)=>{if(!(Object.entries(t).length>1))return e;{let n="bucketId"in t,a="preset"in t;return e.split("/").slice(0,n||a?5:4).join("/")}},tp=e=>{var t;let{project:n,setOpen:o}=e,l=(0,s.useRouter)(),{ref:i}=(0,r.g)(),c=tu(l.route,l.query),d=null!=(t=null==c?void 0:c.replace("[ref]",n.ref))?t:"/project/".concat(n.ref);return(0,a.jsx)(eW.h_,{value:"".concat(n.name.replaceAll('"',""),"-").concat(n.ref),className:"cursor-pointer w-full",onSelect:()=>{l.push(d),o(!1)},onClick:()=>o(!1),"data-sentry-element":"CommandItem_Shadcn_","data-sentry-component":"ProjectLink","data-sentry-source-file":"ProjectDropdown.tsx",children:(0,a.jsxs)(C(),{href:d,className:"w-full flex items-center justify-between","data-sentry-element":"Link","data-sentry-source-file":"ProjectDropdown.tsx",children:[n.name,n.ref===i&&(0,a.jsx)(eu.A,{size:16})]})},n.ref)},tm=()=>{let e=(0,s.useRouter)(),{ref:t}=(0,r.g)(),{data:n}=(0,ez.YA)(),{data:o,isLoading:l}=(0,tc.el)(),{data:i}=(0,q.s)(),c=(0,td.x)("projects:create"),d=(null==n?void 0:n.parentRef)!==(null==n?void 0:n.ref),p=null==o?void 0:o.filter(e=>e.organization_id===(null==i?void 0:i.id)).sort((e,t)=>e.name.localeCompare(t.name)),m=d?null==p?void 0:p.find(e=>e.ref===(null==n?void 0:n.parentRef)):null==p?void 0:p.find(e=>e.ref===t),[f,h]=(0,u.useState)(!1);return l||!m?(0,a.jsx)(z.A,{className:"w-[90px]"}):x.pe?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(C(),{href:"/project/".concat(null==n?void 0:n.ref),className:"flex items-center gap-2 flex-shrink-0 text-sm","data-sentry-element":"Link","data-sentry-source-file":"ProjectDropdown.tsx",children:[(0,a.jsx)(eO.A,{size:14,strokeWidth:1.5,className:"text-foreground-lighter","data-sentry-element":"Box","data-sentry-source-file":"ProjectDropdown.tsx"}),(0,a.jsx)("span",{className:"text-foreground max-w-32 lg:max-w-none truncate",children:null==m?void 0:m.name})]}),(0,a.jsxs)(eU.AM,{open:f,onOpenChange:h,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"ProjectDropdown.tsx",children:[(0,a.jsx)(eU.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"ProjectDropdown.tsx",children:(0,a.jsx)(b.$,{type:"text",size:"tiny",className:(0,V.cn)("px-1.5 py-4 [&_svg]:w-5 [&_svg]:h-5 ml-1"),iconRight:(0,a.jsx)(tn.A,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"ProjectDropdown.tsx"})}),(0,a.jsx)(eU.hl,{className:"p-0",side:"bottom",align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"ProjectDropdown.tsx",children:(0,a.jsxs)(eW.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"ProjectDropdown.tsx",children:[(0,a.jsx)(eW.G7,{placeholder:"Find project...","data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"ProjectDropdown.tsx"}),(0,a.jsxs)(eW.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"ProjectDropdown.tsx",children:[(0,a.jsx)(eW.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"ProjectDropdown.tsx",children:"No projects found"}),(0,a.jsx)(eW.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"ProjectDropdown.tsx",children:(0,a.jsx)(ti.FK,{className:(p||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"ProjectDropdown.tsx",children:null==p?void 0:p.map(e=>(0,a.jsx)(tp,{project:e,setOpen:h},e.ref))})}),c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eW.fx,{}),(0,a.jsx)(eW.L$,{children:(0,a.jsx)(eW.h_,{className:"cursor-pointer w-full",onSelect:()=>{h(!1),e.push("/new/".concat(null==i?void 0:i.slug))},onClick:()=>h(!1),children:(0,a.jsxs)(C(),{href:"/new/".concat(null==i?void 0:i.slug),onClick:()=>{h(!1)},className:"w-full flex items-center gap-2",children:[(0,a.jsx)(ta.A,{size:14,strokeWidth:1.5}),(0,a.jsx)("p",{children:"New project"})]})})})]})]})]})})]})]}):(0,a.jsx)(b.$,{type:"text","data-sentry-element":"Button","data-sentry-component":"ProjectDropdown","data-sentry-source-file":"ProjectDropdown.tsx",children:(0,a.jsx)("span",{className:"text-sm",children:null==m?void 0:m.name})})},tf=e=>{var t;let{branch:n,isSelected:r,setOpen:o}=e,l=(0,s.useRouter)(),i=tu(l.route,l.query),c=null!=(t=null==i?void 0:i.replace("[ref]",n.project_ref))?t:"/project/".concat(n.project_ref);return(0,a.jsx)(C(),{passHref:!0,href:c,"data-sentry-element":"Link","data-sentry-component":"BranchLink","data-sentry-source-file":"BranchDropdown.tsx",children:(0,a.jsxs)(eW.h_,{value:n.name.replaceAll('"',""),className:"cursor-pointer w-full flex items-center justify-between",onSelect:()=>{o(!1),l.push(c)},onClick:()=>{o(!1)},"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"BranchDropdown.tsx",children:[(0,a.jsxs)("p",{className:"truncate w-60 flex items-center gap-1",title:n.name,children:[n.is_default&&(0,a.jsx)(te.A,{size:14,className:"text-amber-900"}),n.name]}),r&&(0,a.jsx)(eu.A,{size:14,strokeWidth:1.5})]})})},tx=()=>{var e;let t=(0,s.useRouter)(),{ref:n}=(0,r.g)(),o=(0,tl.qM)(),{data:l}=(0,ez.YA)(),[i,c]=(0,u.useState)(!1),d=(null==l?void 0:l.parent_project_ref)||n,{data:p,isLoading:m,isError:f,isSuccess:x}=(0,to.A)({projectRef:d},{enabled:!!l}),h=(null==l?void 0:l.is_branch_enabled)===!0,g=null==p?void 0:p.find(e=>e.project_ref===n),y={id:"main",name:"main",project_ref:null!=(e=null!=d?d:n)?e:"",is_default:!0},v=null==p?void 0:p.find(e=>e.is_default),j=null==p?void 0:p.filter(e=>!e.is_default).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),w=p&&p.length>0?v?[v].concat(null!=j?j:[]):null!=j?j:[]:[y],N=h?null!=w?w:[]:[y],k="https://github.com/orgs/supabase/discussions/18937";return(0,a.jsxs)(a.Fragment,{children:[m&&(0,a.jsx)(z.A,{className:"w-[90px]"}),f&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-amber-900",children:[(0,a.jsx)(tt.A,{size:16,strokeWidth:2}),(0,a.jsx)("p",{className:"text-sm",children:"Failed to load branches"})]}),x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(C(),{href:"/project/".concat(n),className:"flex items-center gap-2 flex-shrink-0 text-sm",children:[(0,a.jsx)("span",{className:"text-foreground max-w-32 lg:max-w-none truncate",children:h?null==g?void 0:g.name:"main"}),h?(null==g?void 0:g.is_default)?(0,a.jsx)(J.E,{variant:"warning",children:"Production"}):(null==g?void 0:g.persistent)?(0,a.jsx)(J.E,{variant:"brand",children:"Persistent"}):(0,a.jsx)(J.E,{variant:"brand",children:"Preview"}):(0,a.jsx)(J.E,{variant:"warning",children:"Production"})]}),(0,a.jsxs)(eU.AM,{open:i,onOpenChange:c,modal:!1,children:[(0,a.jsx)(eU.Wv,{asChild:!0,children:(0,a.jsx)(b.$,{type:"text",size:"tiny",className:(0,V.cn)("px-1.5 py-4 [&_svg]:w-5 [&_svg]:h-5 ml-1"),iconRight:(0,a.jsx)(tn.A,{strokeWidth:1.5})})}),(0,a.jsx)(eU.hl,{className:"p-0",side:"bottom",align:"start",children:(0,a.jsxs)(eW.uB,{children:[h&&(0,a.jsx)(eW.G7,{placeholder:"Find branch..."}),(0,a.jsxs)(eW.oI,{children:[h&&(0,a.jsx)(eW.xL,{children:"No branches found"}),(0,a.jsx)(eW.L$,{children:(0,a.jsx)(ti.FK,{className:"max-h-[210px] overflow-y-auto",children:N.map(e=>(0,a.jsx)(tf,{branch:e,isSelected:e.id===(null==g?void 0:g.id)||(null==p?void 0:p.length)===0,setOpen:c},e.id))})}),(0,a.jsx)(eW.fx,{}),(0,a.jsxs)(eW.L$,{children:[(0,a.jsx)(eW.h_,{className:"cursor-pointer w-full",onSelect:()=>{c(!1),o.setShowCreateBranchModal(!0)},onClick:()=>{c(!1),o.setShowCreateBranchModal(!0)},children:(0,a.jsxs)("div",{className:"w-full flex items-center gap-2",children:[(0,a.jsx)(ta.A,{size:14,strokeWidth:1.5}),(0,a.jsx)("p",{children:"Create branch"})]})}),(0,a.jsx)(eW.h_,{className:"cursor-pointer w-full",onSelect:()=>{c(!1),t.push("/project/".concat(n,"/branches"))},onClick:()=>c(!1),children:(0,a.jsxs)(C(),{href:"/project/".concat(n,"/branches"),className:"w-full flex items-center gap-2",children:[(0,a.jsx)(ts.A,{size:14,strokeWidth:1.5}),(0,a.jsx)("p",{children:"Manage branches"})]})})]}),(0,a.jsx)(eW.fx,{}),(0,a.jsx)(eW.L$,{children:(0,a.jsx)(eW.h_,{className:"cursor-pointer w-full",onSelect:()=>{var e,t;c(!1),null==(t=window)||null==(e=t.open(k,"_blank"))||e.focus()},onClick:()=>c(!1),children:(0,a.jsxs)("a",{target:"_blank",rel:"noreferrer noopener",href:k,onClick:()=>c(!1),className:"w-full flex gap-2",children:[(0,a.jsx)(tr.A,{size:14,strokeWidth:1,className:"text-muted mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Branching feedback"}),(0,a.jsx)("p",{className:"text-lighter",children:"Join Github Discussion"})]})]})})})]})]})})]})]})]})},th=e=>{let{onClick:t}=e;return(0,a.jsx)(eE.G,{type:"text",size:"tiny",id:"editor-trigger",className:"rounded-none w-[32px] h-[30px] flex items-center justify-center p-0 text-foreground-light hover:text-foreground",onClick:t,tooltip:{content:{text:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{children:"SQL Editor"}),(0,a.jsx)(e7.S,{keys:["Meta","e"]})]})}},"data-sentry-element":"ButtonTooltip","data-sentry-component":"InlineEditorButton","data-sentry-source-file":"InlineEditorButton.tsx",children:(0,a.jsx)(ex.mx,{size:18,strokeWidth:1.5,"data-sentry-element":"SqlEditor","data-sentry-source-file":"InlineEditorButton.tsx"})})};var tg=n(53346),ty=n(64082),tb=n(84831);let tv=()=>{let e=(0,s.useRouter)(),{slug:t}=(0,r.g)(),{data:n}=(0,q.s)(),{data:o,isLoading:l}=(0,tb.Ad)(),i=(0,td.x)("organizations:create"),c=null==n?void 0:n.slug,d=null==n?void 0:n.name,[p,m]=(0,u.useState)(!1);return l?(0,a.jsx)(z.A,{className:"w-[90px]"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(C(),{href:c?"/org/".concat(c):"/organizations",className:"flex items-center gap-2 flex-shrink-0 text-sm","data-sentry-element":"Link","data-sentry-source-file":"OrganizationDropdown.tsx",children:[(0,a.jsx)(tg.A,{size:14,strokeWidth:1.5,className:"text-foreground-lighter","data-sentry-element":"Boxes","data-sentry-source-file":"OrganizationDropdown.tsx"}),(0,a.jsx)("span",{className:(0,V.cn)("max-w-32 lg:max-w-none truncate hidden md:block",n?"text-foreground":"text-foreground-lighter"),children:null!=d?d:"Select an organization"}),!!n&&(0,a.jsx)(J.E,{variant:"default",children:null==n?void 0:n.plan.name})]}),(0,a.jsxs)(eU.AM,{open:p,onOpenChange:m,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx",children:[(0,a.jsx)(eU.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx",children:(0,a.jsx)(b.$,{type:"text",className:(0,V.cn)("px-1.5 py-4 [&_svg]:w-5 [&_svg]:h-5 ml-1"),iconRight:(0,a.jsx)(tn.A,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"OrganizationDropdown.tsx"})}),(0,a.jsx)(eU.hl,{className:"p-0",side:"bottom",align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx",children:(0,a.jsxs)(eW.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx",children:[(0,a.jsx)(eW.G7,{placeholder:"Find organization...","data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx"}),(0,a.jsxs)(eW.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx",children:[(0,a.jsx)(eW.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx",children:"No organizations found"}),(0,a.jsx)(eW.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx",children:(0,a.jsx)(ti.FK,{className:(o||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"OrganizationDropdown.tsx",children:null==o?void 0:o.map(n=>{let s=t?e.pathname.replace("[slug]",n.slug):"/org/".concat(n.slug);return(0,a.jsx)(eW.h_,{value:"".concat(n.name.replaceAll('"',"")," - ").concat(n.slug),className:"cursor-pointer w-full",onSelect:()=>{m(!1),e.push(s)},onClick:()=>m(!1),children:(0,a.jsxs)(C(),{href:s,className:"w-full flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{children:n.name}),(0,a.jsx)(ty.A,{organization:n})]}),n.slug===c&&(0,a.jsx)(eu.A,{size:16})]})},n.slug)})})}),(0,a.jsx)(eW.fx,{"data-sentry-element":"CommandSeparator_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx"}),(0,a.jsx)(eW.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx",children:(0,a.jsx)(eW.h_,{className:"cursor-pointer w-full",onSelect:t=>{m(!1),e.push("/organizations")},onClick:()=>m(!1),"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"OrganizationDropdown.tsx",children:(0,a.jsx)(C(),{href:"/organizations",className:"flex items-center gap-2 w-full","data-sentry-element":"Link","data-sentry-source-file":"OrganizationDropdown.tsx",children:(0,a.jsx)("p",{children:"All Organizations"})})})}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eW.fx,{}),(0,a.jsx)(eW.L$,{children:(0,a.jsx)(eW.h_,{className:"cursor-pointer w-full",onSelect:t=>{m(!1),e.push("/new")},onClick:()=>m(!1),children:(0,a.jsxs)(C(),{href:"/new",className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(ta.A,{size:14,strokeWidth:1.5}),(0,a.jsx)("p",{children:"New organization"})]})})})]})]})]})})]})]})};var tj=n(34618);let tw=e=>e.length?e.filter(e=>{if(!e.capped||!e.available_in_plan||e.unlimited||"DISK_IOPS_GP3"===e.metric)return!1;let t=e.pricing_free_units||0;return e.usage>t}).map(e=>e.metric):[];var tN=n(46964),tk=n(73563);let tS=e=>{let{defaultValue:t}=e;return(0,a.jsx)(a.Fragment,{children:(null==t?void 0:t.length)?t.map((e,t)=>(0,a.jsxs)(u.Fragment,{children:[t>0&&(0,a.jsx)("span",{className:"text-border-stronger dark:text-border-strong",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,a.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),(0,a.jsx)("a",{onClick:e.onClick||(()=>{}),className:"text-gray-1100 block px-2 py-1 text-xs leading-5 focus:bg-gray-100 focus:text-gray-900 focus:outline-none ".concat(e.onClick?"cursor-pointer hover:text-white":""),children:e.label})]},e.key)):null})};var tC=n(88745),t_=n(63159),tA=n(89772),tR=n(66623),tI=n(40260),tP=n(8854),tE=n(14280),tL=n.n(tE),tT=n(16110);let tD=u.forwardRef((e,t)=>{let{className:n,children:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,V.cn)("flex flex-col items-stretch border border-control rounded-md overflow-hidden",n),...r,children:s})});tD.displayName="ButtonGroup";let tF=u.forwardRef((e,t)=>{let{className:n,children:s,icon:r,asChild:o,...l}=e;return(0,a.jsx)(b.$,{ref:t,type:"text",icon:r,asChild:o,className:(0,V.cn)("h-auto py-2 rounded-none justify-start border-0 border-b border-border last:border-b-0",n),...l,children:s})});tF.displayName="ButtonGroupItem";var tz=n(49812);let tB=()=>{var e;let t=(0,s.useRouter)(),{data:n}=(0,ez.YA)(),{data:r}=(0,q.s)(),o=(0,e6.xd)(),{mutate:l}=(0,W.h)(),i=null!=(e=null==n?void 0:n.parent_project_ref)?e:t.query.ref,c="/support/new".concat(i?"?projectRef=".concat(i):"");return(0,a.jsxs)(eU.AM,{"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"HelpPopover","data-sentry-source-file":"HelpPopover.tsx",children:[(0,a.jsx)(eU.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"HelpPopover.tsx",children:(0,a.jsx)(eE.G,{id:"help-popover-button",type:"text",className:"rounded-none w-[32px] h-[30px] group",icon:(0,a.jsx)(t_.A,{size:18,strokeWidth:1.5,className:"!h-[18px] !w-[18px] text-foreground-light group-hover:text-foreground"}),tooltip:{content:{side:"bottom",text:"Help"}},onClick:()=>{l({action:"help_button_clicked",groups:{project:null==n?void 0:n.ref,organization:null==r?void 0:r.slug}})},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"HelpPopover.tsx"})}),(0,a.jsxs)(eU.hl,{className:"w-[400px] space-y-4 p-0 py-5",align:"end",side:"bottom","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"HelpPopover.tsx",children:[(0,a.jsxs)("div",{className:"mb-5 px-5",children:[(0,a.jsx)("h5",{className:"text-foreground mb-2",children:"Need help with your project?"}),(0,a.jsx)("p",{className:"text-sm text-foreground-lighter",children:"For issues with your project hosted on supabase.com or other hosted service inquiries. Response times are based on your billing plan, with paid plans prioritized."})]}),(0,a.jsx)("div",{className:"px-5",children:(0,a.jsxs)(tD,{className:"w-full","data-sentry-element":"ButtonGroup","data-sentry-source-file":"HelpPopover.tsx",children:[i&&(0,a.jsx)(tF,{size:"tiny",icon:(0,a.jsx)(e8.M,{allowHoverEffect:!0,size:14}),onClick:()=>{o.newChat({name:"Support",open:!0,initialInput:"I need help with my project",suggestions:{title:"I can help you with your project, here are some example prompts to get you started:",prompts:[{label:"Database Health",description:"Summarise my database health and performance"},{label:"Debug Logs",description:"View and debug my edge function logs"},{label:"RLS Setup",description:"Implement row level security for my tables"}]}})},children:"Supabase Assistant"}),(0,a.jsx)(tF,{size:"tiny",icon:(0,a.jsx)(tA.A,{strokeWidth:1.5,size:14}),asChild:!0,"data-sentry-element":"ButtonGroupItem","data-sentry-source-file":"HelpPopover.tsx",children:(0,a.jsx)("a",{href:"https://supabase.com/docs/guides/platform/troubleshooting",target:"_blank",rel:"noreferrer",children:"Troubleshooting"})}),(0,a.jsx)(tF,{size:"tiny",icon:(0,a.jsx)(tR.A,{strokeWidth:1.5,size:14}),asChild:!0,"data-sentry-element":"ButtonGroupItem","data-sentry-source-file":"HelpPopover.tsx",children:(0,a.jsx)("a",{href:"https://supabase.com/docs/",target:"_blank",rel:"noreferrer",children:"Docs"})}),(0,a.jsx)(tF,{size:"tiny",icon:(0,a.jsx)(tI.A,{strokeWidth:1.5,size:14}),asChild:!0,"data-sentry-element":"ButtonGroupItem","data-sentry-source-file":"HelpPopover.tsx",children:(0,a.jsx)("a",{href:"https://status.supabase.com/",target:"_blank",rel:"noreferrer",children:"Supabase Status"})}),(0,a.jsx)(tF,{size:"tiny",icon:(0,a.jsx)(tP.A,{strokeWidth:1.5,size:14}),"data-sentry-element":"ButtonGroupItem","data-sentry-source-file":"HelpPopover.tsx",children:(0,a.jsx)(C(),{href:c,"data-sentry-element":"Link","data-sentry-source-file":"HelpPopover.tsx",children:"Contact Support"})})]})}),(0,a.jsx)(tz.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"HelpPopover.tsx"}),(0,a.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,a.jsxs)("div",{className:"mb-4 px-5",children:[(0,a.jsx)("h5",{className:"mb-2",children:"Reach out to the community"}),(0,a.jsx)("p",{className:"text-sm text-foreground-lighter",children:"For other support, including questions on our client libraries, advice, or best practices."})]}),(0,a.jsx)("div",{className:"px-5",children:(0,a.jsx)("div",{className:"relative space-y-2 overflow-hidden rounded px-5 py-4 pb-12 shadow-md",style:{background:"#404EED"},children:(0,a.jsxs)("a",{href:"https://discord.supabase.com",target:"_blank",rel:"noreferrer",className:"dark block cursor-pointer",children:[(0,a.jsx)(tL(),{className:"absolute left-0 top-0 opacity-50",src:"".concat(t.basePath,"/img/support/discord-bg-small.jpg"),layout:"fill",objectFit:"cover",alt:"discord illustration header","data-sentry-element":"Image","data-sentry-source-file":"HelpPopover.tsx"}),(0,a.jsx)(b.$,{type:"secondary",icon:(0,a.jsx)(tT.A,{src:"".concat(t.basePath,"/img/discord-icon.svg"),className:"h-4 w-4"}),"data-sentry-element":"Button","data-sentry-source-file":"HelpPopover.tsx",children:(0,a.jsx)("span",{style:{color:"#404EED"},children:"Join Discord server"})})]})})}),(0,a.jsx)("div",{className:"px-5",children:(0,a.jsx)("div",{className:"relative space-y-2 overflow-hidden rounded px-5 py-4 pb-12 shadow-md",children:(0,a.jsxs)("a",{href:"https://github.com/supabase/supabase/discussions",target:"_blank",rel:"noreferrer",className:"block cursor-pointer",children:[(0,a.jsx)(tL(),{className:"absolute left-0 top-0 opacity-50",src:"".concat(t.basePath,"/img/support/github-bg.jpg?v-1"),layout:"fill",objectFit:"cover",alt:"discord illustration header","data-sentry-element":"Image","data-sentry-source-file":"HelpPopover.tsx"}),(0,a.jsx)(b.$,{type:"secondary",icon:(0,a.jsx)(tr.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"HelpPopover.tsx",children:"GitHub Discussions"})]})})})]})]})]})};var tM=n(65303);let tO=()=>{let{data:e}=(0,q.s)(),{data:t}=(0,tb.Ad)(),n=(0,s.useRouter)(),[o]=(0,tM.U)(r.rS.LAST_VISITED_ORGANIZATION,""),l=x.pe?o?"/org/".concat(o):(null==e?void 0:e.slug)?"/org/".concat(e.slug):t&&t.length>0?"/org/".concat(t[0].slug):"/organizations":"/project/default";return(0,a.jsx)(C(),{href:l,className:"items-center justify-center flex-shrink-0 hidden md:flex","data-sentry-element":"Link","data-sentry-component":"HomeIcon","data-sentry-source-file":"HomeIcon.tsx",children:(0,a.jsx)(eG(),{alt:"Supabase",src:"".concat(n.basePath,"/img/supabase-logo.svg"),width:18,height:18,className:"w-[18px] h-[18px]","data-sentry-element":"Image","data-sentry-source-file":"HomeIcon.tsx"})})};var tU=n(62136),tW=n(15052);async function tq(){try{return await (0,f.x8)("".concat(x.o2,"/api/cli-release-version")).then(e=>e.json())}catch(e){throw e}}let tH=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.I)(tW.d.cliReleaseVersion(),()=>tq(),{enabled:e&&!x.pe,...t})};var tG=n(31492);let tV=e=>{if(!e)return;let[t,n,a]=e.slice(1).split(".");return{major:Number(t),minor:Number(n),patch:Number(a)}},tK=(e,t)=>!(e.major>t.major)&&(e.major!==t.major||!(e.minor>t.minor))&&(e.major!==t.major||e.minor!==t.minor||!(e.patch>t.patch)),t$=(e,t)=>!(e.major<t.major)&&(e.major!==t.major||!(e.minor<t.minor))&&(e.major!==t.major||e.minor!==t.minor||!(e.patch<t.patch)),tY=()=>{let{data:e,isSuccess:t}=tH(),n=null==e?void 0:e.current,s=null==e?void 0:e.latest,r=t&&!!s,o=tV(n),l=tV(s),i=!!o&&!!l&&n!==s&&tK(o,l),c=!!o&&!!l&&n!==s&&t$(o,l),u=(null==e?void 0:e.published_at)?d()(null==e?void 0:e.published_at).utc().add(14,"day").format("DD MMM YYYY"):void 0;return t&&n?(0,a.jsxs)(eU.AM,{"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"LocalVersionPopover","data-sentry-source-file":"LocalVersionPopover.tsx",children:[(0,a.jsx)(eU.Wv,{className:"flex items-center","data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"LocalVersionPopover.tsx",children:(0,a.jsx)(J.E,{variant:c?"warning":i?"brand":"default","data-sentry-element":"Badge","data-sentry-source-file":"LocalVersionPopover.tsx",children:c?"Beta":i?"Update available":"Latest"})}),(0,a.jsxs)(eU.hl,{align:"end",className:"w-80 px-0","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"LocalVersionPopover.tsx",children:[r?!c&&i?(0,a.jsxs)("div",{className:"px-4 mb-3",children:[(0,a.jsx)("p",{className:"text-sm mb-2",children:"A new version of Supabase CLI is available:"}),(0,a.jsxs)(eB.tU,{defaultValue:"macos",children:[(0,a.jsxs)(eB.j7,{className:"mt-2",children:[(0,a.jsx)(eB.Xi,{className:"px-2 text-xs",value:"macos",children:"macOS"}),(0,a.jsx)(eB.Xi,{className:"px-2 text-xs",value:"windows",children:"Windows"}),(0,a.jsx)(eB.Xi,{className:"px-2 text-xs",value:"linux",children:"Linux"}),(0,a.jsx)(eB.Xi,{className:"px-2 text-xs",value:"npm",children:"npm / Bun"})]}),(0,a.jsx)(eB.av,{className:"mt-2 text-xs",value:"macos",children:(0,a.jsx)(tG.X,{parentClassName:"bg-selection rounded !px-2",children:"brew upgrade supabase"})}),(0,a.jsx)(eB.av,{className:"mt-2 text-xs",value:"windows",children:(0,a.jsx)(tG.X,{parentClassName:"bg-selection rounded !px-2",children:"scoop update supabase"})}),(0,a.jsx)(eB.av,{className:"mt-2 text-xs",value:"linux",children:(0,a.jsx)(tG.X,{parentClassName:"bg-selection rounded !px-2",children:"brew upgrade supabase"})}),(0,a.jsx)(eB.av,{className:"mt-2 text-xs",value:"npm",children:(0,a.jsx)(tG.X,{parentClassName:"bg-selection rounded !px-2",children:"npm update supabase --save-dev"})})]})]}):(0,a.jsx)("div",{className:"px-4 mb-3",children:c?(0,a.jsx)("p",{className:"text-sm",children:"You're on the Beta version of Supabase CLI"}):(0,a.jsx)("p",{className:"text-sm",children:"You're on the latest version of Supabase CLI"})}):null,(0,a.jsx)("div",{className:"flex flex-col gap-y-2 px-4",children:(0,a.jsxs)("p",{className:"text-xs text-foreground-lighter",children:["All available release versions of the CLI can be found on our"," ",(0,a.jsx)(F.g,{href:"https://github.com/supabase/cli/releases","data-sentry-element":"InlineLink","data-sentry-source-file":"LocalVersionPopover.tsx",children:"GitHub repository"}),"."]})}),(0,a.jsxs)("div",{className:"flex items-center gap-x-2 mt-3 px-4",children:[(0,a.jsxs)(K.lG,{"data-sentry-element":"Dialog","data-sentry-source-file":"LocalVersionPopover.tsx",children:[(0,a.jsx)(K.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"LocalVersionPopover.tsx",children:(0,a.jsx)(b.$,{type:"default","data-sentry-element":"Button","data-sentry-source-file":"LocalVersionPopover.tsx",children:"Release schedule"})}),(0,a.jsxs)(K.Cf,{"data-sentry-element":"DialogContent","data-sentry-source-file":"LocalVersionPopover.tsx",children:[(0,a.jsx)(K.c7,{className:"border-b","data-sentry-element":"DialogHeader","data-sentry-source-file":"LocalVersionPopover.tsx",children:(0,a.jsx)(K.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"LocalVersionPopover.tsx",children:"Stable release schedule"})}),(0,a.jsxs)(K.OO,{className:"flex flex-col gap-y-3","data-sentry-element":"DialogSection","data-sentry-source-file":"LocalVersionPopover.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,a.jsxs)("p",{className:"text-foreground-lighter text-xs font-mono uppercase",children:["Approximate next release: ",u]}),(0,a.jsxs)("p",{className:"text-sm",children:["Supabase CLI releases follows a two-week schedule, with stable updates available through the"," ",(0,a.jsx)(F.g,{href:"https://supabase.com/docs/guides/local-development/cli/getting-started?queryGroups=platform&platform=linux#updating-the-supabase-cli","data-sentry-element":"InlineLink","data-sentry-source-file":"LocalVersionPopover.tsx",children:"CLI"}),"."]})]}),(0,a.jsxs)(X.Z,{type:"default",title:"Beta Releases",description:"Beta releases are also available between stable releases through the Beta version of the CLI, which might be helpful if you are waiting for a specific fix.","data-sentry-element":"Admonition","data-sentry-source-file":"LocalVersionPopover.tsx",children:[(0,a.jsx)("p",{className:"!mt-2",children:"If you'd like to try, we recommend doing so via npm:"}),(0,a.jsx)("div",{className:"flex items-center bg-surface-200 py-1 px-2 rounded mt-2 mb-1",children:(0,a.jsx)(tG.X,{parentClassName:"bg-surface-200","data-sentry-element":"SimpleCodeBlock","data-sentry-source-file":"LocalVersionPopover.tsx",children:"npm i supabase@beta --save-dev"})}),(0,a.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["Latest Beta version: ",(0,a.jsx)("span",{children:e.beta})]}),(0,a.jsx)(tU.A,{href:"https://supabase.com/docs/guides/local-development/cli/getting-started?queryGroups=platform&platform=linux#using-beta-version",className:"!no-underline mt-2","data-sentry-element":"DocsButton","data-sentry-source-file":"LocalVersionPopover.tsx"})]})]})]})]}),(0,a.jsx)(b.$,{type:"default",asChild:!0,"data-sentry-element":"Button","data-sentry-source-file":"LocalVersionPopover.tsx",children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://supabase.com/docs/guides/local-development/cli/getting-started?queryGroups=platform&platform=linux",children:"CLI Docs"})})]}),(0,a.jsx)(eU.zT,{className:"my-4","data-sentry-element":"PopoverSeparator_Shadcn_","data-sentry-source-file":"LocalVersionPopover.tsx"}),(0,a.jsxs)("div",{className:"flex items-center gap-x-4 px-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)("p",{className:"text-xs",children:"Current version:"}),(0,a.jsx)("p",{className:"text-sm font-mono",children:n})]}),r&&i&&!c&&(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)("p",{className:"text-xs",children:"Available version:"}),(0,a.jsx)("p",{className:"text-sm font-mono",children:s})]})]})]})]}):null};var tZ=n(66034),tJ=n(84926);let tQ=()=>{let{ref:e}=(0,r.g)(),t=(0,s.useRouter)(),{data:n}=(0,ez.YA)(),{data:o}=(0,q.s)(),l=(null==n?void 0:n.parent_project_ref)||e,{data:i}=(0,to.A)({projectRef:l},{enabled:!!n}),{mutate:c}=(0,W.h)(),{mutate:d,isLoading:u}=(0,tJ.O)({onError:()=>{p.oR.error("Failed to open merge request")}}),m=null==i?void 0:i.find(t=>t.project_ref===e);if(!l||!m||m.is_default||m.git_branch)return null;let f=!!(null==m?void 0:m.review_requested_at);return(0,a.jsx)(eE.G,{type:"default",className:"rounded-full w-[26px] h-[26px]",onClick:()=>{f?t.push("/project/".concat(m.project_ref,"/merge")):d({id:m.id,projectRef:l,requestReview:!0},{onSuccess:()=>{var e;p.oR.success("Merge request created"),t.push("/project/".concat(m.project_ref,"/merge")),c({action:"branch_create_merge_request_button_clicked",properties:{branchType:m.persistent?"persistent":"preview",origin:"header"},groups:{project:null!=l?l:"Unknown",organization:null!=(e=null==o?void 0:o.slug)?e:"Unknown"}})}})},loading:u,tooltip:{content:{text:f?"Review merge request":"Open merge request",side:"bottom",align:"center"}},icon:(0,a.jsxs)("div",{className:"relative",children:[f&&(0,a.jsx)("span",{className:"w-1 h-1 absolute top-0 right-0 rounded-full bg-brand"}),(0,a.jsx)(tZ.A,{size:16,strokeWidth:1.5})]}),"data-sentry-element":"ButtonTooltip","data-sentry-component":"MergeRequestButton","data-sentry-source-file":"MergeRequestButton.tsx"})};var tX=n(3267),t0=n(98357),t1=n(3829),t2=n(32144),t4=n(80251);let t3={list:()=>["notifications"],listV2:e=>["notifications",e],summary:()=>["notifications","summary"]};async function t5(){let{data:e,error:t}=await (0,f.F6)("/platform/notifications/archive-all",{headers:{Version:"2"}});return t&&(0,f.H4)(t),e}let t6=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,t2.jE)();return(0,t4.n)(()=>t5(),{async onSuccess(t,n,s){await a.invalidateQueries(t3.list()),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?p.oR.error("Failed to archive all notifications: ".concat(e.message)):t(e,n,a)},...n})};var t8=n(17702);async function t7(e,t){let{status:n,filters:a,page:s=0,limit:r=10}=e,{data:o,error:l}=await (0,f.Jt)("/platform/notifications",{params:{query:{offset:s*r,limit:r,...void 0!==n?{status:n}:{status:"new,seen"},...a.priority.length>0?{priority:a.priority.join(",")}:{},...a.organizations.length>0?{org_slug:a.organizations.join(",")}:{},...a.projects.length>0?{project_ref:a.projects.join(",")}:{}}},headers:{Version:"2"},signal:t});return l&&(0,f.H4)(l),o}let t9=function(e){let{status:t,filters:n,limit:a=10}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,t8.q)(t3.listV2({status:t,filters:n,limit:a}),e=>{let{signal:s,pageParam:r}=e;return t7({status:t,filters:n,limit:a,page:r},s)},{enabled:s,getNextPageParam(e,t){let n=t.length;if(!((null!=e?e:[]).length<a))return n},...r})};async function ne(e){let{data:t,error:n}=await (0,f.Jt)("/platform/notifications/summary",{signal:e});return n&&(0,f.H4)(n),t}let nt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,m.I)(t3.summary(),e=>{let{signal:t}=e;return ne(t)},e)};async function nn(e){let{ids:t,status:n}=e,{data:a,error:s}=await (0,f.F6)("/platform/notifications",{body:t.map(e=>({id:e,status:n})),headers:{Version:"2"}});return s&&(0,f.H4)(s),a}let na=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,t2.jE)();return(0,t4.n)(e=>nn(e),{async onSuccess(t,n,s){await a.invalidateQueries(["notifications"]),await (null==e?void 0:e(t,n,s))},async onError(e,n,a){void 0===t?p.oR.error("Failed to update notifications: ".concat(e.message)):t(e,n,a)},...n})};var ns=n(56028),nr=n(12532);let no=(0,ns.BX)({filterStatuses:[],filterPriorities:[],filterOrganizations:[],filterProjects:[],get numFiltersApplied(){return[...this.filterStatuses,...this.filterPriorities,...this.filterOrganizations,...this.filterProjects].length},setFilters:(e,t)=>{switch(t){case"status":no.filterStatuses.includes(e)?no.filterStatuses=no.filterStatuses.filter(t=>t!==e):no.filterStatuses=no.filterStatuses.concat([e]);break;case"priority":no.filterPriorities.includes(e)?no.filterPriorities=no.filterPriorities.filter(t=>t!==e):no.filterPriorities=no.filterPriorities.concat([e]);break;case"organizations":no.filterOrganizations.includes(e)?no.filterOrganizations=no.filterOrganizations.filter(t=>t!==e):no.filterOrganizations=no.filterOrganizations.concat([e]);break;case"projects":no.filterProjects.includes(e)?no.filterProjects=no.filterProjects.filter(t=>t!==e):no.filterProjects=no.filterProjects.concat([e])}},resetFilters:()=>{no.filterStatuses=[],no.filterPriorities=[],no.filterOrganizations=[],no.filterProjects=[]}}),nl=e=>(0,nr.s)(no,e);var ni=n(83570),nc=n(64317),nd=n(58696);let nu=e=>{var t;let{index:n,listRef:s,item:r,setRowHeight:o,getProject:l,getOrganizationById:i,getOrganizationBySlug:c,onUpdateNotificationStatus:p,queueMarkRead:m}=e,f=(0,u.useRef)(null),{ref:x,inView:h}=(0,nc.Wx)(),{status:g,priority:v}=r,j=r.data,w=void 0!==j.project_ref?l(j.project_ref):void 0,N=void 0!==j.org_slug?c(j.org_slug):void 0!==w?i(w.organization_id):void 0,k=d()().diff(d()(r.inserted_at),"day"),S=d()(r.inserted_at).fromNow(),_=d()(r.inserted_at).format("MMM DD, YYYY"),A=e=>{console.log("Action",e)};return(0,u.useEffect)(()=>{if(f.current){var e;null==s||null==(e=s.current)||e.resetAfterIndex(0),o(n,f.current.clientHeight)}},[f]),(0,u.useEffect)(()=>{h&&"new"===r.status&&m(r.id)},[h]),(0,a.jsxs)("div",{ref:f,className:(0,V.cn)("p-4 flex justify-between gap-x-3 group",0!==n?"border-t border-overlay":"","new"===g?"bg-surface-100/50":"bg-background"),"data-sentry-component":"NotificationRow","data-sentry-source-file":"NotificationRow.tsx",children:[(0,a.jsxs)("div",{ref:x,className:"flex flex-col gap-y-2.5 w-full py-0.5",children:[(void 0!==w||void 0!==N)&&(0,a.jsxs)("div",{className:"flex items-center max-w-[350px]",children:[void 0!==N&&(0,a.jsx)(C(),{title:N.name,href:"/org/".concat(N.slug,"/general"),className:"text-xs transition text-foreground-light hover:text-foreground underline truncate",children:N.name}),void 0!==N&&void 0!==w&&(0,a.jsx)("span",{className:"text-foreground-lighter",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",children:(0,a.jsx)("path",{d:"M16 3.549L7.12 20.600"})})}),void 0!==w&&(0,a.jsx)(C(),{title:w.name,href:"/project/".concat(w.ref),className:"text-xs transition text-foreground-light hover:text-foreground underline truncate",children:w.name})]}),(0,a.jsx)("div",{className:"flex items-center gap-x-2",children:(0,a.jsxs)("p",{className:"text-sm break-word",children:[j.title," ",(0,a.jsx)("span",{className:"ml-1 text-xs text-foreground-light capitalize-sentence",children:k>1?_:S})]})}),void 0!==j.message&&(0,a.jsx)(nd.o,{className:"text-foreground-light text-xs",content:j.message}),(null!=(t=j.actions)?t:[]).length>0&&(0,a.jsx)("div",{className:"flex items-center gap-x-2",children:j.actions.map((e,t)=>{let n="".concat(r.id,"-action-").concat(t);if(void 0!==e.url){var s,o;let t=e.url.includes("[ref]")?e.url.replace("[ref]",null!=(s=null==w?void 0:w.ref)?s:"_"):e.url.includes("[slug]")?e.url.replace("[slug]",null!=(o=null==N?void 0:N.slug)?o:"_"):e.url;return(0,a.jsx)(b.$,{type:"default",icon:(0,a.jsx)(I.A,{strokeWidth:1.5}),asChild:!0,children:(0,a.jsx)(C(),{href:t,target:"_blank",rel:"noreferrer",children:e.label})},n)}return void 0!==e.action_type?(0,a.jsx)(b.$,{type:"default",onClick:()=>A(e.action_type),children:e.label},n):null})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-y-2",children:["Warning"===v&&(0,a.jsx)(y.id,{className:"w-5 h-5"}),"Critical"===v&&(0,a.jsx)(y.HV,{className:"w-5 h-5"}),"archived"===r.status?(0,a.jsx)(eE.G,{type:"outline",icon:(0,a.jsx)(ni.A,{size:13,strokeWidth:2,className:"text-foreground-light"}),className:"p-1.5 group-hover:opacity-100 opacity-0 transition rounded-full",onClick:()=>p(r.id,"seen"),tooltip:{content:{text:"Unarchive",side:"bottom"}}}):(0,a.jsx)(eE.G,{type:"outline",icon:(0,a.jsx)(t0.A,{size:13,strokeWidth:2,className:"text-foreground-light"}),className:"p-1.5 group-hover:opacity-100 opacity-0 transition rounded-full",onClick:()=>p(r.id,"archived"),tooltip:{content:{text:"Archive",side:"bottom"}}})]})]})};var np=n(70723),nm=n(13891),nf=n(19428),nx=n(74245);let nh=e=>{let{activeTab:t}=e,[n,s]=(0,u.useState)(!1),r=nl(),{data:o}=(0,tb.Ad)(),{data:l}=(0,tc.el)();return(0,a.jsxs)(eU.AM,{modal:!0,open:n,onOpenChange:s,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"NotificationsFilter","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(eU.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:(0,a.jsx)(b.$,{type:r.numFiltersApplied>0?"default":"text",icon:(0,a.jsx)(np.A,{strokeWidth:1}),className:"px-1 h-[26px]","data-sentry-element":"Button","data-sentry-source-file":"NotificationsFilter.tsx",children:r.numFiltersApplied>0&&"".concat(r.numFiltersApplied," filter").concat(r.numFiltersApplied>1?"s":""," applied")})}),(0,a.jsx)(eU.hl,{className:"p-0 w-64",side:"bottom",align:"end","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:(0,a.jsxs)(eW.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(eW.G7,{placeholder:"Find filter...","data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx"}),(0,a.jsxs)(eW.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsxs)(ti.FK,{className:"max-h-[240px] py-1 overflow-y-auto","data-sentry-element":"ScrollArea","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsxs)(eW.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(e1.lp,{"data-sentry-element":"DropdownMenuLabel","data-sentry-source-file":"NotificationsFilter.tsx",children:"Status"}),(0,a.jsx)(eW.h_,{disabled:"archived"===t,onSelect:()=>{r.setFilters("unread","status")},"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:(0,a.jsxs)(nf.J,{htmlFor:"unread",className:(0,V.cn)("flex items-center gap-x-2 text-xs text-foreground-light transition-colors",r.filterStatuses.includes("unread")&&"text-foreground"),"data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(nx.S,{name:"unread",checked:r.filterStatuses.includes("unread"),"data-sentry-element":"Checkbox_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx"}),"Unread"]})})]}),(0,a.jsx)(eW.fx,{"data-sentry-element":"CommandSeparator_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx"}),(0,a.jsxs)(eW.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(e1.lp,{"data-sentry-element":"DropdownMenuLabel","data-sentry-source-file":"NotificationsFilter.tsx",children:"Priority"}),(0,a.jsx)(eW.h_,{onSelect:()=>{r.setFilters("Warning","priority")},className:"flex items-center gap-x-2","data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:(0,a.jsxs)(nf.J,{htmlFor:"warning",className:(0,V.cn)("flex items-center gap-x-2 text-xs text-foreground-light transition-colors",r.filterPriorities.includes("Warning")&&"text-foreground"),"data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(nx.S,{name:"warning",checked:r.filterPriorities.includes("Warning"),"data-sentry-element":"Checkbox_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx"}),(0,a.jsx)(y.id,{className:"size-4","data-sentry-element":"WarningIcon","data-sentry-source-file":"NotificationsFilter.tsx"}),"Warning"]})}),(0,a.jsx)(eW.h_,{onSelect:()=>{r.setFilters("Critical","priority")},"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:(0,a.jsxs)(nf.J,{htmlFor:"critical",className:(0,V.cn)("flex items-center gap-x-2 text-xs text-foreground-light transition-colors",r.filterPriorities.includes("Critical")&&"text-foreground"),"data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(nx.S,{name:"critical",checked:r.filterPriorities.includes("Critical"),"data-sentry-element":"Checkbox_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx"}),(0,a.jsx)(y.HV,{className:"size-4","data-sentry-element":"CriticalIcon","data-sentry-source-file":"NotificationsFilter.tsx"}),"Critical"]})},"critical")]}),(0,a.jsx)(eW.fx,{"data-sentry-element":"CommandSeparator_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx"}),(0,a.jsxs)(eW.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(e1.lp,{"data-sentry-element":"DropdownMenuLabel","data-sentry-source-file":"NotificationsFilter.tsx",children:"Organizations"}),(null!=o?o:[]).map(e=>(0,a.jsx)(eW.h_,{value:e.name.replaceAll('"',""),className:"flex items-center gap-x-2",onSelect:()=>{r.setFilters(e.slug,"organizations")},children:(0,a.jsxs)(nf.J,{htmlFor:"".concat(e.slug),className:(0,V.cn)("flex items-center gap-x-2 text-xs text-foreground-light transition-colors",r.filterOrganizations.includes(e.slug)&&"text-foreground"),children:[(0,a.jsx)(nx.S,{name:"".concat(e.slug),checked:r.filterOrganizations.includes(e.slug),className:""}),e.name]})},e.slug))]}),(0,a.jsx)(eW.fx,{"data-sentry-element":"CommandSeparator_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx"}),(0,a.jsxs)(eW.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(e1.lp,{"data-sentry-element":"DropdownMenuLabel","data-sentry-source-file":"NotificationsFilter.tsx",children:"Projects"}),(null!=l?l:[]).map(e=>(0,a.jsx)(eW.h_,{className:"flex items-center gap-x-2",onSelect:t=>{r.setFilters(e.ref,"projects")},children:(0,a.jsxs)(nf.J,{htmlFor:"".concat(e.ref),className:(0,V.cn)("flex items-center gap-x-2 text-xs text-foreground-light transition-colors",r.filterProjects.includes(e.ref)&&"text-foreground"),children:[(0,a.jsx)(nx.S,{name:"".concat(e.ref),checked:r.filterProjects.includes(e.ref),className:""}),e.name]})},e.ref))]})]}),(0,a.jsx)(eW.fx,{"data-sentry-element":"CommandSeparator_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx"}),(0,a.jsx)(eW.L$,{"data-sentry-element":"CommandGroup","data-sentry-source-file":"NotificationsFilter.tsx",children:(0,a.jsxs)(eW.h_,{onSelect:()=>r.resetFilters(),className:"flex gap-x-2 items-center","data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"NotificationsFilter.tsx",children:[(0,a.jsx)(nm.A,{className:"text-foreground-muted",size:12,strokeWidth:1,"data-sentry-element":"RotateCcw","data-sentry-source-file":"NotificationsFilter.tsx"}),"Reset filters"]})})]})]})})]})},ng=()=>{var e,t;let[n,s]=(0,u.useState)(!1),[r,o]=(0,u.useState)("inbox"),l=nl(),i=(0,u.useRef)([]),c=(0,u.useRef)({}),{data:d}=(0,tc.el)({enabled:n}),{data:m}=(0,tb.Ad)({enabled:n}),{data:f,error:x,isLoading:h,isError:g,isSuccess:y,hasNextPage:v,isFetchingNextPage:j,fetchNextPage:w}=t9({status:"archived"===r?"archived":l.filterStatuses.includes("unread")?"new":void 0,filters:{priority:l.filterPriorities,organizations:l.filterOrganizations,projects:l.filterProjects}},{enabled:n}),{data:N}=nt(),{mutate:k}=na(),{mutate:S,isLoading:C}=t6({onSuccess:()=>p.oR.success("Successfully archived all notifications")}),_=(0,u.useMemo)(()=>{var e;return null!=(e=null==f?void 0:f.pages.flatMap(e=>e))?e:[]},[null==f?void 0:f.pages]),A=null!=(e=null==N?void 0:N.unread_count)&&e,R=null==N?void 0:N.has_warning,I=null==N?void 0:N.has_critical,P=()=>{i.current.length>0&&k({ids:i.current,status:"seen"})};return(0,a.jsxs)(eU.AM,{modal:!1,open:n,onOpenChange:e=>{s(e),e||P()},"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"NotificationsPopoverV2","data-sentry-source-file":"NotificationsPopover.tsx",children:[(0,a.jsx)(eU.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"NotificationsPopover.tsx",children:(0,a.jsx)(eE.G,{tooltip:{content:{text:"Notifications"}},type:"text",className:(0,V.cn)("rounded-none h-[30px] w-[32px] group relative"),icon:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(tX.A,{size:18,strokeWidth:1.5,className:(0,V.cn)("!h-[18px] !w-[18px] text-foreground-light group-hover:text-foreground")}),I&&(0,a.jsx)("div",{className:"absolute -top-1 -right-2 w-3.5 h-3.5 z-10 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-0 h-0 border-l-[6px] border-r-[6px] border-b-[10px] border-l-transparent border-r-transparent border-b-destructive"})}),R&&!I&&(0,a.jsx)("div",{className:"absolute -top-1 -right-2 w-3.5 h-3.5 z-10 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-warning"})}),!!A&&!I&&!R&&(0,a.jsx)("div",{className:"absolute -top-1 -right-2 w-3.5 h-3.5 z-10 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-brand"})})]}),"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"NotificationsPopover.tsx"})}),(0,a.jsxs)(eU.hl,{className:"p-0 w-screen md:w-[450px] overflow-hidden",side:"bottom",align:"end","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"NotificationsPopover.tsx",children:[(0,a.jsxs)("div",{className:"px-4",children:[(0,a.jsx)("p",{className:"pt-4 pb-1 text-sm",children:"Notifications"}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(eB.tU,{className:"w-full",onValueChange:e=>{o(e),"archived"===e&&l.filterStatuses.includes("unread")&&l.setFilters("unread","status")},value:r,"data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"NotificationsPopover.tsx",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)(eB.j7,{className:"flex gap-5 grow border-none","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"NotificationsPopover.tsx",children:[(0,a.jsxs)(eB.Xi,{id:"inbox",value:"inbox",className:"px-0 data-[state=active]:bg-transparent flex gap-2","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"NotificationsPopover.tsx",children:["Inbox",(0,a.jsx)("div",{className:(0,V.cn)("flex items-center justify-center text-xs rounded-full bg-surface-300 h-4",(null!=(t=null==N?void 0:N.unread_count)?t:0)>9?"px-0.5 w-auto":"w-4"),children:null==N?void 0:N.unread_count})]}),(0,a.jsx)(eB.Xi,{id:"archived",value:"archived",className:"px-0 data-[state=active]:bg-transparent","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"NotificationsPopover.tsx",children:"Archived"})]}),(0,a.jsx)(nh,{activeTab:r,"data-sentry-element":"NotificationsFilter","data-sentry-source-file":"NotificationsPopover.tsx"})]})})})]}),(0,a.jsxs)("div",{className:"border-t",children:[h&&(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(z.y,{})}),g&&(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(T.A,{subject:"Failed to retrieve notifications",error:x})}),y&&(0,a.jsx)("div",{className:"flex flex-1 h-[400px] bg-background",children:_.length>0&&!("archived"===r&&l.filterStatuses.includes("unread"))?(0,a.jsx)(t1.A,{items:_,ItemComponent:nu,LoaderComponent:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(z.A,{})}),itemProps:{setRowHeight:(e,t)=>{c.current&&(c.current={...c.current,[e]:t})},getProject:e=>null==d?void 0:d.find(t=>t.ref===e),getOrganizationById:e=>null==m?void 0:m.find(t=>t.id===e),getOrganizationBySlug:e=>null==m?void 0:m.find(t=>t.slug===e),onUpdateNotificationStatus:(e,t)=>{k({ids:[e],status:t})},queueMarkRead:e=>{i.current&&!i.current.includes(e)&&i.current.push(e)}},getItemSize:e=>{var t,n;return null!=(n=null==c||null==(t=c.current)?void 0:t[e])?n:56},hasNextPage:v,isLoadingNextPage:j,onLoadNextPage:()=>w()}):(0,a.jsxs)("div",{className:"flex flex-col gap-y-4 items-center flex-grow justify-center",children:[(0,a.jsx)(tX.A,{size:32,className:"text-foreground-light"}),(0,a.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,a.jsx)("p",{className:"text-foreground-light text-sm mx-auto text-center",children:"archived"===r?"No archived notifications".concat(l.numFiltersApplied>0?" based on the ".concat(l.numFiltersApplied," filter").concat(l.numFiltersApplied>1?"s":""," applied"):""):l.numFiltersApplied>0?"No notifications based on the ".concat(l.numFiltersApplied," filter").concat(l.numFiltersApplied>1?"s":""," applied"):"All caught up"}),(0,a.jsx)("p",{className:"text-foreground-lighter text-xs w-60 mx-auto text-center",children:"archived"===r?"Notifications that you have previously archived will be shown here":"You will be notified here for any notices on your organizations and projects"})]})]})})]}),_.length>0&&"inbox"===r&&(0,a.jsx)("div",{className:"flex items-center justify-center p-1.5 border-t",children:(0,a.jsx)(b.$,{disabled:C,loading:C,type:"text",icon:(0,a.jsx)(t0.A,{}),onClick:()=>S(),children:"Archive all"})})]})]})},ny=e=>{let{className:t,...n}=e;return(0,a.jsx)("span",{className:(0,V.cn)("text-border-stronger pr-2",t),...n,"data-sentry-component":"LayoutHeaderDivider","data-sentry-source-file":"LayoutHeader.tsx",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision","data-sentry-element":"svg","data-sentry-source-file":"LayoutHeader.tsx",children:(0,a.jsx)("path",{d:"M16 3.549L7.12 20.600","data-sentry-element":"path","data-sentry-source-file":"LayoutHeader.tsx"})})})},nb=e=>{let{customHeaderComponents:t,breadcrumbs:n=[],headerTitle:s,showProductMenu:o}=e,{ref:l,slug:i}=(0,r.g)(),{data:c}=(0,ez.YA)(),{data:d}=(0,q.s)(),{setMobileMenuOpen:p}=(0,tl.qM)(),m=(0,_.fe)(),[f,h]=(0,u.useState)(!1);(0,tk.C)(()=>{l&&h(!f)},"e",[f,l]);let{data:g}=(0,tN.n)({orgSlug:null==d?void 0:d.slug},{enabled:(null==d?void 0:d.usage_billing_enabled)===!1}),y=(0,u.useMemo)(()=>!!g&&tw((null==g?void 0:g.usages)||[]).length>0,[g]),b=i||d&&l;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("header",{className:(0,V.cn)("flex h-12 items-center flex-shrink-0 border-b"),children:[o&&(0,a.jsx)("div",{className:"flex items-center justify-center border-r flex-0 md:hidden h-full aspect-square",children:(0,a.jsxs)("button",{title:"Menu dropdown button",className:(0,V.cn)("group/view-toggle ml-4 flex justify-center flex-col border-none space-x-0 items-start gap-1 !bg-transparent rounded-md min-w-[30px] w-[30px] h-[30px]"),onClick:()=>p(!0),children:[(0,a.jsx)("div",{className:"h-px inline-block left-0 w-4 transition-all ease-out bg-foreground-lighter group-hover/view-toggle:bg-foreground p-0 m-0"}),(0,a.jsx)("div",{className:"h-px inline-block left-0 w-3 transition-all ease-out bg-foreground-lighter group-hover/view-toggle:bg-foreground p-0 m-0"})]})}),(0,a.jsxs)("div",{className:(0,V.cn)("flex items-center justify-between h-full pr-3 flex-1 overflow-x-auto gap-x-8 pl-4"),children:[(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(tO,{"data-sentry-element":"HomeIcon","data-sentry-source-file":"LayoutHeader.tsx"}),(0,a.jsxs)("div",{className:"flex items-center md:pl-2",children:[b&&x.pe?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ny,{className:"hidden md:block"}),(0,a.jsx)(tv,{})]}):null,(0,a.jsx)(N.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"LayoutHeader.tsx",children:l&&(0,a.jsxs)(k.P.div,{className:"flex items-center",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.15,ease:"easeOut"},children:[(0,a.jsx)(ny,{}),(0,a.jsx)(tm,{}),y&&(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)(C(),{href:"/org/".concat(null==d?void 0:d.slug,"/usage"),children:(0,a.jsx)(J.E,{variant:"destructive",className:"whitespace-nowrap",children:"Exceeding usage limits"})})}),c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ny,{}),x.pe&&(0,a.jsx)(tx,{})]})]})}),(0,a.jsx)(N.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"LayoutHeader.tsx",children:s&&(0,a.jsxs)(k.P.div,{className:"flex items-center",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.15,ease:"easeOut"},children:[(0,a.jsx)(ny,{}),(0,a.jsx)("span",{className:"text-foreground",children:s})]})})]}),(0,a.jsx)(N.N,{"data-sentry-element":"AnimatePresence","data-sentry-source-file":"LayoutHeader.tsx",children:l&&(0,a.jsxs)(k.P.div,{className:"ml-3 items-center gap-x-2 flex",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.15,ease:"easeOut"},children:[x.pe&&m&&(0,a.jsx)(tQ,{}),(0,a.jsx)(eJ,{})]})}),(0,a.jsx)(tS,{defaultValue:n,"data-sentry-element":"BreadcrumbsView","data-sentry-source-file":"LayoutHeader.tsx"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[t&&t,x.pe?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tC.R,{}),(0,a.jsxs)("div",{className:"overflow-hidden flex items-center rounded-full border",children:[(0,a.jsx)(tB,{}),(0,a.jsx)(ng,{}),(0,a.jsx)(N.N,{initial:!1,children:!!l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(th,{onClick:()=>h(!0)}),(0,a.jsx)(e9,{})]})})]}),(0,a.jsx)(e5.X,{})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tY,{}),(0,a.jsx)("div",{className:"overflow-hidden flex items-center rounded-full border",children:(0,a.jsx)(N.N,{initial:!1,children:!!l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(th,{onClick:()=>h(!0)}),(0,a.jsx)(e9,{})]})})}),(0,a.jsx)(e3,{})]})]})]})]}),(0,a.jsx)(tj.A,{open:f,onClose:()=>h(!1),"data-sentry-element":"EditorPanel","data-sentry-source-file":"LayoutHeader.tsx"})]})};var nv=n(75189),nj=n(26638),nw=n(85420),nN=n(37283);let nk=()=>{let e=(0,s.useRouter)(),[t,n]=(0,u.useState)(!1),{ref:o}=(0,r.g)();return(0,a.jsxs)("div",{className:"h-14 w-full flex flex-row md:hidden","data-sentry-component":"MobileNavigationBar","data-sentry-source-file":"MobileNavigationBar.tsx",children:[(0,a.jsxs)("nav",{className:(0,V.cn)("group px-4 z-10 w-full h-14","border-b bg-dash-sidebar border-default shadow-xl","transition-width duration-200","hide-scrollbar flex flex-row items-center justify-between overflow-x-auto"),children:[(0,a.jsx)(C(),{href:x.pe?"/organizations":"/project/".concat(o),className:"flex items-center h-[26px] w-[26px] min-w-[26px]","data-sentry-element":"Link","data-sentry-source-file":"MobileNavigationBar.tsx",children:(0,a.jsx)("img",{alt:"Supabase",src:"".concat(e.basePath,"/img/supabase-logo.svg"),className:"absolute h-[26px] w-[26px] cursor-pointer rounded"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(nw.Zj,{"data-sentry-element":"CommandMenuTrigger","data-sentry-source-file":"MobileNavigationBar.tsx",children:(0,a.jsx)("button",{className:(0,V.cn)("group","flex-grow h-[30px] rounded-md","p-2","flex items-center justify-between","bg-transparent border-none text-foreground-lighter","hover:bg-opacity-100 hover:border-strong hover:text-foreground-light","focus-visible:!outline-4 focus-visible:outline-offset-1 focus-visible:outline-brand-600","transition"),children:(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)(nv.A,{size:18,strokeWidth:2,"data-sentry-element":"Search","data-sentry-source-file":"MobileNavigationBar.tsx"})})})}),(0,a.jsx)("button",{title:"Menu dropdown button",className:(0,V.cn)((0,b.r)({type:"default"}),"flex lg:hidden border-default bg-surface-100/75 text-foreground-light rounded-md min-w-[30px] w-[30px] h-[30px] data-[state=open]:bg-overlay-hover/30"),onClick:()=>n(!0),children:(0,a.jsx)(nj.A,{size:18,strokeWidth:1,"data-sentry-element":"Menu","data-sentry-source-file":"MobileNavigationBar.tsx"})})]})]}),(0,a.jsx)(nN.A,{open:t,onOpenChange:n,"data-state":"expanded","data-sentry-element":"MobileSheetNav","data-sentry-source-file":"MobileNavigationBar.tsx",children:(0,a.jsx)(i.Yv,{"data-sentry-element":"SidebarContent","data-sentry-source-file":"MobileNavigationBar.tsx"})})]})};var nS=n(98832);let nC=e=>{let{children:t,headerTitle:n}=e,{ref:c}=(0,r.g)(),m=(0,s.useRouter)(),f=!!c&&"/project/[ref]"!==m.pathname;return!function(){let e=(0,v._P)("showRefreshToast"),[t,n]=(0,u.useState)(""),[s,o]=(0,u.useState)(!1),{data:l}=g({enabled:r.pe&&e,staleTime:1e4});(0,u.useEffect)(()=>{if(l&&"unknown"!==l.commitTime){if(!t)return void n(l.commitTime);t!==l.commitTime&&!s&&(24>d()(l.commitTime).diff(d()(t),"hour")||(p.oR.custom(e=>(0,a.jsx)(j,{id:e}),{duration:1/0,position:"bottom-right"}),o(!0)))}},[l,s,t])}(),(0,a.jsx)(w.GB,{defaultOpen:!1,"data-sentry-element":"SidebarProvider","data-sentry-component":"DefaultLayout","data-sentry-source-file":"DefaultLayout.tsx",children:(0,a.jsx)(nS.g,{projectRef:c,"data-sentry-element":"ProjectContextProvider","data-sentry-source-file":"DefaultLayout.tsx",children:(0,a.jsx)(l.WQ,{"data-sentry-element":"AppBannerContextProvider","data-sentry-source-file":"DefaultLayout.tsx",children:(0,a.jsxs)("div",{className:"flex flex-col h-screen w-screen",children:[(0,a.jsx)(o.H,{"data-sentry-element":"AppBannerWrapper","data-sentry-source-file":"DefaultLayout.tsx"}),(0,a.jsxs)("div",{className:"flex-shrink-0",children:[(0,a.jsx)(nk,{"data-sentry-element":"MobileNavigationBar","data-sentry-source-file":"DefaultLayout.tsx"}),(0,a.jsx)(nb,{showProductMenu:f,headerTitle:n,"data-sentry-element":"LayoutHeader","data-sentry-source-file":"DefaultLayout.tsx"})]}),(0,a.jsxs)("div",{className:"flex flex-1 w-full overflow-y-hidden",children:[(0,a.jsx)(i.Bx,{"data-sentry-element":"Sidebar","data-sentry-source-file":"DefaultLayout.tsx"}),(0,a.jsx)("div",{className:"flex-grow h-full overflow-y-auto",children:t})]})]})})})})}},66188:(e,t,n)=>{"use strict";n.d(t,{c:()=>r}),n(73969);var a=n(65172),s=n(63492);let r=async(e,t)=>{let{projectRef:n,bucketId:r,path:o,options:l}=e;if(!r)throw Error("bucketId is required");let i=await (0,a.tQ)("".concat(s.H$).concat(s.pe?"":"/platform","/storage/").concat(n,"/buckets/").concat(r,"/objects/download"),{path:o,options:l,abortSignal:t});if(i.error)throw i.error;return i}},66628:(e,t,n)=>{"use strict";n.d(t,{ME:()=>f,Qj:()=>h,RY:()=>x,_c:()=>y,sc:()=>g});var a=n(80263),s=n(53239),r=n(56028),o=n(12532),l=n(80535),i=n(15629),c=n(43712),d=n(5483),u=n(667);function p(e,t){let n=(0,r.BX)({projectRef:e,role:void 0,claims:void 0,setRole:async(a,s)=>{let r=(null==a?void 0:a.type)==="postgrest"?(0,u.bL)(e,a):void 0;if((null==s?void 0:s.type)==="postgres"&&void 0!==r){let{schema:e,functionName:n}=s,a=await t.current({schema:e,functionName:n,claims:r});a&&(r=a)}n.role=a,r&&(n.claims=r)}});return n}let m=(0,s.createContext)(p("",{current:async()=>{}})),f=e=>{let{children:t}=e,{data:n}=(0,d.YA)();async function s(e){var t,a,s;let{schema:r,functionName:o,claims:l}=e,c={user_id:l.sub,claims:l,authentication_method:"password"},d=await (0,i.E)({projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString,sql:"select ".concat(r,".").concat(o,"('").concat(JSON.stringify(c),"'::jsonb) as event;"),queryKey:["customize-access-token",null==n?void 0:n.ref]});return null==d||null==(s=d.result)||null==(a=s[0])||null==(t=a.event)?void 0:t.claims}let r=(0,c.A)(s),o=(0,l.MF)(()=>{var e;return p(null!=(e=null==n?void 0:n.ref)?e:"",r)});return(0,a.jsx)(m.Provider,{value:o,"data-sentry-element":"unknown","data-sentry-component":"RoleImpersonationStateContextProvider","data-sentry-source-file":"role-impersonation-state.tsx",children:t})};function x(e){let t=(0,s.useContext)(m);return(0,o.s)(t,e)}function h(){let e=(0,s.useContext)(m);return(0,s.useCallback)(()=>(0,r.P9)(e),[e])}function g(e){let t=(0,s.useContext)(m),n=(0,c.A)(e);(0,s.useEffect)(()=>(0,r.B1)(t,()=>{n.current((0,r.P9)(t).role)}),[t])}function y(e){return(null==e?void 0:e.type)==="postgrest"}},70856:e=>{e.exports={loading:"loading-anim_loading__rDN7u",dash:"loading-anim_dash__HIPR0"}},73563:(e,t,n)=>{"use strict";n.d(t,{C:()=>s});var a=n(53239);function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,a.useEffect)(()=>{function n(n){(n.metaKey||n.ctrlKey)&&n.key===t&&!n.altKey&&!n.shiftKey&&e(n)}return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[t,...n])}},73934:(e,t,n)=>{"use strict";n.d(t,{GF:()=>s,Js:()=>a,rB:()=>r,s2:()=>o});let a=0x3200000,s=0xc80000000,r=536870912e3;var o=function(e){return e.BYTES="bytes",e.KB="KB",e.MB="MB",e.GB="GB",e}({})},74245:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});var a=n(80263),s=n(64744),r=n(80903),o=n(53239),l=n(51500);let i=o.forwardRef((e,t)=>{let{className:n,...o}=e;return(0,a.jsx)(s.bL,{ref:t,className:(0,l.cn)("peer flex items-center justify-center h-4 w-4 shrink-0 rounded border border-control bg-control/25 ring-offset-background","transition-colors duration-150 ease-in-out","hover:border-strong","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground data-[state=checked]:text-background",n),...o,children:(0,a.jsx)(s.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(r.A,{className:"h-3 w-3",strokeWidth:4})})})});i.displayName=s.bL.displayName},74988:(e,t,n)=>{var a={"./androidkotlin/supabasekt/content":[48352,8352],"./astro/supabasejs/content":[84681,4681],"./drizzle/content":[81640,1640],"./exporeactnative/supabasejs/content":[61042,1042],"./flutter/supabaseflutter/content":[78677,8677],"./ionicangular/supabasejs/content":[7406,7406],"./ionicreact/supabasejs/content":[85843,5843],"./nextjs/app/supabasejs/content":[3876,3876],"./nextjs/pages/supabasejs/content":[96603,6603],"./nuxt/supabasejs/content":[49839,9839],"./prisma/content":[2178,2178],"./react/create-react-app/supabasejs/content":[32602,2602],"./react/vite/supabasejs/content":[78812,8812],"./refine/supabasejs/content":[72439,2439],"./remix/supabasejs/content":[46079,6079],"./solidjs/supabasejs/content":[32878,2878],"./sveltekit/supabasejs/content":[38051,8051],"./swift/supabaseswift/content":[9865,9865],"./vuejs/supabasejs/content":[83825,3825]};function s(e){if(!n.o(a,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],s=t[0];return n.e(t[1]).then(()=>n(s))}s.keys=()=>Object.keys(a),s.id=74988,e.exports=s},76129:(e,t,n)=>{"use strict";n.d(t,{$S:()=>v,Aw:()=>f,E9:()=>h,FU:()=>m,GL:()=>N,Tk:()=>b,VO:()=>w,hl:()=>x,kz:()=>j,rH:()=>g});var a=n(2827),s=n(93896),r=n.n(s),o=n(53239),l=n(41728),i=n(61179),c=n(52647),d=n(44293),u=n(17373),p=n(12803);function m(e,t){return Array.isArray(t)?r()(t.map(t=>{let[n,a]=t.split(":");if(n&&a)return{table:e,column:n,ascending:"asc"===a}})):[]}function f(e){return e.map(e=>"".concat(e.column,":").concat(e.ascending?"asc":"desc"))}function x(e){return Array.isArray(e)?e.map(e=>{let[t,n,...a]=e.split(":"),s=a.join(":"),r=d.D.find(e=>e.abbrev===n);if(t&&n&&r)return{column:t,operator:r.value,value:s||""}}).filter(e=>void 0!==e):[]}function h(e){return e.map(e=>{let t=d.D.find(t=>t.value===e.operator);return"".concat(e.column,":").concat(null==t?void 0:t.abbrev,":").concat(e.value)})}function g(e){let t=e.columns,n=(0,l.KO)(e)?e.primary_keys:[],a=(0,l.KO)(e)?e.relationships:[],s=t.map(e=>{let t={position:e.ordinal_position,name:e.name,defaultValue:e.default_value,dataType:e.data_type,format:e.format,isPrimaryKey:!1,isIdentity:e.is_identity,isGeneratable:"BY DEFAULT"==e.identity_generation,isNullable:e.is_nullable,isUpdatable:e.is_updatable,enum:e.enums,comment:e.comment,foreignKey:{targetTableSchema:null,targetTableName:null,targetColumnName:null,deletionAction:void 0,updateAction:void 0}};t.isPrimaryKey=!!n.find(t=>t.name==e.name);let s=a.find(t=>t.source_schema===e.schema&&t.source_table_name===e.table&&t.source_column_name===e.name);return s&&(t.foreignKey.targetTableSchema=s.target_table_schema,t.foreignKey.targetTableName=s.target_table_name,t.foreignKey.targetColumnName=s.target_column_name,t.foreignKey.deletionAction=s.deletion_action,t.foreignKey.updateAction=s.update_action),t});return{id:e.id,name:e.name,comment:e.comment,schema:e.schema,columns:s,estimateRowCount:(0,l.KO)(e)?e.live_rows_estimate:0}}function y(e,t){return"".concat(e,"_").concat(t)}function b(e,t,n){let a=y(u.XW,e),s=localStorage.getItem(a);if(s)return JSON.parse(s)[n&&"public"!=n?"".concat(n,".").concat(t):t]}function v(e){let t,{projectRef:n,tableName:a,schema:s,gridColumns:r,sorts:o,filters:l}=e,i=y(u.XW,n),c=localStorage.getItem(i),d=s&&"public"!=s?"".concat(s,".").concat(a):a,p={...void 0!==r&&{gridColumns:r},...void 0!==o&&{sorts:o},...void 0!==l&&{filters:l}};if(c){let e=(t=JSON.parse(c))[d];t={...t,[d]:{...e,...p}}}else t={[d]:p};localStorage.setItem(i,JSON.stringify(t))}let j=(0,a.A)(v,500);function w(e){let{projectRef:t,table:n}=e,[a,s]=(0,i.W)({arrayKeys:["sort","filter"]});(0,o.useEffect)(()=>{let e;if(!t||!n)return;let a=new URLSearchParams(window.location.search),r=b(t,n.name,n.schema);a.getAll("sort").length<=0&&(null==r?void 0:r.sorts)&&(e={...e,sort:r.sorts}),a.getAll("filter").length<=0&&(null==r?void 0:r.filters)&&(e={...e,filter:r.filters}),e&&s(t=>({...t,...e}))},[t,n])}let N=(e,t)=>{let{column:n,row:a}=e;if("KeyC"===t.code&&(t.metaKey||t.ctrlKey)){var s;let e=null!=(s=a[n.key])?s:"",t=(0,p.x)(e);(0,c.l)(t)}}},78358:(e,t,n)=>{"use strict";n.d(t,{Ed:()=>d,GT:()=>i,KQ:()=>l,M4:()=>o,O5:()=>c,Qx:()=>u,bs:()=>m,lI:()=>p,m4:()=>f});var a=n(53337),s=n(63492),r=n(78435);let o=660,l=50,i=20,c={...s.BU,INIT_READ_REPLICA:"INIT_READ_REPLICA",INIT_READ_REPLICA_FAILED:"INIT_READ_REPLICA_FAILED"},d={SOUTHEAST_ASIA:[103.8,1.37],NORTHEAST_ASIA:[139.42,35.41],NORTHEAST_ASIA_2:[126.98,37.56],CENTRAL_CANADA:[-73.6,45.5],WEST_US:[-121.96,37.35],EAST_US:[-78.45,38.13],WEST_EU:[-8,53],WEST_EU_2:[-.1,51],CENTRAL_EU:[8,50],SOUTH_ASIA:[72.88,19.08],OCEANIA:[151.2,-33.86],SOUTH_AMERICA:[-46.38,-23.34],CENTRAL_EU_2:[8.54,47.45],EAST_US_2:[-83,39.96],NORTH_EU:[17.91,59.65],WEST_EU_3:[2.35,48.86]},u={SOUTHEAST_ASIA:[103.8,1.37]},p=Object.keys(r.m_).map(e=>({key:e,name:null===r.m_||void 0===r.m_?void 0:r.m_[e].displayName,region:null===r.m_||void 0===r.m_?void 0:r.m_[e].code,coordinates:d[e]})).filter(e=>void 0!==e.coordinates),m={[a.hh.Requested]:"Requesting replica instance",[a.hh.Started]:"Launching replica instance",[a.hh.LaunchedReadReplicaInstance]:"Initiating replica setup",[a.hh.InitiatedReadReplicaSetup]:"Downloading base backup",[a.hh.DownloadedBaseBackup]:"Replaying WAL archives",[a.hh.ReplayedWalArchives]:"Completing set up",[a.hh.CompletedReadReplicaSetup]:"Completed"},f={[a.su.ReadReplicaInstanceLaunchFailed]:"Failed to launch replica",[a.su.InitiateReadReplicaSetupFailed]:"Failed to initiate replica",[a.su.DownloadBaseBackupFailed]:"Failed to download backup",[a.su.ReplayWalArchivesFailed]:"Failed to replay WAL archives",[a.su.CompleteReadReplicaSetupFailed]:"Failed to set up replica"}},78720:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i});var a=n(32144),s=n(80251),r=n(73969),o=n(15629);let l=["branches","settings-v2","addons","custom-domains","content"],i=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,a.jE)();return(0,s.n)(e=>(0,o.E)(e),{async onSuccess(t,n,a){let{contextualInvalidation:s,sql:r,projectRef:o}=n,c=r.toLowerCase(),d=c.includes("create ")||c.includes("alter ")||c.includes("drop ");if(s&&o&&d){let e=i.getQueryCache().findAll(["projects",o]).map(e=>e.queryKey).filter(e=>!l.some(t=>e.includes(t)));await Promise.all(e.map(e=>i.invalidateQueries(e)))}await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?r.oR.error("Failed to execute SQL: ".concat(e.message)):t(e,n,a)},...n})}},79033:(e,t,n)=>{"use strict";n.d(t,{ap:()=>u,by:()=>d,to:()=>l});var a=n(80263),s=n(53239),r=n(56028),o=n(12532);let l=100,i=()=>{let e=(0,r.BX)({rowsPerPage:l,setRowsPerPage:t=>{e.rowsPerPage=t},ui:{open:"none"},get sidePanel(){return"side-panel"===e.ui.open?e.ui.sidePanel:void 0},get confirmationDialog(){return"confirmation-dialog"===e.ui.open?e.ui.confirmationDialog:void 0},closeSidePanel:()=>{e.ui={open:"none"}},closeConfirmationDialog:()=>{e.ui={open:"none"}},onAddSchema:()=>{e.ui={open:"side-panel",sidePanel:{type:"schema",mode:"new"}}},onAddTable:()=>{e.ui={open:"side-panel",sidePanel:{type:"table",mode:"new"}}},onEditTable:()=>{e.ui={open:"side-panel",sidePanel:{type:"table",mode:"edit"}}},onDuplicateTable:()=>{e.ui={open:"side-panel",sidePanel:{type:"table",mode:"duplicate"}}},onDeleteTable:()=>{e.ui={open:"confirmation-dialog",confirmationDialog:{type:"table",isDeleteWithCascade:!1}}},onAddColumn:()=>{e.ui={open:"side-panel",sidePanel:{type:"column"}}},onEditColumn:t=>{e.ui={open:"side-panel",sidePanel:{type:"column",column:t}}},onDeleteColumn:t=>{e.ui={open:"confirmation-dialog",confirmationDialog:{type:"column",column:t,isDeleteWithCascade:!1}}},onAddRow:()=>{e.ui={open:"side-panel",sidePanel:{type:"row"}}},onEditRow:t=>{e.ui={open:"side-panel",sidePanel:{type:"row",row:t}}},onDeleteRows:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{numRows:0,allRowsSelected:!1,callback:()=>{}},{numRows:a,allRowsSelected:s,callback:r}=n;e.ui={open:"confirmation-dialog",confirmationDialog:{type:"row",rows:t,numRows:a,allRowsSelected:s,callback:r}}},onExpandJSONEditor:t=>{e.ui={open:"side-panel",sidePanel:{type:"json",jsonValue:t}}},onExpandTextEditor:(t,n)=>{e.ui={open:"side-panel",sidePanel:{type:"cell",value:{column:t,row:n}}}},onEditForeignKeyColumnValue:t=>{e.ui={open:"side-panel",sidePanel:{type:"foreign-row-selector",foreignKey:t}}},onImportData:()=>{e.ui={open:"side-panel",sidePanel:{type:"csv-import"}}},toggleConfirmationIsWithCascade:t=>{"confirmation-dialog"===e.ui.open&&("column"===e.ui.confirmationDialog.type||"table"===e.ui.confirmationDialog.type)&&(e.ui.confirmationDialog.isDeleteWithCascade=null!=t?t:!e.ui.confirmationDialog.isDeleteWithCascade)}});return e},c=(0,s.createContext)(i()),d=e=>{let{children:t}=e,n=(0,s.useRef)(i()).current;return(0,a.jsx)(c.Provider,{value:n,"data-sentry-element":"unknown","data-sentry-component":"TableEditorStateContextProvider","data-sentry-source-file":"table-editor.tsx",children:t})},u=e=>{let t=(0,s.useContext)(c);return(0,o.s)(t,e)}},79512:(e,t,n)=>{"use strict";n.d(t,{cr:()=>u,dZ:()=>x,fW:()=>r,h8:()=>i,iD:()=>f,j8:()=>l,mG:()=>c,o5:()=>p,r:()=>m,rs:()=>o,xL:()=>d});var a=n(34531),s=n(32248);n(63748);let r=e=>{let{id:t,name:n,sql:a,owner_id:r,project_id:o,folder_id:l}=e;return{...s._L,id:t,owner_id:r,project_id:o,name:n,folder_id:l,favorite:!1,inserted_at:new Date().toISOString(),updated_at:new Date().toISOString(),content:{...s._L.content,content_id:null!=t?t:"",sql:null!=a?a:""},isNotSavedInDatabaseYet:!0}};function o(e){let t=(0,a.VK)(e);return s.s9.some(e=>e.test(t))}function l(e){let t=RegExp('(?:^|;)\\s*update\\s+(?:"[\\w.]+"\\."[\\w.]+"|[\\w.]+)\\s+set\\s+[\\w\\W]+?(?!\\s*where\\s)',"is");return e.split(";").filter(e=>e.trim().toLowerCase().startsWith("update")).some(e=>t.test(e)&&!/where\s/i.test(e))}let i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"\n".concat(n?"npx ":"","supabase snippets download ").concat(e," |\n").concat(n?"npx ":"","supabase migration new ").concat(t,"\n").trim()},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"\n".concat(t?"npx ":"","supabase snippets download ").concat(e," >> \\\n  supabase/seed.sql\n").trim()},d=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"\n".concat(n?"npx ":"","supabase snippets download ").concat(e," > \\\n  ").concat(t,".sql\n").trim()},u=e=>{let t=e.modified.replace(s.Fl,"").trim();return{original:e.original,modified:"".concat(t)}},p=e=>{let t=e.original.replace(s.Fl,"").trim(),n=e.modified.replace(s.Fl,"").trim();return{original:e.original,modified:(t?t+"\n\n":"")+n}},m=e=>({original:"",modified:e.modified}),f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.trim().replaceAll("\n"," ").replaceAll(/\s+/g," "),a=Array(...n.matchAll(/[a-zA-Z]*[0-9]*[;]+/g)),s=n.lastIndexOf(";"),r=n.includes("--"),o=a.length>1||s>0&&s!==n.length-1,l=t>0&&!r&&!o&&n.toLowerCase().startsWith("select")&&!n.toLowerCase().match(/fetch\s+first/i)&&!n.match(/limit$/i)&&!n.match(/limit;$/i)&&!n.match(/limit [0-9]* offset [0-9]*[;]?$/i)&&!n.match(/limit [0-9]*[;]?$/i);return{cleanedSql:n,appendAutoLimit:l}},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{cleanedSql:n,appendAutoLimit:a}=f(e,t);return a?n.endsWith(";")?e.replace(/[;]+$/," limit ".concat(t,";")):"".concat(e," limit ").concat(t,";"):e}},80586:(e,t,n)=>{"use strict";n.d(t,{Xi:()=>c,av:()=>d,j7:()=>i,tU:()=>l});var a=n(80263),s=n(46115),r=n(53239),o=n(51500);let l=s.bL,i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.B8,{ref:t,className:(0,o.cn)("flex items-center border-b",n),...r})});i.displayName=s.B8.displayName;let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.l9,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap py-1.5 text-sm  ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground data-[state=active]:shadow-sm text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent","group",n),...r})});c.displayName=s.l9.displayName;let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.UC,{ref:t,className:(0,o.cn)("mt-4 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...r})});d.displayName=s.UC.displayName},82143:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var a=n(80263),s=n(14360),r=n(84513),o=n.n(r),l=n(83927),i=n.n(l),c=n(53239),d=n(58696),u=n(5483),p=n(34487),m=n(34531),f=n(51500),x=n(10306);let h=e=>{e.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})})},g={runQuery:{enabled:!1,callback:i()},explainCode:{enabled:!1,callback:i()},formatDocument:{enabled:!0,callback:i()},placeholderFill:{enabled:!0},closeAssistant:{enabled:!1,callback:i()}},y=e=>{let{id:t,language:n,defaultValue:r,autofocus:l=!0,isReadOnly:y=!1,hideLineNumbers:b=!1,className:v,loading:j,options:w,value:N,placeholder:k,actions:S=g,editorRef:C,onInputChange:_=i()}=e,A=(0,s.useMonaco)(),{data:R}=(0,u.YA)(),I=(0,c.useRef)(),P=(0,c.useRef)(),E=C||P,L=(0,c.useRef)(),{runQuery:T,placeholderFill:D,formatDocument:F,explainCode:z,closeAssistant:B}={...g,...S},M=void 0!==k&&0===(null!=N?N:"").trim().length,[O,U]=(0,c.useState)(M),W=o()({tabSize:2,fontSize:13,readOnly:y,minimap:{enabled:!1},wordWrap:"on",fixedOverflowWidgets:!0,contextmenu:!0,lineNumbers:b?"off":void 0,glyphMargin:!b&&void 0,lineNumbersMinChars:4*!b,folding:!b&&void 0,scrollBeyondLastLine:!1},w),q=async(e,t)=>{E.current=e,L.current=t,h(e),I.current=e.createContextKey("hasValue",!1),I.current.set(void 0!==N&&N.trim().length>0),U(M),D.enabled&&e.addCommand(t.KeyCode.Tab,()=>{e.executeEdits("source",[{identifier:"add-placeholder",range:new t.Range(1,1,1,1),text:(null!=k?k:"").split("\n\n").join("\n").replaceAll("*","").replaceAll("&nbsp;"," ")}])},"!hasValue"),T.enabled&&e.addAction({id:"run-query",label:"Run Query",keybindings:[t.KeyMod.CtrlCmd+t.KeyCode.Enter],contextMenuGroupId:"operation",contextMenuOrder:0,run:()=>{var e,t;let n=(null==E?void 0:E.current).getModel().getValueInRange(null==E||null==(e=E.current)?void 0:e.getSelection());T.callback(n||(null==E||null==(t=E.current)?void 0:t.getValue()))}}),z.enabled&&e.addAction({id:"explain-code",label:"Explain Code",contextMenuGroupId:"operation",contextMenuOrder:1,run:()=>{var e;let t=(null==E?void 0:E.current).getModel().getValueInRange(null==E||null==(e=E.current)?void 0:e.getSelection());z.callback(t)}}),B.enabled&&e.addAction({id:"close-assistant",label:"Close Assistant",keybindings:[t.KeyMod.CtrlCmd+t.KeyCode.KeyI],run:()=>B.callback()});let n=e.getModel();if(n){let t=n.getPositionAt((null!=N?N:"").length);e.setPosition(t)}await (0,m.wR)(500),l&&(null==e||e.focus())};return(0,c.useEffect)(()=>{U(M)},[M]),(0,c.useEffect)(()=>{if(D.enabled&&void 0!==E.current&&void 0!==L.current){let e=E.current,t=L.current;e.addCommand(t.KeyCode.Tab,()=>{e.executeEdits("source",[{identifier:"add-placeholder",range:new t.Range(1,1,1,1),text:(null!=k?k:"  ").split("\n\n").join("\n").replaceAll("*","").replaceAll("&nbsp;","")}])},"!hasValue")}},[k,D.enabled]),(0,c.useEffect)(()=>{if(A&&R&&F.enabled){let e=A.languages.registerDocumentFormattingEditProvider("pgsql",{async provideDocumentFormattingEdits(e){let t=e.getValue(),n=(0,p.A)(t);return F.callback(n),[{range:e.getFullModelRange(),text:n}]}});return()=>e.dispose()}},[A,R,F.enabled]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.default,{path:t,theme:"supabase",className:(0,f.cn)(v,"monaco-editor"),value:null!=N?N:void 0,language:n,defaultValue:null!=r?r:void 0,loading:j||(0,a.jsx)(x.A,{}),options:W,onMount:q,onChange:e=>{I.current.set((null!=e?e:"").length>0),U(!e),_(e)},"data-sentry-element":"Editor","data-sentry-source-file":"CodeEditor.tsx"}),void 0!==k&&(0,a.jsx)("div",{className:(0,f.cn)("monaco-placeholder absolute top-[3px] left-[57px] text-sm pointer-events-none font-mono","[&>div>p]:text-foreground-lighter [&>div>p]:!m-0 tracking-tighter",O?"block":"hidden"),children:(0,a.jsx)(d.o,{content:k})})]})}},84926:(e,t,n)=>{"use strict";n.d(t,{O:()=>c});var a=n(32144),s=n(80251),r=n(73969),o=n(65172),l=n(76080);async function i(e){let{id:t,branchName:n,gitBranch:a,persistent:s,requestReview:r}=e,{data:l,error:i}=await (0,o.F6)("/v1/branches/{branch_id}",{params:{path:{branch_id:t}},body:{branch_name:n,git_branch:a,persistent:s,request_review:r}});return i&&(0,o.H4)(i),l}let c=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,a.jE)();return(0,s.n)(e=>i(e),{async onSuccess(t,n,a){let{projectRef:s}=n;await o.invalidateQueries(l.N.list(s)),await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?r.oR.error("Failed to update branch: ".concat(e.message)):t(e,n,a)},...n})}},85265:(e,t,n)=>{"use strict";n.d(t,{z:()=>a});var a=function(e){return e.TABLE="r",e.VIEW="v",e.MATERIALIZED_VIEW="m",e.FOREIGN_TABLE="f",e.PARTITIONED_TABLE="p",e}({})},85924:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});let a={list:(e,t)=>["projects",e,"database-indexes",t].filter(Boolean)}},86177:(e,t,n)=>{"use strict";n.d(t,{Bx:()=>y,Yv:()=>v,CG:()=>b,Cn:()=>j,wZ:()=>w,Uj:()=>S,FX:()=>N,GB:()=>g,cL:()=>h});var a=n(80263),s=n(38694),r=n(79279),o=n(49857),l=n(53239),i=n(51500),c=n(93402),d=n(93210),u=n(77635),p=n(9919),m=n(53555),f=n(78721);let x=l.createContext(null);function h(){let e=l.useContext(x);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}let g=l.forwardRef((e,t)=>{let{defaultOpen:n=!0,open:s,onOpenChange:r,className:o,style:c,children:d,...u}=e,p=function(){let[e,t]=l.useState(void 0);return l.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),n=()=>{t(window.innerWidth<768)};return e.addEventListener("change",n),t(window.innerWidth<768),()=>e.removeEventListener("change",n)},[]),!!e}(),[m,h]=l.useState(!1),[g,y]=l.useState(n),b=null!=s?s:g,v=l.useCallback(e=>{let t="function"==typeof e?e(b):e;r?r(t):y(t),document.cookie="".concat("sidebar:state","=").concat(t,"; path=/; max-age=").concat(604800)},[r,b]),j=l.useCallback(()=>p?h(e=>!e):v(e=>!e),[p,v,h]),w=b?"expanded":"collapsed",N=l.useMemo(()=>({state:w,open:b,setOpen:v,isMobile:p,openMobile:m,setOpenMobile:h,toggleSidebar:j}),[w,b,v,p,m,h,j]);return(0,a.jsx)(x.Provider,{value:N,children:(0,a.jsx)(f.Bc,{delayDuration:0,children:(0,a.jsx)("div",{style:{"--sidebar-width":"13rem","--sidebar-width-icon":"3rem",...c},className:(0,i.cn)("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",o),ref:t,...u,children:d})})})});g.displayName="SidebarProvider";let y=l.forwardRef((e,t)=>{let{overflowing:n=!1,side:s="left",variant:r="sidebar",collapsible:o="offcanvas",className:l,children:c,...d}=e,{isMobile:u,state:m,openMobile:f,setOpenMobile:x}=h();return"none"===o?(0,a.jsx)("div",{className:(0,i.cn)("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",l),ref:t,...d,children:c}):u?(0,a.jsx)(p.cj,{open:f,onOpenChange:x,...d,children:(0,a.jsx)(p.h,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:s,children:(0,a.jsx)("div",{className:"flex h-full w-full flex-col",children:c})})}):(0,a.jsxs)("div",{ref:t,className:(0,i.cn)(n?"w-12":"","relative group peer hidden md:block text-sidebar-foreground","flex-shrink-0"),"data-state":m,"data-collapsible":"collapsed"===m?o:"","data-variant":r,"data-side":s,children:[(0,a.jsx)("div",{className:(0,i.cn)(n?"absolute top-0":"relative","duration-100 h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===r||"inset"===r?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),(0,a.jsx)("div",{className:(0,i.cn)("absolute top-0 h-full","duration-100 inset-y-0 z-10 hidden w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex","left"===s?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===r||"inset"===r?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",l),...d,children:(0,a.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:c})})]})});y.displayName="Sidebar",l.forwardRef((e,t)=>{let{className:n,onClick:s,...r}=e,{toggleSidebar:l}=h();return(0,a.jsxs)(c.$,{ref:t,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:(0,i.cn)("h-7 w-7",n),onClick:e=>{null==s||s(e),l()},...r,children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})}).displayName="SidebarTrigger",l.forwardRef((e,t)=>{let{className:n,...s}=e,{toggleSidebar:r}=h();return(0,a.jsx)("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:(0,i.cn)("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",n),...s})}).displayName="SidebarRail",l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("main",{ref:t,className:(0,i.cn)("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",n),...s})}).displayName="SidebarInset",l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(d.p,{ref:t,"data-sidebar":"input",className:(0,i.cn)("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",n),...s})}).displayName="SidebarInput",l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,"data-sidebar":"header",className:(0,i.cn)("flex flex-col gap-2 p-2",n),...s})}).displayName="SidebarHeader";let b=l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,"data-sidebar":"footer",className:(0,i.cn)("flex flex-col gap-2 p-2",n),...s})});b.displayName="SidebarFooter",l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(u.w,{ref:t,"data-sidebar":"separator",className:(0,i.cn)("mx-2 w-auto bg-sidebar-border",n),...s})}).displayName="SidebarSeparator";let v=l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,"data-sidebar":"content",className:(0,i.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",n),...s})});v.displayName="SidebarContent";let j=l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,"data-sidebar":"group",className:(0,i.cn)("relative flex w-full min-w-0 flex-col p-2",n),...s})});j.displayName="SidebarGroup",l.forwardRef((e,t)=>{let{className:n,asChild:r=!1,...o}=e,l=r?s.DX:"div";return(0,a.jsx)(l,{ref:t,"data-sidebar":"group-label",className:(0,i.cn)("duration-100 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-5 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",n),...o})}).displayName="SidebarGroupLabel",l.forwardRef((e,t)=>{let{className:n,asChild:r=!1,...o}=e,l=r?s.DX:"button";return(0,a.jsx)(l,{ref:t,"data-sidebar":"group-action",className:(0,i.cn)("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-5 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",n),...o})}).displayName="SidebarGroupAction",l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,"data-sidebar":"group-content",className:(0,i.cn)("w-full text-sm",n),...s})}).displayName="SidebarGroupContent";let w=l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("ul",{ref:t,"data-sidebar":"menu",className:(0,i.cn)("flex w-full min-w-0 flex-col gap-1",n),...s})});w.displayName="SidebarMenu";let N=l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("li",{ref:t,"data-sidebar":"menu-item",className:(0,i.cn)("group/menu-item relative",n),...s})});N.displayName="SidebarMenuItem";let k=(0,r.F)((0,i.cn)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md py-2 px-1.5 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground [&>span:last-child]:truncate [&>svg]:size-5 [&>svg]:shrink-0 text-foreground-lighter data-[active=true]:text-foreground"),{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"},hasIcon:{true:"group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!pl-1.5 group-data-[collapsible=icon]:!pr-2",false:""}},defaultVariants:{variant:"default",size:"default",hasIcon:!0}}),S=l.forwardRef((e,t)=>{let{asChild:n=!1,isActive:r=!1,variant:o="default",size:l="default",hasIcon:c=!0,tooltip:d,className:u,...p}=e,m=n?s.DX:"button",{isMobile:x,state:g}=h(),y=(0,a.jsx)(m,{ref:t,"data-sidebar":"menu-button","data-size":l,"data-active":r,"data-has-icon":c,className:(0,i.cn)(k({variant:o,size:l,hasIcon:c}),u),...p});return d?("string"==typeof d&&(d={children:d}),(0,a.jsxs)(f.m_,{children:[(0,a.jsx)(f.k$,{asChild:!0,children:y}),(0,a.jsx)(f.ZI,{side:"right",align:"center",hidden:"collapsed"!==g||x,...d})]})):y});S.displayName="SidebarMenuButton",l.forwardRef((e,t)=>{let{className:n,asChild:r=!1,showOnHover:o=!1,...l}=e,c=r?s.DX:"button";return(0,a.jsx)(c,{ref:t,"data-sidebar":"menu-action",className:(0,i.cn)("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-5 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",o&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",n),...l})}).displayName="SidebarMenuAction",l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,"data-sidebar":"menu-badge",className:(0,i.cn)("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n),...s})}).displayName="SidebarMenuBadge",l.forwardRef((e,t)=>{let{className:n,showIcon:s=!1,...r}=e,o=l.useMemo(()=>"".concat(Math.floor(40*Math.random())+50,"%"),[]);return(0,a.jsxs)("div",{ref:t,"data-sidebar":"menu-skeleton",className:(0,i.cn)("rounded-md h-8 flex gap-2 px-2 items-center",n),...r,children:[s&&(0,a.jsx)(m.E,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),(0,a.jsx)(m.E,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":o}})]})}).displayName="SidebarMenuSkeleton",l.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("ul",{ref:t,"data-sidebar":"menu-sub",className:(0,i.cn)("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",n),...s})}).displayName="SidebarMenuSub",l.forwardRef((e,t)=>{let{...n}=e;return(0,a.jsx)("li",{ref:t,...n})}).displayName="SidebarMenuSubItem",l.forwardRef((e,t)=>{let{asChild:n=!1,size:r="md",isActive:o,className:l,...c}=e,d=n?s.DX:"a";return(0,a.jsx)(d,{ref:t,"data-sidebar":"menu-sub-button","data-size":r,"data-active":o,className:(0,i.cn)("flex h-6 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-5 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===r&&"text-xs","md"===r&&"text-sm","group-data-[collapsible=icon]:hidden",l),...c})}).displayName="SidebarMenuSubButton"},88602:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var a=n(80263),s=n(53239),r=n(78721),o=n(40022),l=n(51500);let i=(0,s.forwardRef)((e,t)=>{let{...n}=e;return(0,a.jsxs)(r.m_,{children:[(0,a.jsx)(r.k$,{asChild:!0,children:(0,a.jsx)(o.$,{ref:t,...n,className:(0,l.cn)(n.className,"pointer-events-auto"),children:n.children})}),void 0!==n.tooltip.content.text&&(0,a.jsx)(r.ZI,{...n.tooltip.content,children:n.tooltip.content.text})]})});i.displayName="ButtonTooltip"},90050:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(80263),s=n(51500);let r=e=>{let{options:t,width:n=50,activeOption:r,onClickOption:o,borderOverride:l="border-stronger"}=e,i=e=>"absolute top-0 z-1 text-xs inline-flex h-full items-center justify-center font-medium\n    ".concat(e?"hover:text-foreground-light hover:text-foreground":"hover:text-foreground"," hover:text-foreground focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue\n    transition ease-in-out duration-150");return(0,a.jsxs)("div",{className:"relative border ".concat(l," rounded-md h-7"),style:{padding:1,width:(n+1)*2},"data-sentry-component":"TwoOptionToggle","data-sentry-source-file":"TwoOptionToggle.tsx",children:[(0,a.jsx)("span",{style:{width:n,translate:r===t[1]?"0px":"".concat(n-2,"px")},"aria-hidden":"true",className:(0,s.cn)("z-0 inline-block rounded h-full bg-overlay-hover shadow transform","transition-all ease-in-out border border-strong")}),t.map((e,t)=>(0,a.jsx)("span",{style:{width:n+1},className:"\n              ".concat(r===e?"text-foreground":"text-foreground-light","\n              ").concat(0===t?"right-0":"left-0","\n              ").concat(i(r===e),"\n              cursor-pointer\n            "),onClick:()=>o(e),children:(0,a.jsx)("span",{className:(0,s.cn)("capitalize hover:text-foreground",r===e?"text-foreground":"text-foreground-light"),children:e})},"toggle_".concat(t)))]})}},93402:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,r:()=>i});var a=n(80263),s=n(38694),r=n(79279),o=n(53239),l=n(51500);let i=(0,r.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground-muted focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-300 text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-control bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:n,variant:r,size:o,asChild:c=!1,...d}=e,u=c?s.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(i({variant:r,size:o,className:n})),ref:t,...d})});c.displayName="Button"},95566:(e,t,n)=>{"use strict";n.d(t,{L:()=>c});var a=n(80263),s=n(32144),r=n(24400),o=n(53239),l=n(21650),i=n(44187);function c(e){let{href:t,projectRef:n,children:c,...d}=e,u=function(){let e=(0,r.useRouter)(),t=(0,s.jE)();return(0,o.useCallback)(n=>{let{projectRef:a}=n;e.prefetch("/project/".concat(a)),(0,l.G9)(t,{ref:a}).catch(()=>{})},[t,e])}();return(0,a.jsx)(i.A,{href:t||"/project/".concat(n),prefetcher:()=>u({projectRef:n}),...d,"data-sentry-element":"PrefetchableLink","data-sentry-component":"ProjectIndexPageLink","data-sentry-source-file":"project.$ref.tsx",children:c})}},96872:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});let a=e=>{var t;let{connectionInfo:n,poolingInfo:a,metadata:s}=e,r=null==a?void 0:a.connectionString.includes("options=reference"),{projectRef:o}=s,l="[YOUR-PASSWORD]",i=n.db_user,c=n.db_port,d=n.db_host,u=n.db_name,p=null==a?void 0:a.db_user,m=null==a?void 0:a.db_port,f=null==a?void 0:a.db_host,x=null==a?void 0:a.db_name,h=r?'psql "postgresql://'.concat(i,":").concat(l,"@").concat(d,":").concat(c,"/").concat(u,'"'):"psql -h ".concat(d," -p ").concat(c," -d ").concat(u," -U ").concat(i),g="postgresql://".concat(i,":").concat(l,"@").concat(d,":").concat(c,"/").concat(u),y="DATABASE_URL=".concat(g),b="jdbc:postgresql://".concat(d,":").concat(c,"/").concat(u,"?user=").concat(i,"&password=").concat(l),v='{\n  "ConnectionStrings": {\n    "DefaultConnection": "Host='.concat(d,";Database=").concat(u,";Username=").concat(i,";Password=").concat(l,';SSL Mode=Require;Trust Server Certificate=true"\n  }\n}'),j='{\n  "ConnectionStrings": {\n    "DefaultConnection": "User Id='.concat(p,";Password=").concat(l,";Server=").concat(f,";Port=").concat(m,";Database=").concat(x).concat(r?";Options='reference=".concat(o,"'"):"",'"\n  }\n}'),w=r?'psql "postgresql://'.concat(p,":").concat(l,"@").concat(f,":").concat(m,"/").concat(x,"?options=reference%3D").concat(o,'"'):"psql -h ".concat(f," -p ").concat(m," -d ").concat(x," -U ").concat(p),N=null!=(t=null==a?void 0:a.connectionString)?t:"",k="DATABASE_URL=".concat(null==a?void 0:a.connectionString),S="user=".concat(p," \npassword=").concat(l," \nhost=").concat(f,"\nport=").concat(m,"\ndbname=").concat(x).concat(r?"options=reference=".concat(o):""),C="jdbc:postgresql://".concat(f,":").concat(m,"/").concat(x,"?user=").concat(p).concat(r?"&options=reference%3D".concat(o):"","&password=").concat(l),_="user=".concat(i," \npassword=").concat(l," \nhost=").concat(d," \nport=").concat(c," \ndbname=").concat(u),A="user=".concat(p," \npassword=").concat(l," \nhost=").concat(f," \nport=").concat(m," \ndbname=").concat(x);return{direct:{psql:h,uri:g,golang:y,jdbc:b,dotnet:v,nodejs:"DATABASE_URL=".concat(g),php:y,python:y,sqlalchemy:_},pooler:{psql:w,uri:N,golang:S,jdbc:C,dotnet:j,nodejs:k,php:S,python:S,sqlalchemy:A}}}},97175:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var a=n(80263),s=n(63492),r=n(18687);let o=(e,t)=>{var n;let o=null!=(n=null==e?void 0:e.ref)?n:"default",{pgNetExtensionExists:l,pitrEnabled:i,columnLevelPrivileges:c,enablePgReplicate:d}=t||{};return[{title:"Database Management",items:[{name:"Schema Visualizer",key:"schemas",url:"/project/".concat(o,"/database/schemas"),items:[]},{name:"Tables",key:"tables",url:"/project/".concat(o,"/database/tables"),items:[]},{name:"Functions",key:"functions",url:"/project/".concat(o,"/database/functions"),items:[]},{name:"Triggers",key:"triggers",url:"/project/".concat(o,"/database/triggers"),items:[]},{name:"Enumerated Types",key:"types",url:"/project/".concat(o,"/database/types"),items:[]},{name:"Extensions",key:"extensions",url:"/project/".concat(o,"/database/extensions"),items:[]},{name:"Indexes",key:"indexes",url:"/project/".concat(o,"/database/indexes"),items:[]},{name:"Publications",key:"publications",url:"/project/".concat(o,"/database/publications"),items:[]},...d?[{name:"Replication",key:"replication",url:"/project/".concat(o,"/database/replication"),items:[]}]:[{name:"Replication",key:"replication",url:"/project/".concat(o,"/database/replication"),label:"Coming Soon",items:[]}]]},{title:"Configuration",items:[{name:"Roles",key:"roles",url:"/project/".concat(o,"/database/roles"),items:[]},...c?[{name:"Column Privileges",key:"column-privileges",url:"/project/".concat(o,"/database/column-privileges"),items:[],label:"ALPHA"}]:[],{name:"Policies",key:"policies",url:"/project/".concat(o,"/auth/policies"),rightIcon:(0,a.jsx)(r.A,{strokeWidth:1,className:"h-4 w-4"}),items:[]},{name:"Settings",key:"settings",url:"/project/".concat(o,"/database/settings"),items:[]}]},{title:"Platform",items:[...s.pe?[{name:"Backups",key:"backups",url:i?"/project/".concat(o,"/database/backups/pitr"):"/project/".concat(o,"/database/backups/scheduled"),items:[]}]:[],{name:"Migrations",key:"migrations",url:"/project/".concat(o,"/database/migrations"),items:[]},{name:"Wrappers",key:"wrappers",url:"/project/".concat(o,"/integrations?category=wrapper"),rightIcon:(0,a.jsx)(r.A,{strokeWidth:1,className:"h-4 w-4"}),items:[]},...l?[{name:"Webhooks",key:"hooks",url:"/project/".concat(o,"/integrations/webhooks/overview"),rightIcon:(0,a.jsx)(r.A,{strokeWidth:1,className:"h-4 w-4"}),items:[]}]:[]]},{title:"Tools",items:[{name:"Security Advisor",key:"security-advisor",url:"/project/".concat(o,"/advisors/security"),rightIcon:(0,a.jsx)(r.A,{strokeWidth:1,className:"h-4 w-4"}),items:[]},{name:"Performance Advisor",key:"performance-advisor",url:"/project/".concat(o,"/advisors/performance"),rightIcon:(0,a.jsx)(r.A,{strokeWidth:1,className:"h-4 w-4"}),items:[]},{name:"Query Performance",key:"query-performance",url:"/project/".concat(o,"/advisors/query-performance"),rightIcon:(0,a.jsx)(r.A,{strokeWidth:1,className:"h-4 w-4"}),items:[]}]}]}},97600:(e,t,n)=>{"use strict";n.d(t,{x:()=>r});var a=n(33986);function s(e,t){var n;return n=!(null==t?void 0:t.includes(e)),n}function r(e){let{profile:t}=(0,a.xc)();return Array.isArray(e)?Object.fromEntries(e.map(e=>[e.replace(/:/g,"_").split("_").map((e,t)=>0===t?e:e[0].toUpperCase()+e.slice(1)).join(""),s(e,null==t?void 0:t.disabled_features)])):s(e,null==t?void 0:t.disabled_features)}},97956:(e,t,n)=>{"use strict";n.d(t,{t:()=>c});var a=n(80263),s=n(28881),r=n(47941),o=n(53239),l=n(51500);let i=o.forwardRef((e,t)=>{let{className:n,value:s,...o}=e;return(0,a.jsx)(r.bL,{ref:t,className:(0,l.cn)("relative h-1 w-full overflow-hidden rounded-full bg-surface-300",n),...o,children:(0,a.jsx)(r.C1,{className:"h-full w-full flex-1 bg-foreground transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});i.displayName=r.bL.displayName;let c=e=>{let{progress:t,progressPrefix:n,action:r,message:o}=e;return(0,a.jsxs)("div",{className:"flex gap-3 w-full","data-sentry-component":"SonnerProgress","data-sentry-source-file":"sonner-progress.tsx",children:[(0,a.jsx)(s.A,{className:"animate-spin text-foreground-muted mt-0.5",size:16,"data-sentry-element":"Loader2","data-sentry-source-file":"sonner-progress.tsx"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,a.jsxs)("div",{className:"flex w-full justify-between",children:[(0,a.jsx)("p",{className:"text-foreground text-sm",children:o}),(0,a.jsxs)("p",{className:"text-foreground-light text-sm font-mono",children:[n||"","".concat(Number(t).toFixed(0),"%")]})]}),(0,a.jsx)(i,{value:t,className:"w-full","data-sentry-element":"Progress","data-sentry-source-file":"sonner-progress.tsx"}),(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center justify-between",children:[(0,a.jsx)("small",{className:"text-foreground-lighter text-xs",children:"Please do not close the browser"}),r]})]})]})}},98832:(e,t,n)=>{"use strict";n.d(t,{f:()=>m,g:()=>p});var a=n(80263),s=n(5483),r=n(63492),o=n(86815),l=n(54474),i=n(66628),c=n(34424),d=n(79033),u=n(55555);let p=e=>{let{projectRef:t,children:n}=e;return(0,a.jsx)(d.by,{"data-sentry-element":"TableEditorStateContextProvider","data-sentry-component":"ProjectContextProvider","data-sentry-source-file":"ProjectContext.tsx",children:(0,a.jsx)(u.YD,{"data-sentry-element":"TabsStateContextProvider","data-sentry-source-file":"ProjectContext.tsx",children:(0,a.jsx)(o.Co,{"data-sentry-element":"AiAssistantStateContextProvider","data-sentry-source-file":"ProjectContext.tsx",children:(0,a.jsx)(c.y,{"data-sentry-element":"StorageExplorerStateContextProvider","data-sentry-source-file":"ProjectContext.tsx",children:(0,a.jsx)(l.UZ,{"data-sentry-element":"DatabaseSelectorStateContextProvider","data-sentry-source-file":"ProjectContext.tsx",children:(0,a.jsx)(i.ME,{"data-sentry-element":"RoleImpersonationStateContextProvider","data-sentry-source-file":"ProjectContext.tsx",children:n},"role-impersonation-state-".concat(t))},"database-selector-state-".concat(t))},"storage-explorer-state-".concat(t))},"ai-assistant-state-".concat(t))},"tabs-state-".concat(t))},"table-editor-state-".concat(t))},m=()=>{let{data:e}=(0,s.YA)();return(null==e?void 0:e.status)===r.BU.ACTIVE_HEALTHY}},99127:(e,t,n)=>{"use strict";n.d(t,{b:()=>c});var a=n(56947),s=n(65172),r=n(5483),o=n(63492),l=n(56131);async function i(e,t){let{projectRef:n}=e;if(!n)throw Error("Project ref is required");let{data:a,error:r}=await (0,s.Jt)("/platform/projects/{ref}/run-lints",{params:{path:{ref:n}},signal:t});return r&&(0,s.H4)(r),a}let c=function(e){let{projectRef:t}=e,{enabled:n=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:c}=(0,r.YA)(),d=(null==c?void 0:c.status)===o.BU.ACTIVE_HEALTHY;return(0,a.I)(l.O.lint(t),e=>{let{signal:n}=e;return i({projectRef:t},n)},{enabled:n&&void 0!==t&&d,...s})}}}]);